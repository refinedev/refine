"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[90701],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>m});var r=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var p=r.createContext({}),d=function(e){var t=r.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},u=function(e){var t=d(e.components);return r.createElement(p.Provider,{value:t},e.children)},s={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},c=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,p=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),c=d(n),m=o,f=c["".concat(p,".").concat(m)]||c[m]||s[m]||i;return n?r.createElement(f,a(a({ref:t},u),{},{components:n})):r.createElement(f,a({ref:t},u))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,a=new Array(i);a[0]=c;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:o,a[1]=l;for(var d=2;d<i;d++)a[d]=n[d];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}c.displayName="MDXCreateElement"},70684:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>p,default:()=>b,frontMatter:()=>l,metadata:()=>d,toc:()=>s});n(67294);var r=n(3905);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function a(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const l={id:"vite",title:"Module Federation","example-title":"Module Federation","example-tags":["module-federation"]},p=void 0,d={unversionedId:"examples/module-federation/vite",id:"examples/module-federation/vite",title:"Module Federation",description:"Module federation is concept which get different builds to come together to make one application. So in most cases one will be the host application which will bring all other remote components that are built to be shared.",source:"@site/docs/examples/module-federation/vite.md",sourceDirName:"examples/module-federation",slug:"/examples/module-federation/vite",permalink:"/docs/examples/module-federation/vite",draft:!1,editUrl:"https://github.com/refinedev/refine/tree/master/documentation/docs/examples/module-federation/vite.md",tags:[],version:"current",lastUpdatedBy:"Oleg Agafonov",lastUpdatedAt:1703019181,formattedLastUpdatedAt:"Dec 19, 2023",frontMatter:{id:"vite",title:"Module Federation","example-title":"Module Federation","example-tags":["module-federation"]},sidebar:"mainSidebar",previous:{title:"Ably",permalink:"/docs/examples/live-provider/ably"},next:{title:"Multi-level Menu",permalink:"/docs/examples/multi-level-menu/"}},u={},s=[],c=(m="CodeSandboxExample",function(e){return console.warn("Component "+m+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",e)});var m;const f={toc:s};function b(e){var{components:t}=e,n=a(e,["components"]);return(0,r.kt)("wrapper",i(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({},f,n),{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Module federation is concept which get different builds to come together to make one application. So in most cases one will be the host application which will bring all other remote components that are built to be shared."),(0,r.kt)("p",null,"This example demonstrates how to integrate Refine with Vite's module federation."),(0,r.kt)("p",null,"In this example, we have 3 apps:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"host"),": The host application which puts all other remote components and auth logic together."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"blog-posts"),": Application which exports pages related to blog posts."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"categories"),": Application which exports pages related to categories.")),(0,r.kt)("p",null,"Usage:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"npm create refine-app@latest -- --example monorepo-module-federation\n\ncd monorepo-module-federation\n\nnpm i\n\ncd host\n\nnpm run build && npm run preview\n\ncd ../blog-posts\n\nnpm run build && npm run preview\n\ncd ../categories\n\nnpm run build && npm run preview\n")),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("inlineCode",{parentName:"p"},"dev")," mode is only supported for ",(0,r.kt)("inlineCode",{parentName:"p"},"host")," app, but not for sub apps. This is because Vite does not support module federation in dev mode yet."),(0,r.kt)("p",{parentName:"admonition"},"So when you made changes in sub apps, you need to rebuild and restart the app(s)."),(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("a",{parentName:"p",href:"https://github.com/originjs/vite-plugin-federation#vite-dev-mode"},"https://github.com/originjs/vite-plugin-federation#vite-dev-mode"))),(0,r.kt)("p",null,"If you are using a library which requires shared context (ie: ColorContextProvider for antd), make sure you are updating ",(0,r.kt)("inlineCode",{parentName:"p"},"vite.config.ts")," by adding relevant package(s) to ",(0,r.kt)("inlineCode",{parentName:"p"},"shared")," array."),(0,r.kt)("p",null,"You need to do this for both ",(0,r.kt)("inlineCode",{parentName:"p"},"host")," and sub apps which will consume shared context."),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/refinedev/refine/blob/master/examples/monorepo-module-federation/apps/host/vite.config.ts#L36"},"https://github.com/refinedev/refine/blob/master/examples/monorepo-module-federation/apps/host/vite.config.ts#L36")),(0,r.kt)(c,{path:"monorepo-module-federation",hideSandbox:!0,mdxType:"CodeSandboxExample"}),(0,r.kt)("p",null,"References:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://originjs.org/en/guide/plugins/vite-plugin-federation/#installation"},"https://originjs.org/en/guide/plugins/vite-plugin-federation/#installation")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://nipunamarcus.medium.com/micro-frontend-module-federation-with-vite-for-react-d2a8edad7f14"},"https://nipunamarcus.medium.com/micro-frontend-module-federation-with-vite-for-react-d2a8edad7f14"))))}b.isMDXComponent=!0}}]);