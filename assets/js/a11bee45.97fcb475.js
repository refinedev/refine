"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[72131],{58860:(e,n,a)=>{a.d(n,{xA:()=>d,yg:()=>m});var t=a(37953);function r(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function i(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function o(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?i(Object(a),!0).forEach((function(n){r(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function s(e,n){if(null==e)return{};var a,t,r=function(e,n){if(null==e)return{};var a,t,r={},i=Object.keys(e);for(t=0;t<i.length;t++)a=i[t],n.indexOf(a)>=0||(r[a]=e[a]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)a=i[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var p=t.createContext({}),l=function(e){var n=t.useContext(p),a=n;return e&&(a="function"==typeof e?e(n):o(o({},n),e)),a},d=function(e){var n=l(e.components);return t.createElement(p.Provider,{value:n},e.children)},u="mdxType",c={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},g=t.forwardRef((function(e,n){var a=e.components,r=e.mdxType,i=e.originalType,p=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),u=l(a),g=r,m=u["".concat(p,".").concat(g)]||u[g]||c[g]||i;return a?t.createElement(m,o(o({ref:n},d),{},{components:a})):t.createElement(m,o({ref:n},d))}));function m(e,n){var a=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=g;var s={};for(var p in n)hasOwnProperty.call(n,p)&&(s[p]=n[p]);s.originalType=e,s[u]="string"==typeof e?e:r,o[1]=s;for(var l=2;l<i;l++)o[l]=a[l];return t.createElement.apply(null,o)}return t.createElement.apply(null,a)}g.displayName="MDXCreateElement"},6062:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>d,contentTitle:()=>p,default:()=>m,frontMatter:()=>s,metadata:()=>l,toc:()=>u});a(37953);var t=a(58860);function r(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function i(e,n){return n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})),e}function o(e,n){if(null==e)return{};var a,t,r=function(e,n){if(null==e)return{};var a,t,r={},i=Object.keys(e);for(t=0;t<i.length;t++)a=i[t],n.indexOf(a)>=0||(r[a]=e[a]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)a=i[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}const s={title:"Setting Up the Client App",description:"We'll initialize our Pixels app using Refine and get familiar with the boilerplate code to be created with the create refine-app CLI tool.",slug:"refine-pixels-2",authors:"abdullah_numan",tags:["refine-week","refine","supabase"],image:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2023-02-05-refine-pixels-2/social.png",hide_table_of_contents:!1},p=void 0,l={permalink:"/blog/refine-pixels-2",source:"@site/blog/2023-02-15-refine-pixels-2.md",title:"Setting Up the Client App",description:"We'll initialize our Pixels app using Refine and get familiar with the boilerplate code to be created with the create refine-app CLI tool.",date:"2023-02-15T00:00:00.000Z",formattedDate:"February 15, 2023",tags:[{label:"refine-week",permalink:"/blog/tags/refine-week"},{label:"refine",permalink:"/blog/tags/refine"},{label:"supabase",permalink:"/blog/tags/supabase"}],readingTime:15.07,hasTruncateMarker:!1,authors:[{name:"Abdullah Numan",title:"Fullstack Developer",url:"https://github.com/anewman15/",imageURL:"https://github.com/anewman15.png",key:"abdullah_numan"}],frontMatter:{title:"Setting Up the Client App",description:"We'll initialize our Pixels app using Refine and get familiar with the boilerplate code to be created with the create refine-app CLI tool.",slug:"refine-pixels-2",authors:"abdullah_numan",tags:["refine-week","refine","supabase"],image:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2023-02-05-refine-pixels-2/social.png",hide_table_of_contents:!1},prevItem:{title:"Adding CRUD Actions and Authentication",permalink:"/blog/refine-pixels-3"},nextItem:{title:"Pilot & Refine architecture",permalink:"/blog/refine-pixels-1"},relatedPosts:[{title:"Setting Up the Invoicer App",description:"We start with setting up the Invoicer app by choosing Ant Design as a UI framework and Strapi as a dataprovider",permalink:"/blog/refine-react-invoice-generator-2",formattedDate:"April 11, 2023",authors:[{name:"Abdullah Numan",title:"Fullstack Developer",url:"https://github.com/anewman15/",imageURL:"https://github.com/anewman15.png",key:"abdullah_numan"}],readingTime:19.145,date:"2023-04-11T00:00:00.000Z"},{title:"Building a React Admin Dashboard with Tremor Library",description:"We'll build a simple React admin dashboard using Refine and Tremor.",permalink:"/blog/building-react-admin-dashboard-with-tremor",formattedDate:"July 2, 2023",authors:[{name:"Joseph Mawa",title:"Web Developer",url:"https://github.com/nibble0101",imageURL:"/img/generic-profile.png",key:"joseph_mawa"}],readingTime:23.495,date:"2023-07-02T00:00:00.000Z"},{title:"Creating Mission and Invoice Pages",description:"We add more CRUD views to the Pdf Invoice Generator app we have been building using Refine and Strapi last few days.",permalink:"/blog/refine-react-invoice-generator-4",formattedDate:"April 13, 2023",authors:[{name:"Abdullah Numan",title:"Fullstack Developer",url:"https://github.com/anewman15/",imageURL:"https://github.com/anewman15.png",key:"abdullah_numan"}],readingTime:17.78,date:"2023-04-13T00:00:00.000Z"}],authorPosts:[{title:"How to Use JavaScript Slice Method",description:"JavaScript Slice method implementation on Array and Strings with examples",permalink:"/blog/javascript-slice",formattedDate:"November 4, 2024",authors:[{name:"Abdullah Numan",title:"Fullstack Developer",url:"https://github.com/anewman15/",imageURL:"https://github.com/anewman15.png",key:"abdullah_numan"}],readingTime:14.16,date:"2024-11-04T00:00:00.000Z"},{title:"How to Use the TypeScript satisfies Operator",description:"TypeScript classes are a superset of JavaScript classes. This post covers the fundamentals of type annotations in TypeScript Classes and their associated quirks.",permalink:"/blog/typescript-satisfies-operator",formattedDate:"January 14, 2025",authors:[{name:"Abdullah Numan",title:"Fullstack Developer",url:"https://github.com/anewman15/",imageURL:"https://github.com/anewman15.png",key:"abdullah_numan"}],readingTime:13.435,date:"2025-01-14T00:00:00.000Z"},{title:"Adding CRUD Pages",description:"We'll be adding CRUD pages for Company, Client and Contact resources in this post.",permalink:"/blog/refine-react-invoice-generator-3",formattedDate:"April 12, 2023",authors:[{name:"Abdullah Numan",title:"Fullstack Developer",url:"https://github.com/anewman15/",imageURL:"https://github.com/anewman15.png",key:"abdullah_numan"}],readingTime:26.895,date:"2023-04-12T00:00:00.000Z"}]},d={authorsImageUrls:[void 0]},u=[{value:"RefineWeek series",id:"refineweek-series",level:3},{value:"Overview",id:"overview",level:2},{value:"Project Setup",id:"project-setup",level:2},{value:"Exploring the App",id:"exploring-the-app",level:2},{value:"The <code>&lt;Refine /&gt;</code> Component",id:"the-refine--component",level:3},{value:"<code>&lt;Refine /&gt;</code>&#39;s <code>dataProvider</code> Prop",id:"refine-s-dataprovider-prop",level:3},{value:"<strong>Refine</strong>&#39;s <code>supabaseClient</code>",id:"refines-supabaseclient",level:3},{value:"<code>&lt;Refine /&gt;</code>&#39;s <code>authProvider</code> Prop",id:"refine-s-authprovider-prop",level:3},{value:"Summary",id:"summary",level:2}],c={toc:u},g="wrapper";function m(e){var{components:n}=e,a=o(e,["components"]);return(0,t.yg)(g,i(function(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{},t=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),t.forEach((function(n){r(e,n,a[n])}))}return e}({},c,a),{components:n,mdxType:"MDXLayout"}),(0,t.yg)("p",null,"In this episode, we initialize our ",(0,t.yg)("strong",{parentName:"p"},"Pixels")," app using ",(0,t.yg)("a",{parentName:"p",href:"https://github.com/refinedev/refine"},(0,t.yg)("strong",{parentName:"a"},"Refine"))," and get familiar with the boilerplate code to be created with the ",(0,t.yg)("inlineCode",{parentName:"p"},"create refine-app")," CLI tool."),(0,t.yg)("p",null,"This is Day 2 of the ",(0,t.yg)("a",{parentName:"p",href:"https://refine.dev/week-of-refine-supabase/"},(0,t.yg)("strong",{parentName:"a"},"RefineWeek"))," series. ",(0,t.yg)("strong",{parentName:"p"},"RefineWeek")," is a seven-part tutorial that aims to help developers learn the ins-and-outs of ",(0,t.yg)("strong",{parentName:"p"},"Refine"),"'s powerful capabilities and get going with ",(0,t.yg)("strong",{parentName:"p"},"Refine")," within a week."),(0,t.yg)("h3",{id:"refineweek-series"},"RefineWeek series"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"Day 1 - ",(0,t.yg)("a",{parentName:"li",href:"https://refine.dev/blog/refine-pixels-1/"},"Pilot & Refine architecture")),(0,t.yg)("li",{parentName:"ul"},"Day 2 - ",(0,t.yg)("a",{parentName:"li",href:"https://refine.dev/blog/refine-pixels-2/"},"Setting Up the Client App")),(0,t.yg)("li",{parentName:"ul"},"Day 3 - ",(0,t.yg)("a",{parentName:"li",href:"https://refine.dev/blog/refine-pixels-3/"},"Adding CRUD Actions and Authentication")),(0,t.yg)("li",{parentName:"ul"},"Day 4 - ",(0,t.yg)("a",{parentName:"li",href:"https://refine.dev/blog/refine-pixels-4/"},"Adding Realtime Collaboration")),(0,t.yg)("li",{parentName:"ul"},"Day 5 - ",(0,t.yg)("a",{parentName:"li",href:"https://refine.dev/blog/refine-pixels-5/"},"Creating an Admin Dashboard with Refine")),(0,t.yg)("li",{parentName:"ul"},"Day 6 - ",(0,t.yg)("a",{parentName:"li",href:"https://refine.dev/blog/refine-pixels-6/"},"Implementing Role Based Access Control")),(0,t.yg)("li",{parentName:"ul"},"Day 7 - ",(0,t.yg)("a",{parentName:"li",href:"https://refine.dev/blog/refine-pixels-7/"},"Audit Log With Refine"))),(0,t.yg)("h2",{id:"overview"},"Overview"),(0,t.yg)("p",null,"In the previous post, we got a preview of ",(0,t.yg)("strong",{parentName:"p"},"Refine"),"'s underlying architecture, especially on how ",(0,t.yg)("strong",{parentName:"p"},"Refine"),"'s core modules abstract and divide an app's logic inside individual providers and allow their methods to be easily accessed and executed with hooks from inside consumer components. This abstraction at the providers layer is where ",(0,t.yg)("strong",{parentName:"p"},"Refine")," shines and require extensive configuration to begin with."),(0,t.yg)("p",null,"In this part, we will get into the details of two important providers: namely, the ",(0,t.yg)("a",{parentName:"p",href:"https://refine.dev/docs/data/data-provider"},(0,t.yg)("inlineCode",{parentName:"a"},"dataProvider"))," and ",(0,t.yg)("a",{parentName:"p",href:"https://refine.dev/docs/authentication/auth-provider/"},(0,t.yg)("inlineCode",{parentName:"a"},"authProvider"))," props of our ",(0,t.yg)("a",{parentName:"p",href:"https://refine.dev/docs/api-reference/core/components/refine-config/"},(0,t.yg)("inlineCode",{parentName:"a"},"<Refine />"))," component. We will be building on this knowledge in the coming episodes."),(0,t.yg)("p",null,"The providers will be generated by the ",(0,t.yg)("inlineCode",{parentName:"p"},"create refine-app")," CLI tool based on our choice, so we'll start off with setting up the ",(0,t.yg)("strong",{parentName:"p"},"Pixels")," app right away."),(0,t.yg)("h2",{id:"project-setup"},"Project Setup"),(0,t.yg)("p",null,"For this project, we are using a PostgreSQL database hosted in the ",(0,t.yg)("a",{parentName:"p",href:"https://supabase.com/"},(0,t.yg)("strong",{parentName:"a"},"Supabase"))," cloud. ",(0,t.yg)("strong",{parentName:"p"},"Refine")," comes with an optional package for ",(0,t.yg)("strong",{parentName:"p"},"Supabase")," that gives us ",(0,t.yg)("inlineCode",{parentName:"p"},"dataProvider")," and ",(0,t.yg)("inlineCode",{parentName:"p"},"authProvider"),"s out-of-the-box for handling requests for CRUD actions, authentication and authorization against models hosted in a ",(0,t.yg)("strong",{parentName:"p"},"Supabase")," server."),(0,t.yg)("p",null,"We are going to include ",(0,t.yg)("strong",{parentName:"p"},"Refine"),"'s Ant Design package for the UI side."),(0,t.yg)("p",null,"Let's go ahead and use the ",(0,t.yg)("inlineCode",{parentName:"p"},"create refine-app")," CLI tool to interactively initialize the project. Navigate to a folder of your choice and run:"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-bash"},"npm create refine-app@latest pixels\n")),(0,t.yg)("p",null,(0,t.yg)("inlineCode",{parentName:"p"},"create refine-app")," presents us with a set of questions for choosing the libraries and frameworks we want to work with."),(0,t.yg)("p",null,"So, I chose the following options:"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-bash"},"\u2714 Choose a project template \xb7 Refine(Vite)\n\u2714 What would you like to name your project?: \xb7 pixels\n\u2714 Choose your backend service to connect: \xb7 Supabase\n\u2714 Do you want to use a UI Framework?: \xb7 Ant Design\n\u2714 Do you want to add example pages?: \xb7 no\n\u2714 Do you need i18n (Internationalization) support?: \xb7 no\n\u2714 Choose a package manager: \xb7 npm\n")),(0,t.yg)("p",null,"This should create a rudimentary ",(0,t.yg)("strong",{parentName:"p"},"Refine")," app that supports ",(0,t.yg)("a",{parentName:"p",href:"https://ant.design/"},(0,t.yg)("strong",{parentName:"a"},"Ant Design"))," in the UI and ",(0,t.yg)("a",{parentName:"p",href:"https://supabase.com/"},(0,t.yg)("strong",{parentName:"a"},"Supabase"))," in the backend. If we open the app in our code editor, we can see that ",(0,t.yg)("strong",{parentName:"p"},"Refine"),"'s optional packages for ",(0,t.yg)("strong",{parentName:"p"},"Ant Design")," and ",(0,t.yg)("strong",{parentName:"p"},"Supabase")," are added to ",(0,t.yg)("inlineCode",{parentName:"p"},"package.json"),":"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-json",metastring:'title="package.json"',title:'"package.json"'},'"dependencies": {\n  "@refinedev/antd": "^5.7.0",\n  "@refinedev/core": "^4.5.8",\n  "@refinedev/react-router-v6": "^4.1.0",\n  "@refinedev/supabase": "^5.0.0",\n}\n')),(0,t.yg)("p",null,"We are going to use ",(0,t.yg)("strong",{parentName:"p"},"Ant Design")," components for our UI thanks to the ",(0,t.yg)("inlineCode",{parentName:"p"},"@refinedev/antd")," module. ",(0,t.yg)("inlineCode",{parentName:"p"},"@refinedev/supabase")," module allows us to use ",(0,t.yg)("strong",{parentName:"p"},"Refine"),"'s ",(0,t.yg)("strong",{parentName:"p"},"Supabase")," auth and data providers."),(0,t.yg)("p",null,"We'll cover these ",(0,t.yg)("strong",{parentName:"p"},"Supabase")," related providers as we add features to our app in the upcoming episodes. However, let's try building the app for now, and check what we have in the browser after running the development server. In the terminal, run the following command:"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-bash"},"npm run dev\n")),(0,t.yg)("p",null,"After that, navigate to ",(0,t.yg)("inlineCode",{parentName:"p"},"http://localhost:5173"),", and lo and behold! we have a ",(0,t.yg)("strong",{parentName:"p"},"Refine")," app:"),(0,t.yg)("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2023-02-18-refine-pixels-5/welcome.jpg",alt:"react crud app welcome"}),(0,t.yg)("br",null),(0,t.yg)("h2",{id:"exploring-the-app"},"Exploring the App"),(0,t.yg)("p",null,"Let's now see what ",(0,t.yg)("strong",{parentName:"p"},"Refine")," scaffolded for us during initialization."),(0,t.yg)("p",null,"Our main point of focus is the ",(0,t.yg)("inlineCode",{parentName:"p"},"src")," folder. And for now, especially the ",(0,t.yg)("inlineCode",{parentName:"p"},"<App />")," component."),(0,t.yg)("p",null,"If we look inside the ",(0,t.yg)("inlineCode",{parentName:"p"},"App.tsx")," file, we can see a ",(0,t.yg)("inlineCode",{parentName:"p"},"<Refine />")," component crowded with passed in ",(0,t.yg)("strong",{parentName:"p"},"props"),":"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/App.tsx"',title:'"src/App.tsx"'},'import { GitHubBanner, Refine, WelcomePage } from "@refinedev/core";\nimport { RefineKbar, RefineKbarProvider } from "@refinedev/kbar";\n\nimport { useNotificationProvider } from "@refinedev/antd";\nimport "@refinedev/antd/dist/reset.css";\n\nimport routerBindings, {\n  DocumentTitleHandler,\n  UnsavedChangesNotifier,\n} from "@refinedev/react-router";\nimport { dataProvider, liveProvider } from "@refinedev/supabase";\nimport { BrowserRouter, Route, Routes } from "react-router-dom";\nimport authProvider from "./authProvider";\nimport { ColorModeContextProvider } from "./contexts/color-mode";\nimport { supabaseClient } from "./utility";\n\nfunction App() {\n  return (\n    <BrowserRouter>\n      <GitHubBanner />\n      <RefineKbarProvider>\n        <ColorModeContextProvider>\n          <Refine\n            dataProvider={dataProvider(supabaseClient)}\n            liveProvider={liveProvider(supabaseClient)}\n            authProvider={authProvider}\n            routerProvider={routerBindings}\n            notificationProvider={useNotificationProvider}\n            options={{\n              syncWithLocation: true,\n              warnWhenUnsavedChanges: true,\n            }}\n          >\n            <Routes>\n              <Route index element={<WelcomePage />} />\n            </Routes>\n            <RefineKbar />\n            <UnsavedChangesNotifier />\n            <DocumentTitleHandler />\n          </Refine>\n        </ColorModeContextProvider>\n      </RefineKbarProvider>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n')),(0,t.yg)("p",null,"Today, we'll examine a few of these props so that we are ready to move to the next episode."),(0,t.yg)("h3",{id:"the-refine--component"},"The ",(0,t.yg)("inlineCode",{parentName:"h3"},"<Refine />")," Component"),(0,t.yg)("p",null,"The ",(0,t.yg)("a",{parentName:"p",href:"https://refine.dev/docs/api-reference/core/components/refine-config/"},(0,t.yg)("inlineCode",{parentName:"a"},"<Refine />"))," component is the entry point of a ",(0,t.yg)("strong",{parentName:"p"},"Refine")," app. In order to leverage the power of ",(0,t.yg)("strong",{parentName:"p"},"Refine"),"'s abstraction layers, we need to have the ",(0,t.yg)("inlineCode",{parentName:"p"},"<Refine />")," component."),(0,t.yg)("p",null,"Then we have to configure the ",(0,t.yg)("inlineCode",{parentName:"p"},"<Refine />")," component with the provider objects we want to use in our app. We can see that ",(0,t.yg)("inlineCode",{parentName:"p"},"create refine-app")," already added the props for us inside ",(0,t.yg)("inlineCode",{parentName:"p"},"<Refine />")," out-of-the-box."),(0,t.yg)("p",null,"We will be using them in our ",(0,t.yg)("strong",{parentName:"p"},"Pixels")," app. Some provider objects like the ",(0,t.yg)("inlineCode",{parentName:"p"},"routerProvider")," or the ",(0,t.yg)("inlineCode",{parentName:"p"},"dataProvider")," are defined for us by ",(0,t.yg)("strong",{parentName:"p"},"Refine"),"'s core or support modules and some like the ",(0,t.yg)("inlineCode",{parentName:"p"},"accessControlProvider")," have to be defined by ourselves."),(0,t.yg)("admonition",{type:"caution"},(0,t.yg)("p",{parentName:"admonition"},(0,t.yg)("a",{parentName:"p",href:"https://refine.dev/docs/api-reference/core/components/refine-config/"},(0,t.yg)("inlineCode",{parentName:"a"},"<Refine />"))," comes with ",(0,t.yg)("a",{parentName:"p",href:"/docs/ui-integrations/ant-design/theming#theme-customization"},"dark mode support")," out-of-the-box. However, we will not be using it in this series. So, we will be replace the ",(0,t.yg)("inlineCode",{parentName:"p"},"ColorModeContextProvider")," with the ",(0,t.yg)("inlineCode",{parentName:"p"},"ConfigProvider"),"."),(0,t.yg)("p",{parentName:"admonition"},"Also You can remove ",(0,t.yg)("inlineCode",{parentName:"p"},"src/context/color-mode")," that comes with ",(0,t.yg)("inlineCode",{parentName:"p"},"create refine-app"),"."),(0,t.yg)("pre",{parentName:"admonition"},(0,t.yg)("code",{parentName:"pre",className:"language-diff",metastring:'title="src/App.tsx"',title:'"src/App.tsx"'},'// ...\n- import { ColorModeContextProvider } from "./contexts/color-mode";\n+ import { ConfigProvider } from "antd";\n\nfunction App() {\n    return (\n            // ...\n-                <ColorModeContextProvider>\n+                <ConfigProvider>\n                    <Refine\n                    // ...\n                    >\n                        {/* ... */}\n                    </Refine>\n-                </ColorModeContextProvider>\n+                </ConfigProvider>\n         // ...\n    );\n}\n'))),(0,t.yg)("h3",{id:"refine-s-dataprovider-prop"},(0,t.yg)("inlineCode",{parentName:"h3"},"<Refine />"),"'s ",(0,t.yg)("inlineCode",{parentName:"h3"},"dataProvider")," Prop"),(0,t.yg)("p",null,(0,t.yg)("a",{parentName:"p",href:"https://refine.dev/docs/data/data-provider"},(0,t.yg)("strong",{parentName:"a"},"Refine"),"'s ",(0,t.yg)("strong",{parentName:"a"},"data provider"))," is the context which allows the app to communicate with a backend API via a ",(0,t.yg)("inlineCode",{parentName:"p"},"HTTP")," client. It subsequently makes response data returned from HTTP requests available to consumer components via a set of ",(0,t.yg)("strong",{parentName:"p"},"Refine")," data hooks."),(0,t.yg)("p",null,"If we look closely, our ",(0,t.yg)("inlineCode",{parentName:"p"},"dataProvider")," prop derives a value from a call to ",(0,t.yg)("inlineCode",{parentName:"p"},"dataProvider(supabaseClient)"),":"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/App.tsx"',title:'"src/App.tsx"'},'import { Refine } from "@refinedev/core";\nimport { dataProvider } from "@refinedev/supabase";\n\nimport { supabaseClient } from "./utility";\n\nfunction App() {\n  return <Refine dataProvider={dataProvider(supabaseClient)} />;\n}\n')),(0,t.yg)("p",null,"The returned object, also called the ",(0,t.yg)("strong",{parentName:"p"},(0,t.yg)("inlineCode",{parentName:"strong"},"dataProvider"))," object, has the following signature:"),(0,t.yg)("details",null,(0,t.yg)("summary",null,"Show data provider object signature"),(0,t.yg)("p",null,(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-tsx"},'const dataProvider = {\n  create: ({ resource, variables, meta }) => Promise,\n  createMany: ({ resource, variables, meta }) => Promise,\n  deleteOne: ({ resource, id, variables, meta }) => Promise,\n  deleteMany: ({ resource, ids, variables, meta }) => Promise,\n  getList: ({ resource, pagination, hasPagination, sort, filters, meta }) =>\n    Promise,\n  getMany: ({ resource, ids, meta }) => Promise,\n  getOne: ({ resource, id, meta }) => Promise,\n  update: ({ resource, id, variables, meta }) => Promise,\n  updateMany: ({ resource, ids, variables, meta }) => Promise,\n  custom: ({ url, method, sort, filters, payload, query, headers, meta }) =>\n    Promise,\n  getApiUrl: () => "",\n};\n')))),(0,t.yg)("p",null,"Each item in this object is a method that has to be defined by us or ",(0,t.yg)("strong",{parentName:"p"},"Refine"),"'s packages."),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"Refine")," supports ",(0,t.yg)("a",{parentName:"p",href:"https://refine.dev/integrations/"},"15+ backend")," ",(0,t.yg)("inlineCode",{parentName:"p"},"dataProvider")," integrations as optional packages that come with distinct definitions of these methods that handle CRUD operations according to their underlying architectures. The full list can be found ",(0,t.yg)("a",{parentName:"p",href:"https://refine.dev/docs/packages/list-of-packages/#data-provider-packages"},"here"),"."),(0,t.yg)("p",null,"Normally, for our own backend API, we have to define each method we need for sending ",(0,t.yg)("inlineCode",{parentName:"p"},"http")," requests inside a ",(0,t.yg)("inlineCode",{parentName:"p"},"dataProvider")," object as above. But since we are using the ",(0,t.yg)("a",{parentName:"p",href:"https://github.com/refinedev/refine/tree/main/packages/supabase"},(0,t.yg)("inlineCode",{parentName:"a"},"@refinedev/supabase"))," package, ",(0,t.yg)("inlineCode",{parentName:"p"},"dataProvider={dataProvider(supabaseClient)}")," makes the following object available to us:"),(0,t.yg)("details",null,(0,t.yg)("summary",null,"Show Refine supabase data provider source code"),(0,t.yg)("p",null,(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="@refinedev/supabase/src/index.ts"',title:'"@refinedev/supabase/src/index.ts"'},'import { DataProvider } from "@refinedev/core";\nimport { SupabaseClient } from "@supabase/supabase-js";\nimport { generateFilter, handleError } from "../utils";\n\nexport const dataProvider = (\n  supabaseClient: SupabaseClient,\n): Required<DataProvider> => {\n  return {\n    getList: async ({ resource, pagination, filters, sorters, meta }) => {\n      const { current = 1, pageSize = 10, mode = "server" } = pagination ?? {};\n\n      const query = supabaseClient.from(resource).select(meta?.select ?? "*", {\n        count: "exact",\n      });\n\n      if (mode === "server") {\n        query.range((current - 1) * pageSize, current * pageSize - 1);\n      }\n\n      sorters?.map((item) => {\n        const [foreignTable, field] = item.field.split(/\\.(.*)/);\n\n        if (foreignTable && field) {\n          query\n            .select(meta?.select ?? `*, ${foreignTable}(${field})`)\n            .order(field, {\n              ascending: item.order === "asc",\n              foreignTable: foreignTable,\n            });\n        } else {\n          query.order(item.field, {\n            ascending: item.order === "asc",\n          });\n        }\n      });\n\n      filters?.map((item) => {\n        generateFilter(item, query);\n      });\n\n      const { data, count, error } = await query;\n\n      if (error) {\n        return handleError(error);\n      }\n\n      return {\n        data: data || [],\n        total: count || 0,\n      } as any;\n    },\n\n    getMany: async ({ resource, ids, meta }) => {\n      const query = supabaseClient.from(resource).select(meta?.select ?? "*");\n\n      if (meta?.idColumnName) {\n        query.in(meta.idColumnName, ids);\n      } else {\n        query.in("id", ids);\n      }\n\n      const { data, error } = await query;\n\n      if (error) {\n        return handleError(error);\n      }\n\n      return {\n        data: data || [],\n      } as any;\n    },\n\n    create: async ({ resource, variables, meta }) => {\n      const query = supabaseClient.from(resource).insert(variables);\n\n      if (meta?.select) {\n        query.select(meta.select);\n      }\n\n      const { data, error } = await query;\n\n      if (error) {\n        return handleError(error);\n      }\n\n      return {\n        data: (data || [])[0] as any,\n      };\n    },\n\n    createMany: async ({ resource, variables, meta }) => {\n      const query = supabaseClient.from(resource).insert(variables);\n\n      if (meta?.select) {\n        query.select(meta.select);\n      }\n\n      const { data, error } = await query;\n\n      if (error) {\n        return handleError(error);\n      }\n\n      return {\n        data: data as any,\n      };\n    },\n\n    update: async ({ resource, id, variables, meta }) => {\n      const query = supabaseClient.from(resource).update(variables);\n\n      if (meta?.idColumnName) {\n        query.eq(meta.idColumnName, id);\n      } else {\n        query.match({ id });\n      }\n\n      if (meta?.select) {\n        query.select(meta.select);\n      }\n\n      const { data, error } = await query;\n      if (error) {\n        return handleError(error);\n      }\n\n      return {\n        data: (data || [])[0] as any,\n      };\n    },\n\n    updateMany: async ({ resource, ids, variables, meta }) => {\n      const response = await Promise.all(\n        ids.map(async (id) => {\n          const query = supabaseClient.from(resource).update(variables);\n\n          if (meta?.idColumnName) {\n            query.eq(meta.idColumnName, id);\n          } else {\n            query.match({ id });\n          }\n\n          if (meta?.select) {\n            query.select(meta.select);\n          }\n\n          const { data, error } = await query;\n          if (error) {\n            return handleError(error);\n          }\n\n          return (data || [])[0] as any;\n        }),\n      );\n\n      return {\n        data: response,\n      };\n    },\n\n    getOne: async ({ resource, id, meta }) => {\n      const query = supabaseClient.from(resource).select(meta?.select ?? "*");\n\n      if (meta?.idColumnName) {\n        query.eq(meta.idColumnName, id);\n      } else {\n        query.match({ id });\n      }\n\n      const { data, error } = await query;\n      if (error) {\n        return handleError(error);\n      }\n\n      return {\n        data: (data || [])[0] as any,\n      };\n    },\n\n    deleteOne: async ({ resource, id, meta }) => {\n      const query = supabaseClient.from(resource).delete();\n\n      if (meta?.idColumnName) {\n        query.eq(meta.idColumnName, id);\n      } else {\n        query.match({ id });\n      }\n\n      const { data, error } = await query;\n      if (error) {\n        return handleError(error);\n      }\n\n      return {\n        data: (data || [])[0] as any,\n      };\n    },\n\n    deleteMany: async ({ resource, ids, meta }) => {\n      const response = await Promise.all(\n        ids.map(async (id) => {\n          const query = supabaseClient.from(resource).delete();\n\n          if (meta?.idColumnName) {\n            query.eq(meta.idColumnName, id);\n          } else {\n            query.match({ id });\n          }\n\n          const { data, error } = await query;\n          if (error) {\n            return handleError(error);\n          }\n\n          return (data || [])[0] as any;\n        }),\n      );\n\n      return {\n        data: response,\n      };\n    },\n\n    getApiUrl: () => {\n      throw Error("Not implemented on refine-supabase data provider.");\n    },\n\n    custom: () => {\n      throw Error("Not implemented on refine-supabase data provider.");\n    },\n  };\n};\n')))),(0,t.yg)("p",null,"We don't have to get into the mind of the people at ",(0,t.yg)("strong",{parentName:"p"},"Refine")," yet, but if we skim over closely, the ",(0,t.yg)("inlineCode",{parentName:"p"},"dataProvider")," object above has pretty much every method we need to perform all CRUD operations against a ",(0,t.yg)("strong",{parentName:"p"},"Supabase")," database. Notable methods we are going to use in our app are: ",(0,t.yg)("inlineCode",{parentName:"p"},"create()"),", ",(0,t.yg)("inlineCode",{parentName:"p"},"getOne()"),", ",(0,t.yg)("inlineCode",{parentName:"p"},"getList()")," and ",(0,t.yg)("inlineCode",{parentName:"p"},"update()"),"."),(0,t.yg)("p",null,"For the details of how these methods work, please take your time to scan through the ",(0,t.yg)("a",{parentName:"p",href:"https://refine.dev/docs/api-reference/core/providers/data-provider/"},(0,t.yg)("inlineCode",{parentName:"a"},"dataProvider")," API reference"),"."),(0,t.yg)("p",null,"In order to get the ",(0,t.yg)("strong",{parentName:"p"},"Supabase")," ",(0,t.yg)("inlineCode",{parentName:"p"},"dataProvider")," object to deliver, first a ",(0,t.yg)("inlineCode",{parentName:"p"},"supabaseClient")," has to be set up."),(0,t.yg)("h3",{id:"refines-supabaseclient"},(0,t.yg)("strong",{parentName:"h3"},"Refine"),"'s ",(0,t.yg)("inlineCode",{parentName:"h3"},"supabaseClient")),(0,t.yg)("p",null,"If we look inside ",(0,t.yg)("inlineCode",{parentName:"p"},"src/utility/"),", we have a ",(0,t.yg)("inlineCode",{parentName:"p"},"supabaseClient.ts")," file containing the credentials of a client that provides us access to a ",(0,t.yg)("strong",{parentName:"p"},"Supabase")," backend:"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/utility/supabaseClient.ts"',title:'"src/utility/supabaseClient.ts"'},'import { createClient } from "@refinedev/supabase";\n\nconst SUPABASE_URL = "https://ifbdnkfqbypnkmwcfdes.supabase.co";\nconst SUPABASE_KEY =\n  "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlmYmRua2ZxYnlwbmttd2NmZGVzIiwicm9sZSI6ImFub24iLCJpYXQiOjE2NzA5MTgzOTEsImV4cCI6MTk4NjQ5NDM5MX0.ThQ40H-xay-Hi5cf7H9mKccMCvAX3iCvYVJDe0KiHtw";\n\nexport const supabaseClient = createClient(SUPABASE_URL, SUPABASE_KEY, {\n  db: {\n    schema: "public",\n  },\n  auth: {\n    persistSession: true,\n  },\n});\n')),(0,t.yg)("p",null,"This file was also generated for us by ",(0,t.yg)("inlineCode",{parentName:"p"},"create refine-app")," using ",(0,t.yg)("strong",{parentName:"p"},"Refine"),"'s ",(0,t.yg)("strong",{parentName:"p"},"Supabase")," package."),(0,t.yg)("p",null,"Inside ",(0,t.yg)("inlineCode",{parentName:"p"},"<Refine />")," component, we are getting the value of the ",(0,t.yg)("inlineCode",{parentName:"p"},"dataProvider")," prop by passing in ",(0,t.yg)("inlineCode",{parentName:"p"},"supabaseClient")," to the ",(0,t.yg)("inlineCode",{parentName:"p"},"dataProvider()")," function imported from this package:"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="App.tsx"',title:'"App.tsx"'},'import { Refine } from "@refinedev/core";\nimport { dataProvider } from "@refinedev/supabase";\n\nimport { supabaseClient } from "./utility";\n\nfunction App() {\n  return <Refine dataProvider={dataProvider(supabaseClient)} />;\n}\n')),(0,t.yg)("p",null,"We need to tweak the ",(0,t.yg)("inlineCode",{parentName:"p"},"supabaseClient.ts")," file with our own credentials, which we will do when we add ",(0,t.yg)("inlineCode",{parentName:"p"},"resources")," to our app."),(0,t.yg)("p",null,"If we inspect further, setting up ",(0,t.yg)("strong",{parentName:"p"},"Supabase")," with ",(0,t.yg)("strong",{parentName:"p"},"Refine")," helps us enable not only the ",(0,t.yg)("inlineCode",{parentName:"p"},"dataProvider")," prop, but also the ",(0,t.yg)("inlineCode",{parentName:"p"},"authProvider")," and ",(0,t.yg)("inlineCode",{parentName:"p"},"liveProvider")," props inside ",(0,t.yg)("inlineCode",{parentName:"p"},"<Refine />"),". This is because they all depend on ",(0,t.yg)("inlineCode",{parentName:"p"},"supabaseClient")," to send ",(0,t.yg)("inlineCode",{parentName:"p"},"http")," requests. We'll explore the ",(0,t.yg)("inlineCode",{parentName:"p"},"liveProvider")," prop on Day 4, but let's also look at the ",(0,t.yg)("inlineCode",{parentName:"p"},"authProvider")," here to enhance our understanding."),(0,t.yg)("h3",{id:"refine-s-authprovider-prop"},(0,t.yg)("inlineCode",{parentName:"h3"},"<Refine />"),"'s ",(0,t.yg)("inlineCode",{parentName:"h3"},"authProvider")," Prop"),(0,t.yg)("p",null,"We can clearly see in our ",(0,t.yg)("inlineCode",{parentName:"p"},"<Refine />")," component that ",(0,t.yg)("inlineCode",{parentName:"p"},"create refine-app")," already enabled the ",(0,t.yg)("inlineCode",{parentName:"p"},"authProvider")," prop by passing in the corresponding object for us:"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="App.tsx"',title:'"App.tsx"'},"authProvider = { authProvider };\n")),(0,t.yg)("p",null,"Earlier on, the ",(0,t.yg)("inlineCode",{parentName:"p"},"authProvider")," object was already created by ",(0,t.yg)("inlineCode",{parentName:"p"},"create refine-app")," inside the ",(0,t.yg)("inlineCode",{parentName:"p"},"authProvider.ts")," file:"),(0,t.yg)("details",null,(0,t.yg)("summary",null,"Show Refine supabase auth provider source code"),(0,t.yg)("p",null,(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/authProvider.ts"',title:'"src/authProvider.ts"'},'import { AuthProvider } from "@refinedev/core";\n\nimport { supabaseClient } from "../utility";\n\nexport const authProvider: AuthProvider = {\n  login: async ({ email, password, providerName }) => {\n    try {\n      // sign in with oauth\n      if (providerName) {\n        const { data, error } = await supabaseClient.auth.signInWithOAuth({\n          provider: providerName,\n        });\n\n        if (error) {\n          return {\n            success: false,\n            error,\n          };\n        }\n\n        if (data?.url) {\n          return {\n            success: true,\n          };\n        }\n      }\n\n      // sign in with email and password\n      const { data, error } = await supabaseClient.auth.signInWithPassword({\n        email,\n        password,\n      });\n\n      if (error) {\n        return {\n          success: false,\n          error,\n        };\n      }\n\n      if (data?.user) {\n        return {\n          success: true,\n        };\n      }\n    } catch (error: any) {\n      return {\n        success: false,\n        error,\n      };\n    }\n\n    return {\n      success: false,\n      error: {\n        message: "Login failed",\n        name: "Invalid email or password",\n      },\n    };\n  },\n  register: async ({ email, password }) => {\n    try {\n      const { data, error } = await supabaseClient.auth.signUp({\n        email,\n        password,\n      });\n\n      if (error) {\n        return {\n          success: false,\n          error,\n        };\n      }\n\n      if (data) {\n        return {\n          success: true,\n        };\n      }\n    } catch (error: any) {\n      return {\n        success: false,\n        error,\n      };\n    }\n\n    return {\n      success: false,\n      error: {\n        message: "Register failed",\n        name: "Invalid email or password",\n      },\n    };\n  },\n  forgotPassword: async ({ email }) => {\n    try {\n      const { data, error } = await supabaseClient.auth.resetPasswordForEmail(\n        email,\n        {\n          redirectTo: `${window.location.origin}/update-password`,\n        },\n      );\n\n      if (error) {\n        return {\n          success: false,\n          error,\n        };\n      }\n\n      if (data) {\n        return {\n          success: true,\n        };\n      }\n    } catch (error: any) {\n      return {\n        success: false,\n        error,\n      };\n    }\n\n    return {\n      success: false,\n      error: {\n        message: "Forgot password failed",\n        name: "Invalid email",\n      },\n    };\n  },\n  updatePassword: async ({ password }) => {\n    try {\n      const { data, error } = await supabaseClient.auth.updateUser({\n        password,\n      });\n\n      if (error) {\n        return {\n          success: false,\n          error,\n        };\n      }\n\n      if (data) {\n        return {\n          success: true,\n          redirectTo: "/",\n        };\n      }\n    } catch (error: any) {\n      return {\n        success: false,\n        error,\n      };\n    }\n\n    return {\n      success: false,\n      error: {\n        message: "Update password failed",\n        name: "Invalid password",\n      },\n    };\n  },\n  logout: async () => {\n    const { error } = await supabaseClient.auth.signOut();\n\n    if (error) {\n      return {\n        success: false,\n        error,\n      };\n    }\n\n    return {\n      success: true,\n      redirectTo: "/",\n    };\n  },\n  onError: async (_error: any) => ({}),\n  check: async () => {\n    try {\n      const { data } = await supabaseClient.auth.getSession();\n      const { session } = data;\n\n      if (!session) {\n        return {\n          authenticated: false,\n          error: {\n            message: "Check failed",\n            name: "Session not found",\n          },\n          logout: true,\n        };\n      }\n    } catch (error: any) {\n      return {\n        authenticated: false,\n        error: error,\n        logout: true,\n      };\n    }\n\n    return {\n      authenticated: true,\n    };\n  },\n  getPermissions: async () => {\n    try {\n      const user = await supabaseClient.auth.getUser();\n\n      if (user) {\n        return user.data.user?.role;\n      }\n    } catch (error) {\n      console.error(error);\n      return;\n    }\n  },\n  getIdentity: async () => {\n    try {\n      const { data } = await supabaseClient.auth.getUser();\n\n      if (data?.user) {\n        return {\n          ...data.user,\n          name: data.user.email,\n        };\n      }\n\n      return null;\n    } catch (error: any) {\n      console.error(error);\n\n      return null;\n    }\n  },\n};\n')))),(0,t.yg)("p",null,"This object has all the methods we need to implement an email / password based authentication and authorization system in our app."),(0,t.yg)("p",null,"Notice, as mentioned before, that ",(0,t.yg)("inlineCode",{parentName:"p"},"authProvider")," relies on ",(0,t.yg)("inlineCode",{parentName:"p"},"supabaseClient")," to connect to our ",(0,t.yg)("strong",{parentName:"p"},"Supabase")," database. So, in this case, our ",(0,t.yg)("inlineCode",{parentName:"p"},"authProvider")," was generated as part of the ",(0,t.yg)("strong",{parentName:"p"},"Supabase")," package."),(0,t.yg)("p",null,"As we can infer by now, although we have stated that ",(0,t.yg)("strong",{parentName:"p"},"Refine")," performs and manages a lot of heavylifting and simplifies the app logic by dividing concerns into separate contexts, providers and hooks, ",(0,t.yg)("em",{parentName:"p"},"configuring")," all these providers is a heavy task itself."),(0,t.yg)("p",null,"It, fortunately, makes configuration easier by composing individual providers inside a single object."),(0,t.yg)("p",null,"These are pretty much the essentials we should get familiar with in order to accept the invitation to add ",(0,t.yg)("inlineCode",{parentName:"p"},"resources")," to the ",(0,t.yg)("inlineCode",{parentName:"p"},"<Refine />")," component."),(0,t.yg)("h2",{id:"summary"},"Summary"),(0,t.yg)("p",null,"In this post, we went through the process of initializing our ",(0,t.yg)("strong",{parentName:"p"},"Pixels")," app with a ",(0,t.yg)("strong",{parentName:"p"},"Supabase")," hosted PostgreSQL database and ",(0,t.yg)("strong",{parentName:"p"},"Ant Design")," UI framework."),(0,t.yg)("p",null,"We then explored the boilerplate code created by ",(0,t.yg)("inlineCode",{parentName:"p"},"create refine-app")," using ",(0,t.yg)("strong",{parentName:"p"},"Refine"),"'s ",(0,t.yg)("strong",{parentName:"p"},"Supabase")," support package, especially the files related to ",(0,t.yg)("inlineCode",{parentName:"p"},"dataProvider")," and ",(0,t.yg)("inlineCode",{parentName:"p"},"authProvider")," props of the ",(0,t.yg)("inlineCode",{parentName:"p"},"<Refine />")," component. We touched on setting ",(0,t.yg)("inlineCode",{parentName:"p"},"supabaseClient")," which is used by these providers to send HTTP requests to the ",(0,t.yg)("strong",{parentName:"p"},"Supabase")," backend."),(0,t.yg)("p",null,"In the ",(0,t.yg)("a",{parentName:"p",href:"https://refine.dev/blog/refine-pixels-3/"},"next article"),", we will use these providers to implement RESTful CRUD actions for creating a canvas, showing a canvas, drawing pixels on it and showing a public gallery that lists canvases. We will also add authentication to our app."),(0,t.yg)("p",null,(0,t.yg)("a",{parentName:"p",href:"https://refine.dev/blog/refine-pixels-3/"},'Click here to read "Adding CRUD Actions and Authentication" article. ',"\u2192")))}m.isMDXComponent=!0}}]);