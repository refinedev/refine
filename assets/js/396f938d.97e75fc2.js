"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[41919],{58860:(e,n,t)=>{t.d(n,{xA:()=>d,yg:()=>u});var a=t(37953);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=a.createContext({}),p=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},d=function(e){var n=p(e.components);return a.createElement(s.Provider,{value:n},e.children)},m="mdxType",c={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},g=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),m=p(t),g=r,u=m["".concat(s,".").concat(g)]||m[g]||c[g]||o;return t?a.createElement(u,i(i({ref:n},d),{},{components:t})):a.createElement(u,i({ref:n},d))}));function u(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=t.length,i=new Array(o);i[0]=g;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l[m]="string"==typeof e?e:r,i[1]=l;for(var p=2;p<o;p++)i[p]=t[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}g.displayName="MDXCreateElement"},97953:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>y,frontMatter:()=>l,metadata:()=>p,toc:()=>m});t(37953);var a=t(58860);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){return n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})),e}function i(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}const l={title:"Dynamic Forms with React Hook Form",description:"How to build dynamic forms with React hook form in React CRUD apps.",slug:"dynamic-forms-in-react-hook-form",authors:"david_omotayo",tags:["react","refine","material-ui","react-hook-form","tutorial"],image:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2022-12-23-dynamic-hook-form/social.png",hide_table_of_contents:!1},s=void 0,p={permalink:"/blog/dynamic-forms-in-react-hook-form",source:"@site/blog/2022-12-23-dynamic-hook-form.md",title:"Dynamic Forms with React Hook Form",description:"How to build dynamic forms with React hook form in React CRUD apps.",date:"2022-12-23T00:00:00.000Z",formattedDate:"December 23, 2022",tags:[{label:"react",permalink:"/blog/tags/react"},{label:"refine",permalink:"/blog/tags/refine"},{label:"material-ui",permalink:"/blog/tags/material-ui"},{label:"react-hook-form",permalink:"/blog/tags/react-hook-form"},{label:"tutorial",permalink:"/blog/tags/tutorial"}],readingTime:21.955,hasTruncateMarker:!1,authors:[{name:"David Omotayo",title:"Frontend developer",url:"https://github.com/david4473",imageURL:"https://github.com/david4473.png",key:"david_omotayo"}],frontMatter:{title:"Dynamic Forms with React Hook Form",description:"How to build dynamic forms with React hook form in React CRUD apps.",slug:"dynamic-forms-in-react-hook-form",authors:"david_omotayo",tags:["react","refine","material-ui","react-hook-form","tutorial"],image:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2022-12-23-dynamic-hook-form/social.png",hide_table_of_contents:!1},prevItem:{title:"How to Use Docker Copy Command",permalink:"/blog/docker-copy"},nextItem:{title:"Svelte vs React Comparison",permalink:"/blog/svelte-vs-react"},relatedPosts:[{title:"refine vs React-Admin Which is Better for Your Project?",description:"We will compare the features of Refine and react-admin",permalink:"/blog/refine-vs-react-admin",formattedDate:"November 26, 2021",authors:[{name:"Melih Ekinci",title:"Frontend Developer",url:"https://github.com/mlhekinci",imageURL:"https://github.com/mlhekinci.png",key:"melih"}],readingTime:14.425,date:"2021-11-26T00:00:00.000Z"},{title:"How to use Material UI Checkbox",description:"We'll discover the Material UI Checkbox component with examples",permalink:"/blog/material-ui-checkbox-component",formattedDate:"December 25, 2024",authors:[{name:"Doro Onome",title:"Software Developer",url:"https://github.com/Nomzy-kush",imageURL:"https://github.com/Nomzy-kush.png",key:"doro_onome"}],readingTime:11.23,date:"2024-12-25T00:00:00.000Z"},{title:"Implementing Role Based Access Control",description:"We'll implement Role Based Access Control (RBAC)",permalink:"/blog/refine-pixels-6",formattedDate:"February 19, 2023",authors:[{name:"Abdullah Numan",title:"Fullstack Developer",url:"https://github.com/anewman15/",imageURL:"https://github.com/anewman15.png",key:"abdullah_numan"}],readingTime:12.205,date:"2023-02-19T00:00:00.000Z"}],authorPosts:[{title:"Build a Progressive Web App (PWA) with Next.js",description:"We will walk you through the entire process of building a PWA using Next.JS and Refine framework, from start to finish!",permalink:"/blog/next-js-pwa",formattedDate:"June 25, 2024",authors:[{name:"David Omotayo",title:"Frontend developer",url:"https://github.com/david4473",imageURL:"https://github.com/david4473.png",key:"david_omotayo"}],readingTime:23.09,date:"2024-06-25T00:00:00.000Z"},{title:"Best React Admin Dashboard Libraries 2023",description:"We have curated a compilation of the 5 best React admin dashboard libraries that encompass all the essential features needed to create modern and feature-rich dashboards with minimal effort.",permalink:"/blog/react-admin-dashboard",formattedDate:"July 23, 2024",authors:[{name:"David Omotayo",title:"Frontend developer",url:"https://github.com/david4473",imageURL:"https://github.com/david4473.png",key:"david_omotayo"}],readingTime:7.945,date:"2024-07-23T00:00:00.000Z"},{title:"React Hook Form Validation with Complete Examples",description:"We'll implement React Hook Form custom validations and schema validations using yup.",permalink:"/blog/react-hook-form-validation-examples",formattedDate:"September 27, 2022",authors:[{name:"David Omotayo",title:"Frontend developer",url:"https://github.com/david4473",imageURL:"https://github.com/david4473.png",key:"david_omotayo"}],readingTime:19.94,date:"2022-09-27T00:00:00.000Z"}]},d={authorsImageUrls:[void 0]},m=[{value:"Introduction",id:"introduction",level:2},{value:"Prerequisite",id:"prerequisite",level:2},{value:"What is Refine",id:"what-is-refine",level:2},{value:"What is React hook form",id:"what-is-react-hook-form",level:2},{value:"Refine project setup",id:"refine-project-setup",level:2},{value:"Creating the List, Create, and Edit pages",id:"creating-the-list-create-and-edit-pages",level:2},{value:"Listing Records",id:"listing-records",level:2},{value:"Creating a form",id:"creating-a-form",level:2},{value:"Using the controller component",id:"using-the-controller-component",level:2},{value:"Using the usefieldsArray hook.",id:"using-the-usefieldsarray-hook",level:2},{value:"Using useFieldArray actions.",id:"using-usefieldarray-actions",level:2},{value:"Handling submission",id:"handling-submission",level:2},{value:"Removing fields",id:"removing-fields",level:2},{value:"Validation",id:"validation",level:2},{value:"Creating the Edit page",id:"creating-the-edit-page",level:2},{value:"Conclusion",id:"conclusion",level:2},{value:"Live CodeSandbox Example",id:"live-codesandbox-example",level:2}],c=(g="CodeSandboxExample",function(e){return console.warn("Component "+g+" was not imported, exported, or provided by MDXProvider as global scope"),(0,a.yg)("div",e)});var g;const u={toc:m},h="wrapper";function y(e){var{components:n}=e,t=i(e,["components"]);return(0,a.yg)(h,o(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},a=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),a.forEach((function(n){r(e,n,t[n])}))}return e}({},u,t),{components:n,mdxType:"MDXLayout"}),(0,a.yg)("admonition",{type:"caution"},(0,a.yg)("p",{parentName:"admonition"},"This post was created using version 3.x.x of ",(0,a.yg)("strong",{parentName:"p"},"Refine"),". Although we plan to update it with the latest version of ",(0,a.yg)("strong",{parentName:"p"},"Refine")," as soon as possible, you can still benefit from the post in the meantime."),(0,a.yg)("p",{parentName:"admonition"},"You should know that ",(0,a.yg)("strong",{parentName:"p"},"Refine")," version 4.x.x is backward compatible with version 3.x.x, so there is no need to worry. If you want to see the differences between the two versions, check out the ",(0,a.yg)("a",{parentName:"p",href:"https://refine.dev/docs/migration-guide/"},"migration guide"),"."),(0,a.yg)("p",{parentName:"admonition"},"Just be aware that the source code example in this post have been updated to version 4.x.x.")),(0,a.yg)("h2",{id:"introduction"},"Introduction"),(0,a.yg)("p",null,"Forms are an essential part of web development; they serve as an avenue for proprietors to form formal relationships with their users. However, due to the complexity of some forms, they can come off as intrusive and affects user experience."),(0,a.yg)("p",null,"Dynamic forms are forms with metadata templates that describe their field\u2019s object model, which can be used to generate new fields automatically. With dynamic forms, proprietors can solve the user experience issue referenced earlier by allowing users to append and remove fields according to their needs."),(0,a.yg)("p",null,"In this article, we\u2019ll look at how to use React hook form and Refine to build a dynamic form in React."),(0,a.yg)("h2",{id:"prerequisite"},"Prerequisite"),(0,a.yg)("p",null,"To follow along with this tutorial, you need to have a fundamental knowledge of Typescript and the following:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Node.js installed on your machine"),(0,a.yg)("li",{parentName:"ul"},"Basic understanding of React hook form"),(0,a.yg)("li",{parentName:"ul"},"Basic knowledge of Material UI and Refine project structure.")),(0,a.yg)("h2",{id:"what-is-refine"},"What is Refine"),(0,a.yg)("p",null,"Refine is an open-source UI framework for building enterprise applications such as dashboards, admin panels, and internal tools."),(0,a.yg)("p",null,"Refine is a headless framework, meaning it doesn't ship with any pre-styled components or UI by default. It integrates well with any custom designs or UI libraries, such as Ant design, Mantine, and Material design, giving you complete control over the composition of your application UI."),(0,a.yg)("p",null,"Here are some of the benefits of using Refine:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"No constraints on styling"),(0,a.yg)("li",{parentName:"ul"},"Backend agnostic: refine supports any custom Rest or Graphql API out of the box"),(0,a.yg)("li",{parentName:"ul"},"Open source: refine has a strong community of maintainers and contributors."),(0,a.yg)("li",{parentName:"ul"},"Workflow independence: refine prevents vendors lock-in, thus giving you and your team complete control over your project.")),(0,a.yg)("p",null,"Refer to the ",(0,a.yg)("a",{parentName:"p",href:"https://refine.dev/docs/"},"documentation")," to learn more about refine."),(0,a.yg)("h2",{id:"what-is-react-hook-form"},"What is React hook form"),(0,a.yg)("p",null,"React hook form is a lightweight package for handling form validations in React. It provides an easy-to-use API that lets us implement functionalities such as error handling and submission with minimal code."),(0,a.yg)("p",null,"React hook form adopts the approach of isolating re-renders in components by using uncontrolled inputs with React's ",(0,a.yg)("inlineCode",{parentName:"p"},"ref")," hook, instead of the conventional way of depending on states to control inputs."),(0,a.yg)("h2",{id:"refine-project-setup"},"Refine project setup"),(0,a.yg)("p",null,"There are two possible ways to set up a Refine project: manually or using superplate. Superplate is a CLI tool for bootstrapping a Typescript React project with Refine integrated out of the box. The tool offers the option to set up a headless Refine project or a project with third-party UI libraries such as Ant design and Material UI."),(0,a.yg)("p",null,"We'll use ",(0,a.yg)("inlineCode",{parentName:"p"},"create refine-app")," to set up a Refine project with Material UI. It\u2019ll save us the trouble of setting it up from scratch."),(0,a.yg)("p",null,"As a first step, navigate to a preferred folder on your computer and run the command below to initialize CLI installer:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-shell"},"npm create refine-app@latest dynamic-form-example -- -b v3\n")),(0,a.yg)("p",null,"The installer will prompt you to select your preference for the project. Select the following options to proceed:"),(0,a.yg)("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2022-12-23-dynamic-hook-form/cli.png",alt:"react hook form dynamic forms"}),(0,a.yg)("br",null),(0,a.yg)("p",null,"Next, ",(0,a.yg)("inlineCode",{parentName:"p"},"cd")," into the newly created folder and run the following command to install React hook form extension package for Refine:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-shell"},"cd dynamic-form-example\nnpm i @refinedev/react-hook-form\n")),(0,a.yg)("p",null,"This package will let us access React hook form's perks in refine."),(0,a.yg)("p",null,"Once the installation is done, run the following command to start the development server:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-shell"},"npm run dev\n")),(0,a.yg)("p",null,"If your default browser doesn't automatically open the app after starting the server, open your browser and navigate to ",(0,a.yg)("inlineCode",{parentName:"p"},"localhost:8000")," to view the app."),(0,a.yg)("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2022-12-23-dynamic-hook-form/welcome.png",alt:"react hook form dynamic forms"}),(0,a.yg)("br",null),(0,a.yg)("h2",{id:"creating-the-list-create-and-edit-pages"},"Creating the List, Create, and Edit pages"),(0,a.yg)("p",null,"For this project, we'll build a Refine app with CRUD pages that handle functionalities for listing, creating, and editing records from a fake API endpoint. And as a first step, we'll create these pages and pass them to the ",(0,a.yg)("inlineCode",{parentName:"p"},"list"),", ",(0,a.yg)("inlineCode",{parentName:"p"},"create"),", and ",(0,a.yg)("inlineCode",{parentName:"p"},"edit")," properties on the ",(0,a.yg)("inlineCode",{parentName:"p"},"<Refine>")," component's ",(0,a.yg)("inlineCode",{parentName:"p"},"resources")," prop. We'll also handle dynamic forms using React hook form."),(0,a.yg)("p",null,"To begin with, create a ",(0,a.yg)("inlineCode",{parentName:"p"},"pages")," folder inside the ",(0,a.yg)("inlineCode",{parentName:"p"},"src")," folder and add a ",(0,a.yg)("inlineCode",{parentName:"p"},"userList"),", ",(0,a.yg)("inlineCode",{parentName:"p"},"userCreate"),", and ",(0,a.yg)("inlineCode",{parentName:"p"},"userEdit")," files:"),(0,a.yg)("p",null,"Next, import the ",(0,a.yg)("inlineCode",{parentName:"p"},"Create"),", ",(0,a.yg)("inlineCode",{parentName:"p"},"List "),", and ",(0,a.yg)("inlineCode",{parentName:"p"},"Edit")," components from Refine into their respective files and declare them in the body of the components."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/pages/UserCreate"',title:'"src/pages/UserCreate"'},'import { Create } from "@refinedev/mui";\n\nfunction UserCreate() {\n  return <Create></Create>;\n}\nexport default UserCreate;\n')),(0,a.yg)("p",null,"These components provide a layout to display the List, Create, and Edit pages. They do not contain any logic, but they add action buttons like the ",(0,a.yg)("inlineCode",{parentName:"p"},"Create")," and ",(0,a.yg)("inlineCode",{parentName:"p"},"save")," buttons on the list and create pages."),(0,a.yg)("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2022-12-23-dynamic-hook-form/gif-1-min.gif",alt:"react hook form dynamic forms"}),(0,a.yg)("br",null),(0,a.yg)("p",null,"Now, open the ",(0,a.yg)("inlineCode",{parentName:"p"},"App.jsx")," file, import each file and add them to the ",(0,a.yg)("inlineCode",{parentName:"p"},"resources")," prop like so:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/App.tsx"',title:'"src/App.tsx"'},'import React from "react";\nimport { Refine } from "@refinedev/core";\nimport {\n  useNotificationProvider,\n  RefineSnackbarProvider,\n  CssBaseline,\n  GlobalStyles,\n  Layout,\n  ThemeProvider,\n  LightTheme,\n  ReadyPage,\n  ErrorComponent,\n} from "@refinedev/mui";\n\nimport UserCreate from "pages/userCreate";\nimport UserEdit from "pages/userEdit";\nimport UserList from "pages/userList";\n\nimport routerProvider from "@refinedev/react-router-v6";\nimport dataProvider from "@refinedev/simple-rest";\n\nfunction App() {\n  return (\n    <ThemeProvider theme={LightTheme}>\n      <CssBaseline />\n      <GlobalStyles styles={{ html: { WebkitFontSmoothing: "auto" } }} />\n      <RefineSnackbarProvider>\n        <Refine\n          notificationProvider={useNotificationProvider}\n          Layout={Layout}\n          ReadyPage={ReadyPage}\n          catchAll={<ErrorComponent />}\n          routerProvider={routerProvider}\n          dataProvider={dataProvider("https://api.fake-rest.refine.dev")}\n          resources={[\n            {\n              name: "users",\n              list: UserList,\n              create: UserCreate,\n              edit: UserEdit,\n            },\n          ]}\n        />\n      </RefineSnackbarProvider>\n    </ThemeProvider>\n  );\n}<>\n\nexport default App;\n')),(0,a.yg)("p",null,"Notice the link being passed to the ",(0,a.yg)("inlineCode",{parentName:"p"},"<Refine>"),"'s ",(0,a.yg)("inlineCode",{parentName:"p"},"dataProvider")," prop. This is the mock API endpoint we'll be fetching and posting data using our form."),(0,a.yg)("p",null,"Refer to the documentation to learn more about the ",(0,a.yg)("a",{parentName:"p",href:"https://refine.dev/docs/api-reference/core/components/refine-config/#resources"},(0,a.yg)("inlineCode",{parentName:"a"},"resources"))," and ",(0,a.yg)("a",{parentName:"p",href:"https://refine.dev/docs/api-reference/core/components/refine-config/#dataprovider"},(0,a.yg)("inlineCode",{parentName:"a"},"dataProvider"))," properties."),(0,a.yg)("h2",{id:"listing-records"},"Listing Records"),(0,a.yg)("p",null,"With the setup out of the way, we can populate the List page with data from the API using MUI X\u2019s ",(0,a.yg)("inlineCode",{parentName:"p"},"<DataGrid>")," component before we delve into the form creation process."),(0,a.yg)("p",null,(0,a.yg)("inlineCode",{parentName:"p"},"<DataGrid>")," is a component for rendering tabular data in React. The component comes with several features out of the box, with the prominent ones being automatic pagination, sorting, and filtering."),(0,a.yg)("p",null,"The ",(0,a.yg)("inlineCode",{parentName:"p"},"<DataGrid>")," component accepts two major props:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"row"),": this prop accepts an array of objects to be rendered within the table rows."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"column"),": this prop also accepts an array of objects, but for mapping and formatting fields shown on the table.")),(0,a.yg)("p",null,"We\u2019ll look at how to use these props later in this section. For now, return to the ",(0,a.yg)("inlineCode",{parentName:"p"},"UserList")," file and import the ",(0,a.yg)("inlineCode",{parentName:"p"},"<DataGrid>")," component and the following components:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/pages/UserList.tsx"',title:'"src/pages/UserList.tsx"'},'import React from "react";\nimport { useDataGrid, DataGrid, List } from "@refinedev/mui";\n')),(0,a.yg)("p",null,(0,a.yg)("inlineCode",{parentName:"p"},"useDataGrid")," is a Refine hook that fetches data from the API and wraps them with various helper hooks required for Material UI components, such as the MUI X ",(0,a.yg)("inlineCode",{parentName:"p"},"<DataGrid>")," component to render data."),(0,a.yg)("p",null,"Next, add the following code before the return statement inside the ",(0,a.yg)("inlineCode",{parentName:"p"},"UserList")," function:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/pages/UserList.tsx"',title:'"src/pages/UserList.tsx"'},'const { dataGridProps } = useDataGrid<IPost>();\n\nconst columns = React.useMemo<GridColumns<IPost>>(\n  () => [\n    { field: "firstName", headerName: "First Name", flex: 1, minWidth: 250 },\n    {\n      field: "email",\n      headerName: "Email",\n      minWidth: 220,\n      flex: 1,\n    },\n    {\n      field: "skills",\n      headerName: "Skills",\n      minWidth: 220,\n      flex: 1,\n    },\n  ],\n  [],\n);\n')),(0,a.yg)("p",null,"Here, we destructured the ",(0,a.yg)("inlineCode",{parentName:"p"},"dataGridProps")," property from the ",(0,a.yg)("inlineCode",{parentName:"p"},"useDataGrid")," hook and created a ",(0,a.yg)("inlineCode",{parentName:"p"},"columns")," array of objects."),(0,a.yg)("p",null,"Using the columns array, the ",(0,a.yg)("inlineCode",{parentName:"p"},"<DataGrid>")," component will create a header for every object in the array. The ",(0,a.yg)("inlineCode",{parentName:"p"},"field")," property maps each header to a matching key from the API response, while the ",(0,a.yg)("inlineCode",{parentName:"p"},"headerName")," property sets the header's name on the table."),(0,a.yg)("p",null,"Finally, declare the ",(0,a.yg)("inlineCode",{parentName:"p"},"<DataGrid>")," component within the ",(0,a.yg)("inlineCode",{parentName:"p"},"List")," component and add the following props:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/pages/UserList.tsx"',title:'"src/pages/UserList.tsx"'},"...\n\nreturn (\n<List>\n<DataGrid {...dataGridProps} columns={columns} autoHeight />\n</List>\n);\n")),(0,a.yg)("p",null,"Notice that we only pass the columns prop to the ",(0,a.yg)("inlineCode",{parentName:"p"},"<DataGrid>")," component. This is because the ",(0,a.yg)("inlineCode",{parentName:"p"},"dataGridProps")," property automatically injects the ",(0,a.yg)("inlineCode",{parentName:"p"},"rows")," prop and its values into the component."),(0,a.yg)("p",null,"Now save your progress and return to the browser; you should see a rendered table with the response data from our API."),(0,a.yg)("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2022-12-23-dynamic-hook-form/gif-2.png",alt:"react hook form dynamic forms"}),(0,a.yg)("br",null),(0,a.yg)("p",null,"Next, we\u2019ll compose the dynamic form for creating and posting records to the mock API endpoint."),(0,a.yg)("h2",{id:"creating-a-form"},"Creating a form"),(0,a.yg)("p",null,"As a first step, navigate to the ",(0,a.yg)("inlineCode",{parentName:"p"},"UserCreate")," file and import the following components from Refine and React hook form:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/pages/UserCreate.tsx"',title:'"src/pages/UserCreate.tsx"'},'import { Create, Box, TextField, Button } from "@refinedev/mui";\nimport { useForm, Controller, useFieldArray } from "@refinedev/react-hook-form";\n')),(0,a.yg)("p",null,"Next, destructure the ",(0,a.yg)("inlineCode",{parentName:"p"},"saveButtonProps")," variable from the ",(0,a.yg)("inlineCode",{parentName:"p"},"useForm")," hook and add it to the Create component:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/pages/UserCreate.tsx"',title:'"src/pages/UserCreate.tsx"'},"const { saveButtonProps } = useForm();\n\nfunction UserCreate() {\n  return <Create saveButtonProps={saveButtonProps}></Create>;\n}\nexport default UserCreate;\n")),(0,a.yg)("p",null,"This will make the ",(0,a.yg)("inlineCode",{parentName:"p"},"save")," button on the Create page functional. When clicked, it'll handle the post request for the record inputted on the form."),(0,a.yg)("p",null,"This is the beauty of using Refine; we don't have to concoct complex logic for tasks such as this. Refine does all the heavy lifting."),(0,a.yg)("p",null,"Moving on, create a barebone form composition using Material UI's ",(0,a.yg)("inlineCode",{parentName:"p"},"Box")," and ",(0,a.yg)("inlineCode",{parentName:"p"},"TextField")," components inside the ",(0,a.yg)("inlineCode",{parentName:"p"},"Create")," component tags like so:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/pages/UserCreate.tsx"',title:'"src/pages/UserCreate.tsx"'},"<Box>\n  <>\n    <TextField />\n    <TextField />\n  </>\n</Box>\n")),(0,a.yg)("p",null,"If you go to the browser after saving your progress and route to the ",(0,a.yg)("inlineCode",{parentName:"p"},"create")," page, you should see a simple form similar to what's shown in the image below rendered on the page."),(0,a.yg)("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2022-12-23-dynamic-hook-form/gif-3.png",alt:"react hook form dynamic forms"}),(0,a.yg)("br",null),(0,a.yg)("p",null,"Right now, the form lacks the functionality of an actual form. To make it functional, we'll wrap it with React hook form's ",(0,a.yg)("inlineCode",{parentName:"p"},"controller")," component and add the necessary props."),(0,a.yg)("h2",{id:"using-the-controller-component"},"Using the controller component"),(0,a.yg)("p",null,"The ",(0,a.yg)("inlineCode",{parentName:"p"},"Controller")," component is a wrapper for controlled inputs. It lets us register controlled input components from external UI libraries such as Material UI and Ant design to React hook form."),(0,a.yg)("p",null,"The Controller component accepts three major props:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("p",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"p"},"name"),": Unique string value of the input's name.")),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("p",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"p"},"control"),": Invokes the ",(0,a.yg)("inlineCode",{parentName:"p"},"control")," property from the useForm hook.")),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("p",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"p"},"render"),": A function that returns a component that will be controlled by React hook form."))),(0,a.yg)("p",null,"To use the controller component, we must first create a ",(0,a.yg)("inlineCode",{parentName:"p"},"defaultValue")," object, type interface and destructure the ",(0,a.yg)("inlineCode",{parentName:"p"},"control")," and other necessary properties from the ",(0,a.yg)("inlineCode",{parentName:"p"},"useForm")," hook:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/pages/UserCreate.tsx"',title:'"src/pages/UserCreate.tsx"'},'interface IPost {\nfirstName: string;\nemail: string;\nskills: string;\n}\n\nconst defaultValues = {\nfirstName: "",\nemail: "",\nskills: "",\n};\n\nfunction UserCreate() {\nconst {\nsaveButtonProps,\ncontrol,\nformState: { errors },\n} = useForm<IPost>({\nmode: "onChange",\ndefaultValues,\n});\n')),(0,a.yg)("p",null,"The ",(0,a.yg)("inlineCode",{parentName:"p"},"defaultValue")," object properties will serve as our input field's default value. The ",(0,a.yg)("inlineCode",{parentName:"p"},"mode")," property we\u2019re passing alongside the ",(0,a.yg)("inlineCode",{parentName:"p"},"defaultValue")," object to the ",(0,a.yg)("inlineCode",{parentName:"p"},"useForm")," hook specifies how React hook form should check for changes in each field."),(0,a.yg)("p",null,"Next, we declare the ",(0,a.yg)("inlineCode",{parentName:"p"},"Controller")," component on our form and move the ",(0,a.yg)("inlineCode",{parentName:"p"},"TextField")," components within its render prop function:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/pages/UserCreate.tsx"',title:'"src/pages/UserCreate.tsx"'},'<Controller\n    control={control}\n    name="firstName"\n    render={({ field }) => (\n        <TextField\n        {...field}\n        error={!!errors?.firstName}\n        helperText={errors.firstName && `${errors.firstName.message}`}\n        margin="normal"\n        required\n        fullWidth\n        id="firstName"\n        label="First Name"\n        autoFocus\n        />\n    )}\n/>\n<Controller\n    control={control}\n    name="email"\n    render={({ field }) => (\n        <TextField\n        {...field}\n        error={!!errors?.email}\n        helperText={errors.email && `${errors.email.message}`}\n        margin="normal"\n        required\n        fullWidth\n        id="email"\n        label="Email"\n        />\n    )}\n/>\n')),(0,a.yg)("p",null,"In the code above, we added the ",(0,a.yg)("inlineCode",{parentName:"p"},"control")," and ",(0,a.yg)("inlineCode",{parentName:"p"},"name")," props to the controller component and then passed the ",(0,a.yg)("inlineCode",{parentName:"p"},"control")," property from the useForm hook and a unique name to them as arguments."),(0,a.yg)("p",null,"Notice the properties on the ",(0,a.yg)("inlineCode",{parentName:"p"},"TextField")," components:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/pages/UserCreate.tsx"',title:'"src/pages/UserCreate.tsx"'},'<TextField\n  {...field}\n  error={!!errors?.firstName}\n  helperText={errors.firstName && `${errors.firstName.message}`}\n  margin="normal"\n  required\n  fullWidth\n  id="firstName"\n  label="First Name"\n  autoFocus\n/>\n')),(0,a.yg)("p",null,"We're using the ",(0,a.yg)("inlineCode",{parentName:"p"},"required"),", ",(0,a.yg)("inlineCode",{parentName:"p"},"error"),", and ",(0,a.yg)("inlineCode",{parentName:"p"},"helperText")," props to add basic validation to each field and pass the Controller's properties to them via the ",(0,a.yg)("inlineCode",{parentName:"p"},"field")," parameter."),(0,a.yg)("p",null,"Now our input fields are registered to React hook form. We can add dynamic fields using React hook form's ",(0,a.yg)("inlineCode",{parentName:"p"},"useFieldArray")," hook."),(0,a.yg)("h2",{id:"using-the-usefieldsarray-hook"},"Using the usefieldsArray hook."),(0,a.yg)("p",null,"The ",(0,a.yg)("inlineCode",{parentName:"p"},"useFieldArray")," hook is a custom function for working with field arrays. It exposes a ",(0,a.yg)("inlineCode",{parentName:"p"},"field")," property that returns a dynamic array of fields alongside methods for appending, removing, and perpending fields from the array."),(0,a.yg)("p",null,"In this section, we'll iterate through the fields array and append a TextField each time a button is clicked."),(0,a.yg)("p",null,"To begin with, call the ",(0,a.yg)("inlineCode",{parentName:"p"},"useFieldArray")," hook right below the ",(0,a.yg)("inlineCode",{parentName:"p"},"useForm")," declaration and destructure the ",(0,a.yg)("inlineCode",{parentName:"p"},"append")," and ",(0,a.yg)("inlineCode",{parentName:"p"},"remove")," methods from the hook."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/pages/UserCreate.tsx"',title:'"src/pages/UserCreate.tsx"'},"const { fields, append, remove } = useFieldArray();\n")),(0,a.yg)("p",null,"Next, add an object with ",(0,a.yg)("inlineCode",{parentName:"p"},"control")," and ",(0,a.yg)("inlineCode",{parentName:"p"},"name"),' keys to the hook as an argument and then pass the control property from the useForm hook and a unique name, in our case: "skills", to the ',(0,a.yg)("inlineCode",{parentName:"p"},"control")," and ",(0,a.yg)("inlineCode",{parentName:"p"},"name")," keys, respectively."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/pages/UserCreate.tsx"',title:'"src/pages/UserCreate.tsx"'},'const { fields, append, remove } = useFieldArray({\n  control,\n  name: "skills",\n});\n')),(0,a.yg)("p",null,"Lastly, add the following codes below the TextFields on the form:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/pages/UserCreate.tsx"',title:'"src/pages/UserCreate.tsx"'},'{\n  fields.map(({ id }, index) => {\n    return (\n      <Box key={id} sx={{ display: "inline-flex" }}>\n        <Controller\n          control={control}\n          name={`skills[${index}].skills`}\n          render={({ field }) => (\n            <TextField\n              {...field}\n              error={!!errors?.skills}\n              helperText={errors.skills && `${errors.skills.message}`}\n              margin="normal"\n              required\n              fullWidth\n              id="skills"\n              label={`Skill - ${index + 1}`}\n            />\n          )}\n        />\n      </Box>\n    );\n  });\n}\n')),(0,a.yg)("p",null,"Here, we iterated over the field property's dynamic arrays using the ",(0,a.yg)("inlineCode",{parentName:"p"},"map")," method and returned a new TextField component inside the callback function."),(0,a.yg)("p",null,"We added two parameters to the callback function: ",(0,a.yg)("inlineCode",{parentName:"p"},"field")," and ",(0,a.yg)("inlineCode",{parentName:"p"},"index"),". The field parameter represents each dynamic field and can be used to get their unique identifiers: ",(0,a.yg)("inlineCode",{parentName:"p"},"id")," and other properties. On the other hand, the' index' parameter is used to get the position of each field on the array."),(0,a.yg)("p",null,"As you can see in the code block above, we're using both parameters to pass arguments to the ",(0,a.yg)("inlineCode",{parentName:"p"},"key")," and ",(0,a.yg)("inlineCode",{parentName:"p"},"label")," props on the TextField component."),(0,a.yg)("p",null,"We cant use our dynamic fields just yet; we need a way to trigger it on command. Next, we'll use the useFieldArray action methods to append and remove dynamic fields on the form."),(0,a.yg)("h2",{id:"using-usefieldarray-actions"},"Using useFieldArray actions."),(0,a.yg)("p",null,(0,a.yg)("inlineCode",{parentName:"p"},"useFieldArray")," actions are methods that let us add and delete dynamic fields in a form. They are relatively easy to implement; all we have to do is call them in an event handler to use them."),(0,a.yg)("p",null,"In this section, we'll add a button component with an ",(0,a.yg)("inlineCode",{parentName:"p"},"onClick")," event handler to the form and call the append method inside."),(0,a.yg)("p",null,"To do this, add the ",(0,a.yg)("inlineCode",{parentName:"p"},"Button")," component to the list of imported components at the top of the page like so:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx"},'import { Create, Box, TextField, Button } from "@refinedev/mui";\n')),(0,a.yg)("p",null,"Next, declare the button component with an event handler below the dynamic fields and call the ",(0,a.yg)("inlineCode",{parentName:"p"},"append()")," method inside it:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/pages/UserCreate.tsx"',title:'"src/pages/UserCreate.tsx"'},'{\n  fields.map(({ id }, index) => {\n    return (\n      <Box key={id} sx={{ display: "inline-flex" }}>\n        <Controller\n          control={control}\n          name={`skills[${index}].skills`}\n          render={({ field }) => (\n            <TextField\n              {...field}\n              error={!!errors?.skills}\n              helperText={errors.skills && `${errors.skills.message}`}\n              margin="normal"\n              required\n              fullWidth\n              id="skills"\n              label={`Skill - ${index + 1}`}\n            />\n          )}\n        />\n      </Box>\n    );\n  });\n}\n<Button\n  variant="outlined"\n  fullWidth\n  onClick={() => {\n    append({ skills: "Javascript" });\n  }}\n>\n  Add a skill\n</Button>;\n')),(0,a.yg)("blockquote",null,(0,a.yg)("p",{parentName:"blockquote"},"Note: The object argument being passed to the ",(0,a.yg)("inlineCode",{parentName:"p"},"append")," method will serve as the default value of each dynamic field.")),(0,a.yg)("p",null,"That's all it takes to use ",(0,a.yg)("inlineCode",{parentName:"p"},"useFieldArray")," actions in a form. If you save your progress and return to the browser, you should be able to perform the actions shown in the gif below:"),(0,a.yg)("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2022-12-23-dynamic-hook-form/gif-4-min.gif",alt:"react hook form dynamic forms"}),(0,a.yg)("br",null),(0,a.yg)("h2",{id:"handling-submission"},"Handling submission"),(0,a.yg)("p",null,"As you might have noticed in the previous section, our dynamic field values are not properly being sent to the API."),(0,a.yg)("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2022-12-23-dynamic-hook-form/small.png",alt:"react hook form dynamic forms"}),(0,a.yg)("br",null),(0,a.yg)("p",null,"This is because the ",(0,a.yg)("inlineCode",{parentName:"p"},"useFieldArray")," returns an array of objects with each field value instead of string values."),(0,a.yg)("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2022-12-23-dynamic-hook-form/gif-5.png",alt:"react hook form dynamic forms"}),(0,a.yg)("br",null),(0,a.yg)("p",null,"When handling the form's submission, Refine automatically grabs the expected value from each input field and sends it to the server. The ",(0,a.yg)("inlineCode",{parentName:"p"},"fullName")," and ",(0,a.yg)("inlineCode",{parentName:"p"},"email")," records expect a ",(0,a.yg)("inlineCode",{parentName:"p"},"string")," value, while the ",(0,a.yg)("inlineCode",{parentName:"p"},"skills")," record expects an array of strings."),(0,a.yg)("p",null,"Since the ",(0,a.yg)("inlineCode",{parentName:"p"},"useFieldArray")," hook also returns an array, but with objects, Refine assumes the data is what's expected and sends it to the server."),(0,a.yg)("p",null,"As mentioned earlier, the ",(0,a.yg)("inlineCode",{parentName:"p"},"<Create>"),", ",(0,a.yg)("inlineCode",{parentName:"p"},"<Edit>"),", and ",(0,a.yg)("inlineCode",{parentName:"p"},"<List>")," components are layouts for displaying the Create, Edit, and List pages, and they each contain action buttons, such as the ",(0,a.yg)("inlineCode",{parentName:"p"},"save")," button on the Create and Edit pages and the ",(0,a.yg)("inlineCode",{parentName:"p"},"Create")," button on the List page."),(0,a.yg)("p",null,"These buttons use underlying functions to perform specific actions on their located pages. The Create button routes users to the Create page when clicked, while the ",(0,a.yg)("inlineCode",{parentName:"p"},"Save")," button handles the submission functionality of the form under the hood."),(0,a.yg)("p",null,"Fortunately for us, Refine provides an ",(0,a.yg)("inlineCode",{parentName:"p"},"onFinish")," hook that lets us override the ",(0,a.yg)("inlineCode",{parentName:"p"},"save")," button's default configuration and define what\u2019s sent to the server. The hook accepts an object with properties of each record on the API, to which we can pass custom values:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx"},"    onFinish({\n      firstName: \u201c\u201d,\n      email: \u201c\u201d,\n      skills: \u201c\u201d,\n    });\n")),(0,a.yg)("p",null,"To use this hook, first, destructure it and the ",(0,a.yg)("inlineCode",{parentName:"p"},"handleSubmit")," hook from ",(0,a.yg)("inlineCode",{parentName:"p"},"useForm"),"."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/pages/userCreate.tsx"',title:'"src/pages/userCreate.tsx"'},'const {\n  refineCore: { onFinish },\n  control,\n  formState: { errors },\n  handleSubmit,\n} = useForm<IPost>({\n  mode: "onChange",\n  defaultValues,\n});\n')),(0,a.yg)("p",null,"Next, create a ",(0,a.yg)("inlineCode",{parentName:"p"},"submitHandler")," function and add a ",(0,a.yg)("inlineCode",{parentName:"p"},"saveButtonProps")," prop to the ",(0,a.yg)("inlineCode",{parentName:"p"},"Create")," component\u2019s opening tag with the following code:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/pages/userCreate.tsx"',title:'"src/pages/userCreate.tsx"'},"function UserCreate() {\n  ...\n const submitHandler = (values: any) => {\n    let fieldValue: string[] = [];\n    values.skills.forEach((val: any) => {\n      fieldValue.push(val.skills);\n    });\n\n    onFinish({\n      firstName: values.firstName,\n      email: values.email,\n      skills: fieldValue,\n    });\n  };\n\n  return (\n    <Create saveButtonProps={{ onClick: handleSubmit(submitHandler) }}>\n    ...\n    </Create>\n  );\n}\n\nexport default UserCreate;\n")),(0,a.yg)("p",null,"Inside the ",(0,a.yg)("inlineCode",{parentName:"p"},"submitHandler")," function, we\u2019re grabbing the ",(0,a.yg)("inlineCode",{parentName:"p"},"skills")," values from the returned array of objects and pushing them to a new array, which is also being passed to the ",(0,a.yg)("inlineCode",{parentName:"p"},"skills")," property on the ",(0,a.yg)("inlineCode",{parentName:"p"},"onFinish")," object."),(0,a.yg)("p",null,"Conventionally, the ",(0,a.yg)("inlineCode",{parentName:"p"},"saveButtonProps")," prop accepts a ",(0,a.yg)("inlineCode",{parentName:"p"},"saveButtonProps")," variable from the ",(0,a.yg)("inlineCode",{parentName:"p"},"useForm")," hook that handles the submission functionality when the ",(0,a.yg)("inlineCode",{parentName:"p"},"save")," button is clicked. But since we\u2019re using a custom function for our form\u2019s submission, we passed an object with an ",(0,a.yg)("inlineCode",{parentName:"p"},"onClick")," property to it instead."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/pages/userCreate.tsx"',title:'"src/pages/userCreate.tsx"'},"saveButtonProps={{ onClick: handleSubmit(submitHandler) }}>\n")),(0,a.yg)("p",null,"The object accepts an event listener key and a function value. It overrides the ",(0,a.yg)("inlineCode",{parentName:"p"},"save")," button\u2019s default setting and makes it run the function being passed as the value, in this case, the ",(0,a.yg)("inlineCode",{parentName:"p"},"submitHandler")," function, whenever the event fires."),(0,a.yg)("p",null,(0,a.yg)("a",{parentName:"p",href:"https://react-hook-form.com/api/useform/handlesubmit/"},(0,a.yg)("inlineCode",{parentName:"a"},"handleSubmit"))," is a React hook form function for managing form submission events. It receives the form's data if the form validation is successful and passes it to the ",(0,a.yg)("inlineCode",{parentName:"p"},"submitHandler")," function."),(0,a.yg)("p",null,"Refer to the documentation to learn more about the ",(0,a.yg)("a",{parentName:"p",href:"https://refine.dev/docs/guides-concepts/faq/#how-can-i-change-the-form-data-before-submitting-it-to-the-api"},(0,a.yg)("inlineCode",{parentName:"a"},"onFinish"))," hook and the ",(0,a.yg)("a",{parentName:"p",href:"https://refine.dev/docs/api-reference/mantine/hooks/form/useForm/#return-values"},(0,a.yg)("inlineCode",{parentName:"a"},"saveButtonProps"))," prop."),(0,a.yg)("p",null,"Now, if you save your progress and go back to the browser, everything should work as expected."),(0,a.yg)("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2022-12-23-dynamic-hook-form/gif-6-min.gif",alt:"react hook form dynamic forms"}),(0,a.yg)("br",null),(0,a.yg)("p",null,"Notice we can add fields but can't remove them. Next, we'll look at how we can use the ",(0,a.yg)("inlineCode",{parentName:"p"},"remove")," action property to delete fields on the form."),(0,a.yg)("h2",{id:"removing-fields"},"Removing fields"),(0,a.yg)("p",null,"The ",(0,a.yg)("inlineCode",{parentName:"p"},"remove")," method lets us remove dynamic fields at a specific position. it removes the field whose ",(0,a.yg)("inlineCode",{parentName:"p"},"index")," has been passed to it as an argument or every dynamic field on the form when no index is provided."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/pages/UserCreate.tsx"',title:'"src/pages/UserCreate.tsx"'},"remove(index);\n")),(0,a.yg)("p",null,"To use this method, we'll add a button inside the callback function, below the ",(0,a.yg)("inlineCode",{parentName:"p"},"TextField")," component, and call it inside an ",(0,a.yg)("inlineCode",{parentName:"p"},"onClick")," handler, with the index parameter passed to it."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/pages/UserCreate.tsx"',title:'"src/pages/UserCreate.tsx"'},"<Button\n  onClick={() => {\n    remove(index);\n  }}\n>\n  delete\n</Button>\n")),(0,a.yg)("p",null,"That's it. Now we can remove appended fields by clicking the delete button rendered alongside them."),(0,a.yg)("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2022-12-23-dynamic-hook-form/gif-7-min.gif",alt:"react hook form dynamic forms"}),(0,a.yg)("br",null),(0,a.yg)("p",null,"To align the fields and ",(0,a.yg)("inlineCode",{parentName:"p"},"delete")," buttons horizontally on the same axis, we can wrap the TextField and Button components with a ",(0,a.yg)("inlineCode",{parentName:"p"},"Box")," component and make it a Flex container like so:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/pages/UserCreate.tsx"',title:'"src/pages/UserCreate.tsx"'},'<Box key={id} sx={{ display: "inline-flex" }}>\n  <Controller\n    control={control}\n    name={`skills[${index}].skills`}\n    render={({ field }) => (\n      <TextField\n        {...field}\n        error={!!errors?.skills}\n        helperText={errors.skills && `${errors.skills.message}`}\n        margin="normal"\n        required\n        fullWidth\n        id="skills"\n        label={`Skill - ${index + 1}`}\n      />\n    )}\n  />\n  <Button\n    onClick={() => {\n      remove(index);\n    }}\n  >\n    delete\n  </Button>\n</Box>\n')),(0,a.yg)("p",null,"The ",(0,a.yg)("inlineCode",{parentName:"p"},"Box")," component will create a Flexbox context around both components and align them side-by-side on the y-axis."),(0,a.yg)("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2022-12-23-dynamic-hook-form/gif-8.png",alt:"react hook form dynamic forms"}),(0,a.yg)("br",null),(0,a.yg)("p",null,"Alternatively, we can use a Material UI bin icon instead of a button. This will give the form a better esthetical feel."),(0,a.yg)("p",null,"To do this, import the ",(0,a.yg)("inlineCode",{parentName:"p"},"DeleteIcon")," icon component from Material UI like so:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/pages/UserCreate.tsx"',title:'"src/pages/UserCreate.tsx"'},'import DeleteIcon from "@mui/icons-material/Delete";\n')),(0,a.yg)("p",null,"Then remove the ",(0,a.yg)("inlineCode",{parentName:"p"},"delete")," button and add the icon in its place:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/pages/UserCreate.tsx"',title:'"src/pages/UserCreate.tsx"'},'<Box\n  key={id}\n  sx={{\n    display: "inline-flex",\n    alignItems: "center",\n    marginRight: "15px",\n  }}\n>\n  <Controller\n    control={control}\n    name={`skills[${index}].skills`}\n    render={({ field }) => (\n      <TextField\n        {...field}\n        error={!!errors?.skills}\n        helperText={errors.skills && `${errors.skills.message}`}\n        margin="normal"\n        required\n        fullWidth\n        id="skills"\n        label={`Skill - ${index + 1}`}\n      />\n    )}\n  />\n  <DeleteIcon\n    onClick={() => {\n      remove(index);\n    }}\n    sx={{ color: "red", cursor: "pointer" }}\n  />\n</Box>\n')),(0,a.yg)("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2022-12-23-dynamic-hook-form/gif-9-min.gif",alt:"react hook form dynamic forms"}),(0,a.yg)("br",null),(0,a.yg)("br",null),(0,a.yg)("div",null,(0,a.yg)("a",{href:"https://discord.gg/refine"},(0,a.yg)("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/website/static/img/discord_big_blue.png",alt:"discord banner"}))),(0,a.yg)("h2",{id:"validation"},"Validation"),(0,a.yg)("p",null,"We can add validation that prevents users from submitting the form without appending at least a field. To do this, we'll add a ",(0,a.yg)("inlineCode",{parentName:"p"},"rules")," property to the ",(0,a.yg)("inlineCode",{parentName:"p"},"useFieldArray")," object argument and give it a ",(0,a.yg)("inlineCode",{parentName:"p"},"required")," property and the error message as its value."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/pages/UserCreate.tsx"',title:'"src/pages/UserCreate.tsx"'},'const { fields, append, remove } = useFieldArray({\n  control,\n  name: "skills",\n  rules: {\n    required: "please add at least one skill",\n  },\n});\n')),(0,a.yg)("p",null,"Now, if you try to submit the form without appending at least one field, you'll get the error message we're passing to the ",(0,a.yg)("inlineCode",{parentName:"p"},"required")," property above."),(0,a.yg)("p",null,"The form composition is complete. Next, we'll look at how to set up the Edit page for updating records."),(0,a.yg)("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2022-12-23-dynamic-hook-form/gif-validation.gif",alt:"react hook form dynamic forms"}),(0,a.yg)("br",null),(0,a.yg)("h2",{id:"creating-the-edit-page"},"Creating the Edit page"),(0,a.yg)("p",null,"To properly edit records inside the ",(0,a.yg)("inlineCode",{parentName:"p"},"<Edit>")," page, we need an identical composition of the ",(0,a.yg)("inlineCode",{parentName:"p"},"<Create>")," page's form. But instead of creating a new one from scratch, we can simply add a duplicate of the former inside the ",(0,a.yg)("inlineCode",{parentName:"p"},"<Edit>")," page and make necessary changes like so:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/pages/UserEdit.tsx"',title:'"src/pages/UserEdit.tsx"'},'import React from "react";\nimport { Edit, Box, TextField, Button } from "@refinedev/mui";\nimport { useForm, Controller, useFieldArray } from "@refinedev/react-hook-form";\n\ninterface IPost {\n  firstName: string;\n  email: string;\n  skills: string;\n}\n\nconst defaultValues = {\n  firstName: "",\n  email: "",\n  skills: "",\n};\n\nfunction UserEdit(Props: any) {\n  const {\n    saveButtonProps,\n    control,\n    formState: { errors },\n    handleSubmit,\n  } = useForm<IPost>({\n    mode: "onChange",\n    defaultValues,\n  });\n\n  const { fields, append, remove } = useFieldArray({\n    control,\n    name: "skills",\n    rules: {\n      required: "please add at least one skill",\n    },\n  });\n\n  return (\n    <Edit saveButtonProps={saveButtonProps}>\n      <Box component="form">\n        <>\n          <Controller\n            control={control}\n            name="firstName"\n            render={({ field }) => (\n              <TextField\n                {...field}\n                error={!!errors?.firstName}\n                helperText={errors.firstName && `${errors.firstName.message}`}\n                margin="normal"\n                required\n                fullWidth\n                id="firstName"\n                label="First Name"\n                autoFocus\n              />\n            )}\n          />\n\n          <Controller\n            control={control}\n            name="email"\n            render={({ field }) => (\n              <TextField\n                {...field}\n                error={!!errors?.email}\n                helperText={errors.email && `${errors.email.message}`}\n                margin="normal"\n                required\n                fullWidth\n                id="email"\n                label="Email"\n              />\n            )}\n          />\n          {fields.map(({ id }, index) => {\n            return (\n              <Box\n                key={id}\n                sx={{\n                  display: "inline-flex",\n                  alignItems: "center",\n                  marginRight: "15px",\n                }}\n              >\n                <Controller\n                  control={control}\n                  name={`skills[${index}]`}\n                  render={({ field }) => (\n                    <TextField\n                      {...field}\n                      error={!!errors?.skills}\n                      helperText={errors.skills && `${errors.skills.message}`}\n                      margin="normal"\n                      required\n                      fullWidth\n                      id="skills"\n                      label={`Skill - ${index + 1}`}\n                    />\n                  )}\n                />\n                <DeleteIcon\n                  onClick={() => {\n                    remove(index);\n                  }}\n                  sx={{ color: "red", cursor: "pointer" }}\n                />\n              </Box>\n            );\n          })}\n        </>\n      </Box>\n      <p>{errors.skills && `${errors.skills?.root?.message}`}</p>\n      <Button\n        variant="outlined"\n        fullWidth\n        onClick={() => {\n          append({ skills: "Javascript" });\n        }}\n      >\n        Add a skill\n      </Button>\n    </Edit>\n  );\n}\n\nexport default UserEdit;\n')),(0,a.yg)("p",null,"Unlike the ",(0,a.yg)("inlineCode",{parentName:"p"},"UserCreate")," page, we don\u2019t have to create a manual functionality for submitting the form. This is because the API returns an array for the ",(0,a.yg)("inlineCode",{parentName:"p"},"skills")," record by default, so Refine won\u2019t have trouble accessing the array and updating records as expected."),(0,a.yg)("p",null,"As a result, we removed the ",(0,a.yg)("inlineCode",{parentName:"p"},"submitHandler")," function and passed the ",(0,a.yg)("inlineCode",{parentName:"p"},"saveButtonProps")," variable from ",(0,a.yg)("inlineCode",{parentName:"p"},"useForm")," to the ",(0,a.yg)("inlineCode",{parentName:"p"},"<Edit>")," component\u2019s opening tag:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/pages/UserEdit.tsx"',title:'"src/pages/UserEdit.tsx"'},"<Edit saveButtonProps={saveButtonProps}>...</Edit>\n")),(0,a.yg)("p",null,"This is all we have to do to set up the edit page. However, for the page to be accessible, we need to create a functionality for redirecting users to the ",(0,a.yg)("inlineCode",{parentName:"p"},"<Edit>")," page of specific records."),(0,a.yg)("p",null,"We'll do this by adding an ",(0,a.yg)("inlineCode",{parentName:"p"},"action")," column to the table on the List page and an edit button for each row. When clicked on, the edit button will redirect users to the edit page of the corresponding record on its row."),(0,a.yg)("p",null,"First, return to the ",(0,a.yg)("inlineCode",{parentName:"p"},"UserList")," file and import the ",(0,a.yg)("inlineCode",{parentName:"p"},"EditButton")," components from Refine:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/pages/UserList.tsx"',title:'"src/pages/UserList.tsx"'},'import {\n  useDataGrid,\n  DataGrid,\n  GridColumns,\n  List,\n  Stack,\n  EditButton,\n} from "@refinedev/mui";\n')),(0,a.yg)("p",null,"The ",(0,a.yg)("inlineCode",{parentName:"p"},"EditButton")," component uses Refine\u2019s ",(0,a.yg)("inlineCode",{parentName:"p"},"useNavigation")," hook under the hood to redirect users to the edit page of resources."),(0,a.yg)("p",null,"Refer to the documentation to learn more about the ",(0,a.yg)("a",{parentName:"p",href:"https://refine.dev/docs/api-reference/core/hooks/navigation/useNavigation/"},(0,a.yg)("inlineCode",{parentName:"a"},"useNavigation"))," hook."),(0,a.yg)("p",null,"Next, add a fourth object to the ",(0,a.yg)("inlineCode",{parentName:"p"},"columns")," array with the following properties:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/pages/UserList.tsx"',title:'"src/pages/UserList.tsx"'},'...\n{\n  headerName: "Actions",\n  headerAlign: "center",\n  field: "actions",\n  minWidth: 180,\n  align: "center",\n  flex: 1,\n  sortable: false,\n  renderCell: function render({ row }: { row: any }) {\n    return (\n    <Stack direction="row" spacing={1}>\n    <EditButton size="small" hideText recordItemId={row.id} />\n    </Stack>\n    );\n  },\n},\n...\n')),(0,a.yg)("p",null,"Here, we added a ",(0,a.yg)("inlineCode",{parentName:"p"},"renderCell")," property to the fourth object and passed it a function that renders the ",(0,a.yg)("inlineCode",{parentName:"p"},"EditButton")," to each row on the table. Then we used the ",(0,a.yg)("inlineCode",{parentName:"p"},"row")," parameter on the function to get the ",(0,a.yg)("inlineCode",{parentName:"p"},"id")," of the records and passed them to the ",(0,a.yg)("inlineCode",{parentName:"p"},"recordItemId")," prop on the ",(0,a.yg)("inlineCode",{parentName:"p"},"EditButton"),"."),(0,a.yg)("p",null,"This way, when the edit icon is clicked, Refine will know to redirect users to the Edit page of the corresponding record on the same row as the icon."),(0,a.yg)("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2022-12-23-dynamic-hook-form/gif-10-min.gif",alt:"react hook form dynamic forms"}),(0,a.yg)("br",null),(0,a.yg)("p",null,"That\u2019s it. We\u2019ve successfully composed a fully functional dynamic form that posts and updates records from an API endpoint."),(0,a.yg)("h2",{id:"conclusion"},"Conclusion"),(0,a.yg)("p",null,"In this article, we introduced Refine and React hook forms and looked at their benefits. Then walked through the process of setting up a Refine project with Material design and how to handle CRUD functionalities using the ",(0,a.yg)("inlineCode",{parentName:"p"},"List"),", ",(0,a.yg)("inlineCode",{parentName:"p"},"Create"),", and ",(0,a.yg)("inlineCode",{parentName:"p"},"Edit")," pages."),(0,a.yg)("p",null,"We also looked at how to set up a dynamic form using React hook form\u2019s ",(0,a.yg)("inlineCode",{parentName:"p"},"useFieldArray")," hook and how to fix the quirks that come with using the tool."),(0,a.yg)("a",{rel:"dofollow",href:"https://www.freecodecamp.org/news/how-to-build-an-react-admin-panel-with-refine/"},"Refer to building React admin panel with Refine article "),(0,a.yg)("h2",{id:"live-codesandbox-example"},"Live CodeSandbox Example"),(0,a.yg)(c,{path:"blog-react-hook-dynamic-form",mdxType:"CodeSandboxExample"}),(0,a.yg)("hr",null))}y.isMDXComponent=!0}}]);