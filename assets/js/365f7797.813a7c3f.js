"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[94235],{58860:(e,t,n)=>{n.d(t,{xA:()=>c,yg:()=>m});var i=n(37953);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=i.createContext({}),p=function(e){var t=i.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},c=function(e){var t=p(e.components);return i.createElement(l.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},f=i.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=p(n),f=o,m=u["".concat(l,".").concat(f)]||u[f]||d[f]||a;return n?i.createElement(m,r(r({ref:t},c),{},{components:n})):i.createElement(m,r({ref:t},c))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,r=new Array(a);r[0]=f;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:o,r[1]=s;for(var p=2;p<a;p++)r[p]=n[p];return i.createElement.apply(null,r)}return i.createElement.apply(null,n)}f.displayName="MDXCreateElement"},63605:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>m,frontMatter:()=>s,metadata:()=>p,toc:()=>u});n(37953);var i=n(58860);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function r(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const s={title:"How to create a notification provider with react-toastify",description:"We'll create a custom notification provider in a Refine application using react-toastify.",slug:"react-toastify",authors:"joseph_mawa",tags:["react","Refine"],image:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2023-06-01-react-toastify/social-2.png",hide_table_of_contents:!1},l=void 0,p={permalink:"/blog/react-toastify",source:"@site/blog/2024-08-09-react-toastify.md",title:"How to create a notification provider with react-toastify",description:"We'll create a custom notification provider in a Refine application using react-toastify.",date:"2024-08-09T00:00:00.000Z",formattedDate:"August 9, 2024",tags:[{label:"react",permalink:"/blog/tags/react"},{label:"Refine",permalink:"/blog/tags/refine"}],readingTime:14.655,hasTruncateMarker:!1,authors:[{name:"Joseph Mawa",title:"Web Developer",url:"https://github.com/nibble0101",imageURL:"/img/generic-profile.png",key:"joseph_mawa"}],frontMatter:{title:"How to create a notification provider with react-toastify",description:"We'll create a custom notification provider in a Refine application using react-toastify.",slug:"react-toastify",authors:"joseph_mawa",tags:["react","Refine"],image:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2023-06-01-react-toastify/social-2.png",hide_table_of_contents:!1},prevItem:{title:"Bun vs. Node.js",permalink:"/blog/bun-js-vs-node"},nextItem:{title:"A Guide to Using the useLayoutEffect Hook in React",permalink:"/blog/uselayouteffect-vs-useeffect"},relatedPosts:[{title:"Redirect in React Router V6 with useNavigate hook",description:"We'll discover how to perform a redirect using useNavigate in React Router V6",permalink:"/blog/usenavigate-react-router-redirect",formattedDate:"June 24, 2024",authors:[{name:"Joseph Mawa",title:"Web Developer",url:"https://github.com/nibble0101",imageURL:"/img/generic-profile.png",key:"joseph_mawa"}],readingTime:9.78,date:"2024-06-24T00:00:00.000Z"},{title:"Understanding the React useRef Hook",description:"We will explain the differences between useRef and React ref.",permalink:"/blog/react-useref-hook-and-ref",formattedDate:"October 16, 2024",authors:[{name:"Joel Adewole",title:"Web Developer",url:"https://github.com/wolz-codelife",github:"https://github.com/wolz-codelife",linkedin:"https://linkedin.com/in/wolz-codelife",imageURL:"https://github.com/wolz-CODElife.png",key:"joel_adewole"}],readingTime:15.71,date:"2024-10-16T00:00:00.000Z"},{title:"React useMemo Hook Guide with Examples",description:"Improve React app performance with the useMemo() hook.",permalink:"/blog/react-usememo",formattedDate:"September 19, 2024",authors:[{name:"Abdullah Numan",title:"Fullstack Developer",url:"https://github.com/anewman15/",imageURL:"https://github.com/anewman15.png",key:"abdullah_numan"}],readingTime:12.855,date:"2024-09-19T00:00:00.000Z"}],authorPosts:[{title:"Using Google Lighthouse to improve app performance",description:"Learn how to use the Google Chrome Lighthouse performance audit tool to identify and improve problems with your app.",permalink:"/blog/lighthouse-google-chrome",formattedDate:"May 24, 2024",authors:[{name:"Joseph Mawa",title:"Web Developer",url:"https://github.com/nibble0101",imageURL:"/img/generic-profile.png",key:"joseph_mawa"}],readingTime:18.65,date:"2024-05-24T00:00:00.000Z"},{title:"How to Build a Web App in 10 steps in 2024",description:"In this article, we will explore some steps you can follow when building a web app.",permalink:"/blog/how-to-build-a-web-app",formattedDate:"December 26, 2023",authors:[{name:"Joseph Mawa",title:"Web Developer",url:"https://github.com/nibble0101",imageURL:"/img/generic-profile.png",key:"joseph_mawa"}],readingTime:9.43,date:"2023-12-26T00:00:00.000Z"},{title:"Building a React Admin Dashboard with Tremor Library",description:"We'll build a simple React admin dashboard using Refine and Tremor.",permalink:"/blog/building-react-admin-dashboard-with-tremor",formattedDate:"July 2, 2023",authors:[{name:"Joseph Mawa",title:"Web Developer",url:"https://github.com/nibble0101",imageURL:"/img/generic-profile.png",key:"joseph_mawa"}],readingTime:23.49,date:"2023-07-02T00:00:00.000Z"}]},c={authorsImageUrls:[void 0]},u=[{value:"Introduction",id:"introduction",level:2},{value:"What is Refine",id:"what-is-refine",level:2},{value:"How to create a Refine app",id:"how-to-create-a-refine-app",level:2},{value:"What is react-toastify",id:"what-is-react-toastify",level:2},{value:"Notification providers in Refine",id:"notification-providers-in-refine",level:2},{value:"The <code>open</code> method",id:"the-open-method",level:3},{value:"The <code>close</code> method",id:"the-close-method",level:3},{value:"The <code>useNotification</code> hook",id:"the-usenotification-hook",level:3},{value:"Create a notification provider with react-toastify",id:"create-a-notification-provider-with-react-toastify",level:2},{value:"Step 1 \u2014 Install react-toastify",id:"step-1--install-react-toastify",level:3},{value:"Step 2 \u2014 Set up the notification provider",id:"step-2--set-up-the-notification-provider",level:3},{value:"Step 3 \u2014 Create custom Undoable notification component",id:"step-3--create-custom-undoable-notification-component",level:3},{value:"Step 4 \u2014 Preview notification",id:"step-4--preview-notification",level:3},{value:"Conclusion",id:"conclusion",level:2}],d={toc:u},f="wrapper";function m(e){var{components:t}=e,n=r(e,["components"]);return(0,i.yg)(f,a(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){o(e,t,n[t])}))}return e}({},d,n),{components:t,mdxType:"MDXLayout"}),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"This article was last updated on August 09, 2024 to add sections for Performance Considerations with Notifications.")),(0,i.yg)("h2",{id:"introduction"},"Introduction"),(0,i.yg)("p",null,"React and its derivative frameworks, such as ",(0,i.yg)("a",{parentName:"p",href:"https://github.com/refinedev/refine"},"Refine"),", make building data-intensive front-end applications a breeze. When dealing with data-intensive applications such as admin panels, dashboards, and internal tools, it is necessary to set up a robust and effective notification system."),(0,i.yg)("p",null,"An effective notification system ensures timely notification whenever changes happen in the database. It keeps users informed about changes in the database, especially when dealing with distributed systems."),(0,i.yg)("p",null,"Any Refine project that uses a supported design system or component libraries, such as Material UI, Chakra UI, and Ant Design, comes with a customizable built-in notification provider. However, you can also build a custom notification system from the ground up or use one of the react toast libraries."),(0,i.yg)("p",null,"In the react ecosystem, there are several notification packages to choose from. React-toastify is one of the popular toast packages you can use to integrate a custom notification system in a React or Refine project. In this article, you will create a custom notification provider in a Refine application using react-toastify."),(0,i.yg)("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2023-06-01-react-toastify/react-toastify-min.gif",alt:"react toastify"}),(0,i.yg)("br",null),(0,i.yg)("p",null,"What we'll cover in this article:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("a",{parentName:"li",href:"#what-is-refine"},"What is Refine")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("a",{parentName:"li",href:"#what-is-react-toastify"},"What is react-toastify")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("a",{parentName:"li",href:"#notification-providers-in-refine"},"Notification providers in Refine")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("a",{parentName:"li",href:"#create-a-notification-provider-with-react-toastify"},"Create a notification provider with react-toastify"))),(0,i.yg)("h2",{id:"what-is-refine"},"What is Refine"),(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://github.com/refinedev/refine"},"Refine")," is a free, open-source, MIT-licensed React-based framework. Refine is a feature-packed library. It ships with features for user authentication, routing, internalization, and networking out of the box."),(0,i.yg)("p",null,"The built-in features make Refine a suitable package for building data-intensive front-end applications such as dashboards, admin panels, storefronts, and internal tools."),(0,i.yg)("p",null,"Additionally, the feature-rich Refine ecosystem makes it easy to bootstrap a Refine application and integrate popular design systems and component libraries such as Material UI, Chakra UI, and Ant design in your Refine project."),(0,i.yg)("p",null,"If you are not interested in the design systems and component libraries highlighted above, you can bootstrap a headless Refine application."),(0,i.yg)("h2",{id:"how-to-create-a-refine-app"},"How to create a Refine app"),(0,i.yg)("p",null,"When looking to start using Refine, you can bootstrap a Refine application using the Refine command line tool or the\xa0",(0,i.yg)("a",{parentName:"p",href:"https://refine.new/"},"refine.new"),"\xa0platform. The refine.dev platform makes it easy to create a new Refine project with all the necessary configurations in your browser."),(0,i.yg)("p",null,"Follow the steps below to bootstrap a new Refine application using the\xa0",(0,i.yg)("a",{parentName:"p",href:"https://refine.new/"},"refine.new"),"\xa0platform."),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"Navigate to the\xa0",(0,i.yg)("a",{parentName:"p",href:"https://refine.new/"},"refine.new"),"\xa0platform and log in using your GitHub or Google account.")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},'After logging into the refine.new platform, create a new Refine project by following the steps or clicking the "Create New Project" button if you\'re on the ',(0,i.yg)("inlineCode",{parentName:"p"},"/projects")," page. Be sure to use Vite. Select Headless as your UI framework, REST API as a back-end service, and no authentication provider.")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"After creating a project in the previous step, build and download it to your local machine as a compressed Gzipped project. You need to give your project an appropriate name.")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"After downloading and extracting the compressed Gzipped project, open it in a text editor of your choice. Run one of the commands below to install the project dependencies."))),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-sh"},"npm install\n")),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"After successfully installing the project dependencies described in the previous step, run the command below on the terminal to preview the project. It will launch the development server on localhost on port 5173.")),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-sh"},"npm run dev\n")),(0,i.yg)("p",null,"Your project should look like the image below."),(0,i.yg)("br",null),(0,i.yg)("div",{className:"centered-image"},(0,i.yg)("img",{style:{alignSelf:"center"},src:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2023-06-01-react-toastify/blog-post-list-page.png",alt:"react toastify"})),(0,i.yg)("br",null),(0,i.yg)("p",null,"The refine.new platform is one way of creating a Refine application. You can also use the Refine command line tool."),(0,i.yg)("h2",{id:"what-is-react-toastify"},"What is react-toastify"),(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://www.npmjs.com/package/react-toastify"},"React-toastify")," is a free, open-source, MIT-licensed toast package you can use to provide temporary, unobtrusive, and auto-expiring notifications in your React or Refine application. You can use it with react or react-based frameworks like refine. React-toastify is a simple but powerful package."),(0,i.yg)("p",null,"The main building blocks of react-toastify you will interact with most are the ",(0,i.yg)("inlineCode",{parentName:"p"},"ToastContainer")," component and the ",(0,i.yg)("inlineCode",{parentName:"p"},"toast")," object. The ",(0,i.yg)("inlineCode",{parentName:"p"},"ToastContainer")," component accepts several props for positioning the toast, specifying the theme, type of notification, and several other configuration options."),(0,i.yg)("p",null,"The code below shows some props you can pass to the ",(0,i.yg)("inlineCode",{parentName:"p"},"ToastContainer")," component. For complete documentation of its props, read the react-toastify documentation."),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-tsx"},'<ToastContainer\n  position="top-right"\n  autoClose={5000}\n  hideProgressBar={false}\n  newestOnTop={false}\n  closeOnClick\n  rtl={false}\n  pauseOnFocusLoss\n  draggable\n  pauseOnHover\n  theme="light"\n/>\n')),(0,i.yg)("p",null,"You can trigger a notification by invoking the ",(0,i.yg)("inlineCode",{parentName:"p"},"toast")," function. It takes the message and configuration object as arguments. Invoking ",(0,i.yg)("inlineCode",{parentName:"p"},"toast")," with the arguments below will display a notification with the specified message at the top left."),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-tsx"},'toast("Successfully updated blog post", {\n  position: "top-left",\n  autoClose: 5000,\n  hideProgressBar: false,\n  closeOnClick: true,\n  pauseOnHover: true,\n  draggable: true,\n  progress: undefined,\n  theme: "light",\n});\n')),(0,i.yg)("p",null,"Some of the properties of the configuration object above are similar to the props we passed to the ",(0,i.yg)("inlineCode",{parentName:"p"},"ToastContainer"),". The options you specify using the ",(0,i.yg)("inlineCode",{parentName:"p"},"toast")," function supersede those you pass as props to the ",(0,i.yg)("inlineCode",{parentName:"p"},"ToastContainer"),"."),(0,i.yg)("h2",{id:"notification-providers-in-refine"},"Notification providers in Refine"),(0,i.yg)("p",null,"As hinted above, Refine offers out-of-the-box support for several design systems and UI libraries such as Material UI, Ant design, Mantine, and Chakra UI. If you use any of these design systems or component libraries, the Refine command line tool or the refine.dev platform will create a project with an out-of-the-box notification setup."),(0,i.yg)("p",null,"For a built-in notification provider, you need to import the notification provider and pass it as a prop to the ",(0,i.yg)("inlineCode",{parentName:"p"},"Refine")," component like so:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/App.tsx"',title:'"src/App.tsx"'},'import { useNotificationProvider } from "@refinedev/chakra";\n\nreturn (\n  <Refine\n    //...\n    notificationProvider={useNotificationProvider}\n  />\n);\n')),(0,i.yg)("p",null,"The Refine notification feature is customizable. You can also pass a custom notification implementation as the value of the ",(0,i.yg)("a",{parentName:"p",href:"https://refine.dev/docs/api-reference/core/providers/notification-provider/"},(0,i.yg)("inlineCode",{parentName:"a"},"notificationProvider"))," prop if the built-in notification provider of a design system or UI library doesn't meet your needs."),(0,i.yg)("p",null,"In Refine, a notification provider is an object with two properties. These properties are ",(0,i.yg)("inlineCode",{parentName:"p"},"open")," and ",(0,i.yg)("inlineCode",{parentName:"p"},"close"),", whose values are functions with the shapes below."),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-tsx"},'interface NotificationProvider {\n  open: (params: OpenNotificationParams) => void;\n  close: (key: string) => void;\n}\n\ninterface OpenNotificationParams {\n  key?: string;\n  message: string;\n  type: "success" | "error" | "progress";\n  description?: string;\n  cancelMutation?: () => void;\n  undoableTimeout?: number;\n}\n\nconst notificationProvider: NotificationProvider = {\n  open: () => {},\n  close: () => {},\n};\n')),(0,i.yg)("p",null,"You don't need to declare the ",(0,i.yg)("inlineCode",{parentName:"p"},"NotificationProvider")," interface because you can import it from ",(0,i.yg)("inlineCode",{parentName:"p"},"refine/core"),"."),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-tsx"},'import { NotificationProvider } from "@refinedev/core";\n')),(0,i.yg)("p",null,"In the sub-sections below, we will explore the ",(0,i.yg)("inlineCode",{parentName:"p"},"open")," and ",(0,i.yg)("inlineCode",{parentName:"p"},"close")," methods of the notification provider to understand how they work."),(0,i.yg)("h3",{id:"the-open-method"},"The ",(0,i.yg)("inlineCode",{parentName:"h3"},"open")," method"),(0,i.yg)("p",null,"Refine invokes the ",(0,i.yg)("inlineCode",{parentName:"p"},"open")," method of the notification provider when it wants to display a toast after the user performs an operation that requires notification, such as updating or deleting a record."),(0,i.yg)("p",null,"The ",(0,i.yg)("inlineCode",{parentName:"p"},"open")," method takes an object with the shape below as an argument. As the code below illustrates, the ",(0,i.yg)("inlineCode",{parentName:"p"},"OpenNotificationParams")," interface has several properties."),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-tsx"},'interface OpenNotificationParams {\n  key?: string;\n  message: string;\n  type: "success" | "error" | "progress";\n  description?: string;\n  cancelMutation?: () => void;\n  undoableTimeout?: number;\n}\n')),(0,i.yg)("p",null,"Though the object passed to the ",(0,i.yg)("inlineCode",{parentName:"p"},"open")," method has several properties, it has two required properties, ",(0,i.yg)("inlineCode",{parentName:"p"},"message")," and ",(0,i.yg)("inlineCode",{parentName:"p"},"type"),". The other properties are optional."),(0,i.yg)("p",null,"The ",(0,i.yg)("inlineCode",{parentName:"p"},"message")," property is the message to display on the notification. On the other hand, the ",(0,i.yg)("inlineCode",{parentName:"p"},"type")," property describes the type of the notification. A Refine notification can be of type ",(0,i.yg)("inlineCode",{parentName:"p"},'"success"'),", ",(0,i.yg)("inlineCode",{parentName:"p"},'"error"')," or ",(0,i.yg)("inlineCode",{parentName:"p"},'"progress"'),"."),(0,i.yg)("p",null,'The screenshot below shows a success notification with the message "Successfully edited Blog Posts" that Refine displays after successfully editing a blog post.'),(0,i.yg)("br",null),(0,i.yg)("div",{className:"centered-image"},(0,i.yg)("img",{style:{alignSelf:"center"},src:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2023-06-01-react-toastify/success-toast.png",alt:"react toastify"})),(0,i.yg)("br",null),(0,i.yg)("p",null,'Similarly, the screenshot below shows an error message with the text "Oops failed to update blog post" that Refine displays after failing to update a record.'),(0,i.yg)("br",null),(0,i.yg)("div",{className:"centered-image"},(0,i.yg)("img",{style:{alignSelf:"center"},src:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2023-06-01-react-toastify/error-toast.png",alt:"react toastify"})),(0,i.yg)("br",null),(0,i.yg)("h3",{id:"the-close-method"},"The ",(0,i.yg)("inlineCode",{parentName:"h3"},"close")," method"),(0,i.yg)("p",null,"Unlike the ",(0,i.yg)("inlineCode",{parentName:"p"},"open")," method, Refine invokes the ",(0,i.yg)("inlineCode",{parentName:"p"},"close")," method when closing a notification. It takes the notification key as an argument. You can then use the notification key to close the notification."),(0,i.yg)("h3",{id:"the-usenotification-hook"},"The ",(0,i.yg)("inlineCode",{parentName:"h3"},"useNotification")," hook"),(0,i.yg)("p",null,"The section above describes the contents of a notification provider. You need the ",(0,i.yg)("a",{parentName:"p",href:"https://refine.dev/docs/api-reference/core/hooks/useNotification/"},(0,i.yg)("inlineCode",{parentName:"a"},"useNotification"))," hook to trigger a notification from within a component. The ",(0,i.yg)("inlineCode",{parentName:"p"},"useNotification")," hook returns the ",(0,i.yg)("inlineCode",{parentName:"p"},"open")," and ",(0,i.yg)("inlineCode",{parentName:"p"},"close")," methods of the notification provider highlighted above."),(0,i.yg)("p",null,"You can then invoke the ",(0,i.yg)("inlineCode",{parentName:"p"},"open")," method to display the notification and the ",(0,i.yg)("inlineCode",{parentName:"p"},"close")," method to close it. The code below illustrates the ",(0,i.yg)("inlineCode",{parentName:"p"},"useNotification")," hook at a very basic level."),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-tsx"},'import { useNotification } from "@refinedev/core";\n\nconst { open, close } = useNotification();\n\n// open notification\nopen?.({\n  key: "notification-key",\n  type: "success",\n  message: "Successfully updated Blog Post",\n  description: "This is a success message",\n});\n\n// close notification\nclose?.("notification-key");\n')),(0,i.yg)("h2",{id:"create-a-notification-provider-with-react-toastify"},"Create a notification provider with react-toastify"),(0,i.yg)("p",null,"In one of the sections above, we created a Refine application using the refine.new platform. In this section, you will learn to create a custom notification provider using react-toastify. Follow the steps below."),(0,i.yg)("h3",{id:"step-1--install-react-toastify"},"Step 1 \u2014 Install react-toastify"),(0,i.yg)("p",null,"Our goal in this article is to create a custom notification system using react-toastify. Open the Refine project you created above in your favorite text editor, and depending on your package manager, use one of the commands below to install react-toastify from the NPM package registry."),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-sh"},"npm install react-toastify\n")),(0,i.yg)("h3",{id:"step-2--set-up-the-notification-provider"},"Step 2 \u2014 Set up the notification provider"),(0,i.yg)("p",null,"As explained above, the ",(0,i.yg)("a",{parentName:"p",href:"https://refine.dev/docs/api-reference/core/components/refine-config/"},(0,i.yg)("inlineCode",{parentName:"a"},"<Refine>"))," component is one of the main components of a Refine application. You will almost always use it to configure the settings for your application."),(0,i.yg)("p",null,"Let's start by creating a dedicated file for our notification provider. Inside the ",(0,i.yg)("inlineCode",{parentName:"p"},"src")," directory, create a new directory and name it ",(0,i.yg)("inlineCode",{parentName:"p"},"providers"),". Inside the ",(0,i.yg)("inlineCode",{parentName:"p"},"providers")," directory, create the ",(0,i.yg)("inlineCode",{parentName:"p"},"notificationProvider.tsx")," file. Copy and paste the code below into it."),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/notifications/notificationProvider.tsx"',title:'"src/notifications/notificationProvider.tsx"'},'import React from "react";\nimport { NotificationProvider } from "@refinedev/core";\nimport { toast } from "react-toastify";\n\nexport const notificationProvider: NotificationProvider = {\n  open: ({ key, message, type, undoableTimeout, cancelMutation }) => {\n    if (toast.isActive(key as React.ReactText)) {\n      toast.update(key as React.ReactText, {\n        render: message,\n        type: "default",\n      });\n\n      return;\n    }\n\n    toast(message, {\n      toastId: key,\n      type: "default",\n    });\n  },\n\n  close: (key: any) => toast.dismiss(key),\n};\n')),(0,i.yg)("p",null,"The ",(0,i.yg)("inlineCode",{parentName:"p"},"toast.isActive")," function takes the notification key as an argument. It returns ",(0,i.yg)("inlineCode",{parentName:"p"},"true")," if the notification is active and ",(0,i.yg)("inlineCode",{parentName:"p"},"false")," otherwise."),(0,i.yg)("p",null,"In the code above, we first checked whether the notification is active using ",(0,i.yg)("inlineCode",{parentName:"p"},"toast.isActive"),". If there is an active toast with the specified key, we update it instead of creating a new one. If there is no active notification with the specified key, we create a new toast."),(0,i.yg)("p",null,"Similarly, you use the ",(0,i.yg)("inlineCode",{parentName:"p"},"toast.dismiss")," function to dismiss an open notification. The ",(0,i.yg)("inlineCode",{parentName:"p"},"toast.dismiss")," function takes the notification key as an argument. The code above is a simple notification provider setup to get us up and running. We will add more functionality later."),(0,i.yg)("p",null,"We need to import the above notification provider into the ",(0,i.yg)("inlineCode",{parentName:"p"},"App.tsx")," file and pass it to the ",(0,i.yg)("inlineCode",{parentName:"p"},"Refine")," component as the value of the ",(0,i.yg)("inlineCode",{parentName:"p"},"notificationProvider")," prop. Modify the ",(0,i.yg)("inlineCode",{parentName:"p"},"App.tsx")," file to include the following code."),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/App.tsx"',title:'"src/App.tsx"'},'...\n//highlight-start\nimport { ToastContainer } from "react-toastify";\nimport { notificationProvider } from "./providers/notificationProvider";\nimport "react-toastify/dist/ReactToastify.min.css";\n//highlight-end\n\n\nfunction App() {\n  ...\n  return (\n    <BrowserRouter>\n        <Refine\n          ...\n          //highlight-next-line\n          notificationProvider={useNotificationProvider}\n          i18nProvider={i18nProvider}\n          ...\n        >\n          <Routes>\n            <Route\n              element={\n                <Layout>\n                  <Outlet />\n                  //highlight-next-line\n                  <ToastContainer />\n                </Layout>\n              }\n            >\n            ...\n            </Route>\n          </Routes>\n          <UnsavedChangesNotifier />\n        </Refine>\n    </BrowserRouter>\n  );\n}\n')),(0,i.yg)("p",null,"Your notification provider setup is now complete. When you edit or create a new blog post, Refine will display a notification."),(0,i.yg)("h3",{id:"step-3--create-custom-undoable-notification-component"},"Step 3 \u2014 Create custom Undoable notification component"),(0,i.yg)("p",null,"You can apply mutations or updates in Refine in three modes. These three modes are the pessimistic, optimistic, and undoable modes. You can set the notification mode of your Refine application using the ",(0,i.yg)("inlineCode",{parentName:"p"},"options")," prop of the ",(0,i.yg)("inlineCode",{parentName:"p"},"Refine")," component."),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/App.tsx"',title:'"src/App.tsx"'},'const App: React.FC = () => {\n  return (\n    <Refine\n        ...\n        options={{ mutationMode: "optimistic" }}\n    />\n    );\n};\n')),(0,i.yg)("p",null,"In the pessimistic mutation mode, Refine applies mutation immediately. It then updates the UI and redirects after mutating successfully. The pessimistic mode is the default."),(0,i.yg)("p",null,"Optimistic mode is where Refine applies the mutation locally and immediately updates UI and redirects irrespective of whether the mutation is successful or not. If the mutation fails, it updates the UI with an appropriate notification message."),(0,i.yg)("p",null,"With the undoable mutation mode, Refine applies the mutation locally and immediately redirects and updates the UI as if the mutation is successful. It then waits for a customizable timeout before applying the mutation. During the timeout, you can cancel the mutation and revert the UI."),(0,i.yg)("p",null,"Therefore, when working with Refine in the undoable mutation mode, you display a notification informing the user of the time left and a button to cancel the mutation. We need a custom component to display the countdown and button for canceling the mutation."),(0,i.yg)("p",null,"In the ",(0,i.yg)("inlineCode",{parentName:"p"},"src/component")," directory, create a new directory and name it ",(0,i.yg)("inlineCode",{parentName:"p"},"undoable-notification"),". In the ",(0,i.yg)("inlineCode",{parentName:"p"},"undoable-notification")," directory you have just created, create the ",(0,i.yg)("inlineCode",{parentName:"p"},"index.tsx")," file. Copy and paste the code below into it."),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/component/undoable-notification/index.tsx"',title:'"src/component/undoable-notification/index.tsx"'},"type UndoableNotification = {\n  message: string;\n  cancelMutation?: () => void;\n  closeToast?: () => void;\n};\n\nexport const UndoableNotification: React.FC<UndoableNotification> = ({\n  closeToast,\n  cancelMutation,\n  message,\n}) => {\n  return (\n    <div>\n      <p>{message}</p>\n      <button\n        onClick={() => {\n          cancelMutation?.();\n          closeToast?.();\n        }}\n      >\n        Undo\n      </button>\n    </div>\n  );\n};\n")),(0,i.yg)("p",null,"In the component above, we display a message to indicate the time left and a button to cancel the mutation and close the notification."),(0,i.yg)("p",null,"When the mutation mode is undoable, Refine will invoke the ",(0,i.yg)("inlineCode",{parentName:"p"},"open")," function and sets the notification type to ",(0,i.yg)("inlineCode",{parentName:"p"},'"progress"'),". It will also set the timeout as the value of the ",(0,i.yg)("inlineCode",{parentName:"p"},"undoableTimeout")," property and the ",(0,i.yg)("inlineCode",{parentName:"p"},"cancelMutation")," function for canceling the mutation within the timeout."),(0,i.yg)("p",null,"Every second, Refine will decrease the value of ",(0,i.yg)("inlineCode",{parentName:"p"},"undoableTimeout")," by 1 until its value reaches 0."),(0,i.yg)("p",null,"Import the ",(0,i.yg)("inlineCode",{parentName:"p"},"UndoableNotification")," component you created above into the ",(0,i.yg)("inlineCode",{parentName:"p"},"src/providers/notificationProvider.tsx")," file. Add the following changes to the notification provider. Pay attention to the ",(0,i.yg)("inlineCode",{parentName:"p"},"open")," method because its body has changed. It will display a custom component when the Refine mutation mode is ",(0,i.yg)("inlineCode",{parentName:"p"},"undoable"),"."),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/providers/notificationProvider.tsx"',title:'"src/providers/notificationProvider.tsx"'},'import React from "react";\nimport { NotificationProvider } from "@refinedev/core";\nimport { toast } from "react-toastify";\n//highlight-next-line\nimport { UndoableNotification } from "../components/undoable-notification";\n\nexport const notificationProvider: NotificationProvider = {\n  open: ({ key, message, type, undoableTimeout, cancelMutation }) => {\n    //highlight-start\n    if (type === "progress") {\n      if (toast.isActive(key as React.ReactText)) {\n        toast.update(key as React.ReactText, {\n          progress: undoableTimeout && (undoableTimeout / 10) * 2,\n          render: (\n            <UndoableNotification\n              message={message}\n              cancelMutation={cancelMutation}\n            />\n          ),\n          type: "default",\n        });\n\n        return;\n      }\n\n      toast(\n        <UndoableNotification\n          message={message}\n          cancelMutation={cancelMutation}\n        />,\n        {\n          toastId: key,\n          updateId: key,\n          closeOnClick: false,\n          closeButton: false,\n          autoClose: false,\n          progress: undoableTimeout && (undoableTimeout / 10) * 2,\n        },\n      );\n\n      return;\n    }\n\n    if (toast.isActive(key as React.ReactText)) {\n      toast.update(key as React.ReactText, {\n        render: message,\n        closeButton: true,\n        autoClose: 5000,\n        type,\n      });\n\n      return;\n    }\n\n    toast(message, {\n      toastId: key,\n      type,\n    });\n    //highlight-end\n  },\n  close: (key) => toast.dismiss(key),\n};\n')),(0,i.yg)("h3",{id:"step-4--preview-notification"},"Step 4 \u2014 Preview notification"),(0,i.yg)("p",null,"You can preview the notification by editing a record. Refine will make updates and display a notification. You can also change the mutation mode of the application to ",(0,i.yg)("inlineCode",{parentName:"p"},"undoable")," using the ",(0,i.yg)("inlineCode",{parentName:"p"},"options")," prop of the Refine component to display the custom component above."),(0,i.yg)("p",null,"##\xa0Performance Considerations with Notifications"),(0,i.yg)("p",null,"I would like to share some ideas about the performance considerations of notifications."),(0,i.yg)("p",null,"When enabling notifications, we should always remember the performance and, of course, remember that our application can grow larger and more complex. Here's a list of a few things I think we should consider:"),(0,i.yg)("p",null,"###\xa0Lazy Loading React-Toastify"),(0,i.yg)("p",null,"Since the ",(0,i.yg)("inlineCode",{parentName:"p"},"react-toastify")," library is a third-party package, we can apply lazy loading to it. This would mean that it loads on demand, potentially reducing the initial load time for our application."),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-tsx"},'import React, { lazy, Suspense } from "react";\n\nconst ToastContainer = lazy(() =>\n  import("react-toastify").then((module) => ({\n    default: module.ToastContainer,\n  })),\n);\n\nfunction App() {\n  return (\n    <Suspense fallback={<div>Loading...</div>}>\n      <ToastContainer />\n      {/* Other components */}\n    </Suspense>\n  );\n}\n')),(0,i.yg)("p",null,"###\xa0Optimize Toast Rendering"),(0,i.yg)("p",null,"If our application is posting tons of toasts, rendering them one after the other can be an issue. It might be worth the effort to batch or limit active toasts to avoid performance bottlenecks."),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-tsx"},'import { toast } from "react-toastify";\n\nfunction notify() {\n  if (toast.isActive("my-toast-id")) return;\n\n  toast("New message received!", {\n    toastId: "my-toast-id", // Use a specific ID to prevent duplicate toasts\n    autoClose: 3000,\n    limit: 3, // Limit the number of toasts on screen\n  });\n}\n')),(0,i.yg)("p",null,"###\xa0Customization of Auto Close Timings"),(0,i.yg)("p",null,"Customization of auto-close timings for notifications according to their importance level helps in maintaining the responsiveness of the UI. For example, lower durations for non-critical notifications will keep the screen clear and memory usage low."),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-tsx"},'import { toast } from "react-toastify";\n\nfunction notify() {\n  // Less critical notification\n  toast.info("Information message", {\n    autoClose: 2000, // Shorter duration\n  });\n\n  // Critical notification\n  toast.error("Error occurred!", {\n    autoClose: 8000, // Longer duration for important messages\n  });\n}\n')),(0,i.yg)("p",null,"###\xa0Monitoring Performance\nWe should also look to establish some monitoring regarding the performance implications of notifications over time as more and more features are put in. This way, we can detect a slowdown at an early stage and correct it before it becomes a bigger problem."),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-tsx"},'console.time("Toast Render Time");\ntoast.success("Operation successful!", {\n  onOpen: () => console.timeEnd("Toast Render Time"),\n});\n')),(0,i.yg)("h2",{id:"conclusion"},"Conclusion"),(0,i.yg)("p",null,"Having a notification system is inevitable when building complex distributed systems. It notifies users when an event or changes occur in the database."),(0,i.yg)("p",null,"Refine comes with a robust and customizable notification system when you use one of the supported UI or design systems like Material UI, Chakra UI, and Mantine."),(0,i.yg)("p",null,"Refine gives you the flexibility to build a custom notification provider using a notification library like react-toastify if the built-in notification system of the supported UI or design system doesn't meet your needs."))}m.isMDXComponent=!0}}]);