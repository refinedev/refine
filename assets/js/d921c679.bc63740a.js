"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[18506],{88123:(e,n,t)=>{t.d(n,{O:()=>g});var r=t(68835),a=t(37953),o=t(86743),i=t(59451),s=t(62201);const l=({horizontalSize:e,onMouseDown:n})=>a.createElement("div",{className:(0,r.A)("resize-handler","hidden","md:block","absolute","z-[3]","top-0","bottom-0","w-2.5","cursor-ew-resize"),"data-direction":"horizontal",onMouseDown:n,style:{left:`calc(${e}% - 5px)`}});function p(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function d(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){p(e,n,t[n])}))}return e}function c(e,n){return n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})),e}function u(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}const g=e=>"nextjs"===(null==e?void 0:e.template)?a.createElement(f,e):a.createElement(m,e),m=e=>{var n,t,p,g,m,h,{startRoute:f,showNavigator:v,showLineNumbers:x,showOpenInCodeSandbox:b,initialPercentage:N=50,dependencies:w,showReadOnly:C,options:P={showTabs:!0,initMode:"lazy",classes:{"sp-bridge-frame":"!hidden","sp-layout":"!rounded-lg !border-gray-300 dark:!border-gray-700","sp-editor":"!gap-0 border-r !border-r-gray-300 dark:!border-r-gray-700","sp-tabs":"!border-b-gray-300 dark:!border-b-gray-700 !bg-gray-0 dark:!bg-gray-800","sp-tabs-scrollable-container":"!min-h-[32px]","sp-input":"!text-gray-800 dark:!text-gray-100","sp-cm":(0,r.A)("p-0 bg-transparent","[&>.cm-editor]:!bg-refine-react-light-code","[&>.cm-editor]:dark:!bg-refine-react-dark-code","[&_.cm-activeLine]:!bg-gray-100 [&_.cm-activeLine]:dark:!bg-gray-800"),"sp-icon-standalone":"!bg-gray-300 dark:!bg-gray-700 !text-gray-400 dark:!text-gray-500","sp-file-explorer":"border-r !border-r-gray-300 dark:!border-r-gray-700","sp-console":(0,r.A)("not-prose","!border-t-0 !border !border-solid !border-t-none","!border-gray-300 dark:!border-gray-700","!rounded-bl-lg !rounded-br-lg","!bg-refine-react-light-code","dark:!bg-refine-react-dark-code"),"sp-console-header":(0,r.A)("!bg-gray-0 dark:!bg-gray-800","border-b border-solid !border-b-gray-300 dark:!border-b-gray-700","!h-[32px] !min-h-[32px]"),"sp-console-header-actions":(0,r.A)("h-full","!gap-0"),"sp-console-header-button":(0,r.A)("!bg-transparent","!border !border-solid !border-b-0 !border-x-gray-300 dark:!border-x-gray-700","!border-t-2 !border-t-transparent [&[data-active='true']]:!border-t-refine-react-light-link dark:[&[data-active='true']]:!border-t-refine-react-dark-link","h-full","!text-gray-800 dark:!text-gray-100","!rounded-none","-ml-px"),"sp-console-list":(0,r.A)("!bg-refine-react-light-code","dark:!bg-refine-react-dark-code","[&>code]:!bg-transparent"),"sp-tab-button":(0,r.A)("!h-8","!px-2 !pb-2 !pt-1.5","!text-gray-800 dark:!text-gray-100","!border !border-solid !border-b-0 !border-x-gray-300 dark:!border-x-gray-700","-ml-px first:ml-0","!border-t-2 !border-t-transparent [&[data-active='true']]:!border-t-refine-react-light-link dark:[&[data-active='true']]:!border-t-refine-react-dark-link")}},template:k="react-ts",customSetup:T,files:R,previewOnly:D,layout:S,height:L=420,wrapperClassName:j,className:A,showFiles:I=!1,showConsole:O=!1,hidePreview:E=!1}=e,U=u(e,["startRoute","showNavigator","showLineNumbers","showOpenInCodeSandbox","initialPercentage","dependencies","showReadOnly","options","template","customSetup","files","previewOnly","layout","height","wrapperClassName","className","showFiles","showConsole","hidePreview"]);const[F,W]=a.useState(!1);a.useEffect((()=>{W(!0)}),[]);const{colorMode:z}=(0,s.G)();var M,H;null!=P||(P={}),null!==(M=(m=P).resizablePanels)&&void 0!==M||(m.resizablePanels=!0),null!==(H=(h=P).editorWidthPercentage)&&void 0!==H||(h.editorWidthPercentage=null!=N?N:50);const q={showTabs:P.showTabs,showLineNumbers:P.showLineNumbers,showInlineErrors:P.showInlineErrors,wrapContent:P.wrapContent,closableTabs:P.closableTabs,initMode:P.initMode,extensions:null===(n=P.codeEditor)||void 0===n?void 0:n.extensions,extensionsKeymap:null===(t=P.codeEditor)||void 0===t?void 0:t.extensionsKeymap,readOnly:P.readOnly,showReadOnly:null!=C?C:P.showReadOnly,additionalLanguages:null===(p=P.codeEditor)||void 0===p?void 0:p.additionalLanguages},_={activeFile:P.activeFile,visibleFiles:P.visibleFiles,recompileMode:P.recompileMode,recompileDelay:P.recompileDelay,autorun:P.autorun,autoReload:P.autoReload,bundlerURL:P.bundlerURL,startRoute:P.startRoute,skipEval:P.skipEval,fileResolver:P.fileResolver,initMode:P.initMode,initModeObserverOptions:P.initModeObserverOptions,externalResources:P.externalResources,logLevel:P.logLevel,classes:P.classes},[B,Y]=a.useState(!1),{onHandleMouseDown:$,horizontalSize:G}=(({initialSize:e=50})=>{const[n,t]=a.useState(e),r=a.useRef(null),o=e=>{if(!r.current)return;const n=r.current.parentElement;if(!n)return;const{left:a,width:o}=n.getBoundingClientRect(),i=(e.clientX-a)/o*100,s=Math.min(Math.max(i,25),75);t(s),n.querySelectorAll(".sp-stack").forEach((e=>{e.style.pointerEvents="none"}))},i=()=>{var e;const n=null===(e=r.current)||void 0===e?void 0:e.parentElement;n&&(n.querySelectorAll(".sp-stack").forEach((e=>{e.style.pointerEvents=""})),r.current=null)};return a.useEffect((()=>(document.body.addEventListener("mousemove",o),document.body.addEventListener("mouseup",i),()=>{document.body.removeEventListener("mousemove",o),document.body.removeEventListener("mouseup",i)})),[]),{horizontalSize:n,onHandleMouseDown:a.useCallback((e=>{r.current=e.target}),[])}})({initialSize:P.editorWidthPercentage}),J=!D&&!(null==S?void 0:S.includes("col"));var Q,K,X,Z,V;return a.createElement(a.Fragment,null,a.createElement("div",{className:(0,r.A)("pb-6","refine-sandpack-wrapper",j)},a.createElement("div",{className:(0,r.A)("absolute","left-0","right-0","w-full","px-2","md:px-4","xl:px-6","max-w-screen-xl","mx-auto",A)},a.createElement(i.l5,d({key:`${k}-${z}-${F}`,customSetup:d({dependencies:w},T),files:R,options:c(d({},_),{classes:c(d({},_.classes),{"sp-layout":(0,r.A)(null===(g=_.classes)||void 0===g?void 0:g["sp-layout"],O&&"!rounded-bl-none !rounded-br-none")})}),template:k,theme:"light"===z?c(d({},o.Zw),{colors:c(d({},o.Zw.colors),{accent:"#1D1E30",surface1:"transparent",surface2:"transparent",surface3:"transparent"})}):c(d({},o.hc),{colors:c(d({},o.hc.colors),{surface1:"transparent",surface2:"transparent",surface3:"transparent"})}),className:(0,r.A)("not-prose sandpack-container","max-w-screen-xl","animate-reveal")},U),a.createElement(i.am,{className:(0,r.A)("col"===S&&"!flex-col","col-reverse"===S&&"!flex-col-reverse")},I&&a.createElement(i.Lm,{autoHiddenFiles:!0,style:{height:null!==(Q=P.editorHeight)&&void 0!==Q?Q:L}}),!D&&a.createElement(i.cW,c(d({},q),{showLineNumbers:x,closableTabs:I,initMode:"lazy",style:c(d({height:null!==(K=P.editorHeight)&&void 0!==K?K:L},(null==S?void 0:S.includes("col"))?{flex:"initial"}:{flexGrow:G,flexShrink:G,flexBasis:0}),{overflow:"hidden"})})),J?a.createElement(l,{onMouseDown:$,horizontalSize:G}):null,E?null:a.createElement(a.Fragment,null,a.createElement(i.G5,{showOpenInCodeSandbox:b,startRoute:f,showNavigator:null!=v?v:P.showNavigator,showRefreshButton:P.showRefreshButton,style:c(d({display:E?"none":"flex"},(null==S?void 0:S.includes("col"))?{flex:"initial",width:"100%"}:{flexGrow:100-G,flexShrink:100-G,flexBasis:0,width:D?"100%":100-G+"%"}),{gap:0,height:null!==(X=P.editorHeight)&&void 0!==X?X:L})},a.createElement("div",{className:"sp-custom-loading"},a.createElement("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/website/static/assets/spinner.gif",className:(0,r.A)("w-12","h-12","rounded-full")}))))),O?a.createElement(i.X2,{style:c(d({height:200},(null==S?void 0:S.includes("col"))?{flex:"initial"}:{flexGrow:G,flexShrink:G,flexBasis:0}),{overflow:"hidden"})}):null)),a.createElement("div",{className:(0,r.A)(""),style:{height:Number(null!==(Z=P.editorHeight)&&void 0!==Z?Z:L)+2}}),a.createElement("div",{className:(0,r.A)((null==S?void 0:S.includes("col"))?"block":"block md:hidden"),style:{height:Number(null!==(V=P.editorHeight)&&void 0!==V?V:L)+2}}),a.createElement("div",{className:(0,r.A)(O?"block":"hidden","h-[200px]")})),a.createElement(y,{files:R,dependencies:w}))},y=({files:e,dependencies:n})=>{Object.keys(null!=n?n:{}).map((e=>`${e}@${n[e]}`)).join(", ");const t=Object.keys(null!=e?e:{}).filter((n=>"string"==typeof e[n]||"object"==typeof e[n]&&!0!==e[n].hidden));return a.createElement("section",{className:"hidden max-w-0 max-h-0"},a.createElement("h6",null,"Code Example"),t.map((n=>a.createElement("div",{"data-filename":n,key:n},a.createElement("pre",null,`// file: ${n} \n`,h(e[n]))))))},h=e=>"string"==typeof e?e:"code"in e?e.code:"",f=e=>{const n={hidePreview:!0,showConsole:!1};return a.createElement(m,c(d({},n,e),{template:"react-ts"}))}},69772:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>C,contentTitle:()=>N,default:()=>O,frontMatter:()=>b,metadata:()=>w,toc:()=>P});var r=t(37953),a=t(58860),o=t(88123);function i(){return r.createElement(o.O,{template:"nextjs",showFiles:!0,showConsole:!1,showNavigator:!0,hidePreview:!0,startRoute:"/",files:{"/pages/index.js":{code:"// See /src/app/page.tsx",hidden:!0},"/src/app/layout.tsx":{code:l.trim(),active:!0},"/src/app/page.tsx":{code:s.trim()},"/src/constants.tsx":{code:p.trim()},"/src/providers/access-control/access-control.tsx":{code:d.trim()},"/src/providers/access-control/access-control.server.tsx":{code:c.trim()},"/src/providers/access-control/access-control.client.tsx":{code:u.trim()},"/src/providers/data-provider/data-provider.server.tsx":{code:g.trim()},"/src/providers/data-provider/data-provider.client.tsx":{code:m.trim()},"/src/providers/auth-provider/auth-provider.server.tsx":{code:y.trim()},"/src/providers/auth-provider/auth-provider.client.tsx":{code:h.trim()}}})}const s='\nimport { authProviderServer } from "@providers/auth-provider/auth-provider.server";\nimport { accessControlProviderServer } from "@providers/access-control/access-control.server";\nimport { dataProviderServer } from "@providers/data-provider/data-provider.server";\nimport { redirect } from "next/navigation";\n\nexport default async function IndexPage() {\n    const { hasAuth, hasPermission, data } = await getData();\n\n    if (!hasAuth) {\n        return redirect("/login");\n    }\n\n    if (!hasPermission) {\n        return <h1>Unauthorized</h1>;\n    }\n\n    return (\n        <div>\n            <h1>Posts</h1>\n            <ul>\n                {data?.map((post: any) => (\n                    <li key={post.id}>{post.title}</li>\n                ))}\n            </ul>\n        </div>\n    );\n}\n\nasync function getData() {\n    const hasAuth = await authProviderServer.check();\n    const hasPermission = await accessControlProviderServer.can({\n        action: "list",\n        resource: "posts",\n    });\n\n    let data = null;\n    if (hasAuth && hasPermission) {\n        data = await dataProviderServer.getList({\n            resource: "posts",\n        });\n    }\n\n    return {\n        hasAuth,\n        hasPermission,\n        data,\n    };\n}\n',l='\nimport { Refine } from "@refinedev/core";\nimport routerProvider from "@refinedev/nextjs-router";\nimport React, { Suspense } from "react";\n\nimport { authProviderClient } from "@providers/auth-provider/auth-provider";\nimport { dataProviderClient } from "@providers/data-provider/data-provider.client";\nimport { accessControlProviderClient } from "@providers/access-control/access-control.client";\n\nexport default function RootLayout({\n    children,\n}: Readonly<{\n    children: React.ReactNode;\n}>) {\n    return (\n        <html lang="en">\n            <body>\n                <Suspense>\n                    <Refine\n                        routerProvider={routerProvider}\n                        dataProvider={dataProviderClient}\n                        authProvider={authProviderClient}\n                        accessControlProvider={accessControlProviderClient}\n                        resources={[\n                            {\n                                name: "blog_posts",\n                                list: "/blog-posts",\n                                create: "/blog-posts/create",\n                                edit: "/blog-posts/edit/:id",\n                                show: "/blog-posts/show/:id",\n                                meta: {\n                                    canDelete: true,\n                                },\n                            },\n                        ]}\n                    >\n                        {children}\n                    </Refine>\n                </Suspense>\n            </body>\n        </html>\n    );\n}\n',p='\nexport const API_URL = "https://api.fake-rest.refine.dev";\n\n',d='\nimport { AccessControlProvider } from "@refinedev/core";\n\nexport const accessControlProvider: AccessControlProvider = {\n    can: async ({ resource, action }) => {\n        if (resource === "posts" && action === "edit") {\n            return {\n                can: false,\n                reason: "Unauthorized",\n            };\n        }\n\n        return { can: true };\n    },\n};\n\n',c='\nimport { accessControlProvider } from "./access-control";\n\nexport const accessControlProviderServer = accessControlProvider;\n\n',u='\n"use client";\n\nimport { accessControlProvider } from "./access-control";\n\nexport const accessControlProviderClient = accessControlProvider;\n\n',g='\nimport { API_URL } from "@constants";\nimport dataProviderSimpleRest from "@refinedev/simple-rest";\n\nexport const dataProviderServer = dataProviderSimpleRest(API_URL);\n\n',m='\n"use client";\n\nimport { API_URL } from "@constants";\nimport dataProviderSimpleRest from "@refinedev/simple-rest";\n\nexport const dataProviderClient = dataProviderSimpleRest(API_URL);\n\n',y='\nimport { AuthBindings } from "@refinedev/core";\nimport { cookies } from "next/headers";\n\nexport const authProviderServer: Pick<AuthBindings, "check"> = {\n    check: async () => {\n        const cookieStore = cookies();\n        const auth = cookieStore.get("auth");\n\n        if (auth) {\n            return {\n                authenticated: true,\n            };\n        }\n\n        return {\n            authenticated: false,\n            logout: true,\n            redirectTo: "/login",\n        };\n    },\n};\n\n',h='\n"use client";\n\nimport { AuthBindings } from "@refinedev/core";\nimport Cookies from "js-cookie";\n\nconst mockUsers = [\n    {\n        email: "admin@refine.dev",\n        name: "John Doe",\n        avatar: "https://i.pravatar.cc/150?img=1",\n        roles: ["admin"],\n    },\n    {\n        email: "editor@refine.dev",\n        name: "Jane Doe",\n        avatar: "https://i.pravatar.cc/150?img=1",\n        roles: ["editor"],\n    },\n    {\n        email: "demo@refine.dev",\n        name: "Jane Doe",\n        avatar: "https://i.pravatar.cc/150?img=1",\n        roles: ["user"],\n    },\n];\n\nexport const authProviderClient: AuthBindings = {\n    login: async ({ email, username, password, remember }) => {\n        // Suppose we actually send a request to the back end here.\n        const user = mockUsers.find((item) => item.email === email);\n\n        if (user) {\n            Cookies.set("auth", JSON.stringify(user), {\n                expires: 30, // 30 days\n                path: "/",\n            });\n            return {\n                success: true,\n                redirectTo: "/",\n            };\n        }\n\n        return {\n            success: false,\n            error: {\n                name: "LoginError",\n                message: "Invalid username or password",\n            },\n        };\n    },\n    register: async (params) => {\n        // Suppose we actually send a request to the back end here.\n        const user = mockUsers.find((item) => item.email === params.email);\n\n        if (user) {\n            Cookies.set("auth", JSON.stringify(user), {\n                expires: 30, // 30 days\n                path: "/",\n            });\n            return {\n                success: true,\n                redirectTo: "/",\n            };\n        }\n        return {\n            success: false,\n            error: {\n                message: "Register failed",\n                name: "Invalid email or password",\n            },\n        };\n    },\n    forgotPassword: async (params) => {\n        // Suppose we actually send a request to the back end here.\n        const user = mockUsers.find((item) => item.email === params.email);\n\n        if (user) {\n            //we can send email with reset password link here\n            return {\n                success: true,\n            };\n        }\n        return {\n            success: false,\n            error: {\n                message: "Forgot password failed",\n                name: "Invalid email",\n            },\n        };\n    },\n    updatePassword: async (params) => {\n        // Suppose we actually send a request to the back end here.\n        const isPasswordInvalid =\n            params.password === "123456" || !params.password;\n\n        if (isPasswordInvalid) {\n            return {\n                success: false,\n                error: {\n                    message: "Update password failed",\n                    name: "Invalid password",\n                },\n            };\n        }\n\n        return {\n            success: true,\n        };\n    },\n    logout: async () => {\n        Cookies.remove("auth", { path: "/" });\n        return {\n            success: true,\n            redirectTo: "/login",\n        };\n    },\n    check: async () => {\n        const auth = Cookies.get("auth");\n        if (auth) {\n            return {\n                authenticated: true,\n            };\n        }\n\n        return {\n            authenticated: false,\n            logout: true,\n            redirectTo: "/login",\n        };\n    },\n    getPermissions: async () => {\n        const auth = Cookies.get("auth");\n        if (auth) {\n            const parsedUser = JSON.parse(auth);\n            return parsedUser.roles;\n        }\n        return null;\n    },\n    getIdentity: async () => {\n        const auth = Cookies.get("auth");\n        if (auth) {\n            const parsedUser = JSON.parse(auth);\n            return parsedUser;\n        }\n        return null;\n    },\n    onError: async (error) => {\n        if (error.response?.status === 401) {\n            return {\n                logout: true,\n            };\n        }\n\n        return { error };\n    },\n};\n\n';function f(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function v(e,n){return n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})),e}function x(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}const b={title:"Next.js"},N=void 0,w={unversionedId:"routing/integrations/next-js/index",id:"version-4.xx.xx/routing/integrations/next-js/index",title:"Next.js",description:"Refine provides router bindings and utilities for Next.js. This package will provide easy integration between Refine and Next.js for both existing projects and new projects without giving up the benefits of Next.js.",source:"@site/versioned_docs/version-4.xx.xx/routing/integrations/next-js/index.md",sourceDirName:"routing/integrations/next-js",slug:"/routing/integrations/next-js/",permalink:"/docs/4.xx.xx/routing/integrations/next-js/",draft:!1,editUrl:"https://github.com/refinedev/refine/tree/main/documentation/versioned_docs/version-4.xx.xx/routing/integrations/next-js/index.md",tags:[],version:"4.xx.xx",lastUpdatedBy:"Alican Erdurmaz",lastUpdatedAt:1755000415,formattedLastUpdatedAt:"Aug 12, 2025",frontMatter:{title:"Next.js"},sidebar:"mainSidebar",previous:{title:"v6 to v7",permalink:"/docs/4.xx.xx/routing/integrations/react-router/migration-guide-v6-to-v7"},next:{title:"Remix",permalink:"/docs/4.xx.xx/routing/integrations/remix/"}},C={},P=[{value:"Basic Usage",id:"basic-usage",level:2},{value:"<code>/app</code> Directory",id:"app-directory",level:3},{value:"<code>/pages</code> Directory",id:"pages-directory",level:3},{value:"Additional Components",id:"additional-components",level:2},{value:"NavigateToResource",id:"navigatetoresource",level:3},{value:"In <code>app/page.tsx</code>",id:"in-apppagetsx",level:4},{value:"In <code>pages/index.tsx</code>",id:"in-pagesindextsx",level:4},{value:"Properties",id:"properties",level:4},{value:"UnsavedChangesNotifier",id:"unsavedchangesnotifier",level:3},{value:"Properties",id:"properties-1",level:4},{value:"parseTableParams",id:"parsetableparams",level:3},{value:"DocumentTitleHandler",id:"documenttitlehandler",level:3},{value:"Properties",id:"properties-2",level:4},{value:"Hooks",id:"hooks",level:2},{value:"useDocumentTitle",id:"usedocumenttitle",level:3},{value:"Authentication",id:"authentication",level:2},{value:"Client side",id:"client-side",level:3},{value:"Server Side",id:"server-side",level:3},{value:"<code>app</code> directory",id:"app-directory-1",level:4},{value:"<code>pages</code> directory",id:"pages-directory-1",level:4},{value:"Access Control",id:"access-control",level:2},{value:"Client Side",id:"client-side-1",level:3},{value:"Server Side",id:"server-side-1",level:3},{value:"<code>app</code> directory",id:"app-directory-2",level:4},{value:"<code>pages</code> directory",id:"pages-directory-2",level:4},{value:"FAQ",id:"faq",level:2},{value:"How can I use my providers in the both server and client side?",id:"how-can-i-use-my-providers-in-the-both-server-and-client-side",level:3},{value:"Can I use nested routes?",id:"can-i-use-nested-routes",level:3},{value:"How to make SSR work?",id:"how-to-make-ssr-work",level:3},{value:"How to persist <code>syncWithLocation</code> in SSR?",id:"how-to-persist-syncwithlocation-in-ssr",level:3},{value:"How to use multiple layouts?",id:"how-to-use-multiple-layouts",level:3},{value:"Handling 404s",id:"handling-404s",level:3},{value:"<code>RefineRoutes</code> Component",id:"refineroutes-component",level:3},{value:"How to change the document title?",id:"how-to-change-the-document-title",level:3},{value:"Example (<code>/app</code>)",id:"example-app",level:2}],k=e=>function(n){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,a.yg)("div",n)},T=k("InstallPackagesCommand"),R=k("CreateRefineAppCommand"),D=k("DocThumbsUpDownFeedbackWidget"),S=k("Tabs"),L=k("TabItem"),j=k("CodeSandboxExample"),A={toc:P},I="wrapper";function O(e){var{components:n}=e,t=x(e,["components"]);return(0,a.yg)(I,v(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){f(e,n,t[n])}))}return e}({},A,t),{components:n,mdxType:"MDXLayout"}),(0,a.yg)("p",null,"Refine provides router bindings and utilities for ",(0,a.yg)("a",{parentName:"p",href:"https://nextjs.org/"},"Next.js"),". This package will provide easy integration between Refine and ",(0,a.yg)("strong",{parentName:"p"},"Next.js")," for both existing projects and new projects without giving up the benefits of ",(0,a.yg)("strong",{parentName:"p"},"Next.js"),"."),(0,a.yg)(T,{args:"@refinedev/nextjs-router",mdxType:"InstallPackagesCommand"}),(0,a.yg)("p",null,"We recommend using ",(0,a.yg)("inlineCode",{parentName:"p"},"create refine-app")," to initialize your Refine projects. It configures the project according to your needs including SSR with Next.js!"),(0,a.yg)(R,{args:"-o refine-nextjs my-refine-nextjs-app",mdxType:"CreateRefineAppCommand"}),(0,a.yg)("p",null,(0,a.yg)("a",{parentName:"p",href:"/docs/routing/router-provider"},"Refer to the Router Provider documentation for detailed information. ","\u2192")),(0,a.yg)("h2",{id:"basic-usage"},"Basic Usage"),(0,a.yg)("h3",{id:"app-directory"},(0,a.yg)("inlineCode",{parentName:"h3"},"/app")," Directory"),(0,a.yg)(D,{id:"app-directory",mdxType:"DocThumbsUpDownFeedbackWidget"},(0,a.yg)("p",null,"We'll use the ",(0,a.yg)("inlineCode",{parentName:"p"},"routerProvider")," from ",(0,a.yg)("inlineCode",{parentName:"p"},"@refinedev/nextjs-router")," to set up the router bindings for Refine. We'll define the action routes for our resources in the ",(0,a.yg)("inlineCode",{parentName:"p"},"resources")," array and define our pages in the ",(0,a.yg)("inlineCode",{parentName:"p"},"app")," directory."),(0,a.yg)("p",null,"We'll create four routes for our resources:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"app/posts/page.tsx")," - List page for posts"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"app/posts/show/[id]/page.tsx")," - Detail page for posts"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"app/categories/page.tsx")," - List page for categories"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"app/categories/show/[id]/page.tsx")," - Detail page for categories")),(0,a.yg)("p",null,"And we'll create one route for the index and use it to redirect to the ",(0,a.yg)("inlineCode",{parentName:"p"},"posts")," resource:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"app/page.tsx")," - Index page")),(0,a.yg)("p",null,"Let's start with the initialization of the Refine app in the ",(0,a.yg)("inlineCode",{parentName:"p"},"app/layout.tsx")," file:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:"title=app/layout.tsx",title:"app/layout.tsx"},'import { Refine } from "@refinedev/core";\nimport dataProvider from "@refinedev/simple-rest";\nimport routerProvider from "@refinedev/nextjs-router";\n\nimport { Layout } from "components/Layout";\n\nexport default function RootLayout({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  return (\n    <html lang="en">\n      <body>\n        <Refine\n          dataProvider={dataProvider("https://api.fake-rest.refine.dev")}\n          // highlight-next-line\n          routerProvider={routerProvider}\n          resources={[\n            {\n              name: "posts",\n              list: "/posts",\n              show: "/posts/show/:id",\n            },\n            {\n              name: "categories",\n              list: "/categories",\n              show: "/categories/show/:id",\n            },\n          ]}\n        >\n          {/* We\'re defining `Layout` here but you might want to have different layouts per your page. */}\n          {/* This is totally fine for Refine, you can place your Layout wherever you like. */}\n          <Layout>{children}</Layout>\n        </Refine>\n      </body>\n    </html>\n  );\n}\n')),(0,a.yg)("blockquote",null,(0,a.yg)("p",{parentName:"blockquote"},"\ud83d\udea8 Refer to the ",(0,a.yg)("a",{parentName:"p",href:"#how-can-i-use-my-providers-in-the-both-server-and-client-side"},"FAQ section")," for instructions on using providers in both client and server components.")),(0,a.yg)("admonition",{title:"Good to know",type:"simple"},(0,a.yg)("ul",{parentName:"admonition"},(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("p",{parentName:"li"},"Next.js uses the bracket syntax (",(0,a.yg)("inlineCode",{parentName:"p"},"[param]"),") for dynamic routes but Refine uses the colon syntax (",(0,a.yg)("inlineCode",{parentName:"p"},":param"),") for route parameters. This won't cause any problems since Refine only uses the colon syntax as an indicator for route parameters and the communication between Refine and the router is handled by the ",(0,a.yg)("inlineCode",{parentName:"p"},"routerProvider")," prop.")),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("p",{parentName:"li"},"Since ",(0,a.yg)("inlineCode",{parentName:"p"},"<Refine />")," is heavily using React context and React state, it's needed to be a client component, and we can't pass functions into the Refine component unless we mark them as ",(0,a.yg)("inlineCode",{parentName:"p"},"client")," functions(dataProvider, authProvider etc.) with ",(0,a.yg)("inlineCode",{parentName:"p"},'"use client";')," directive. See the solution for this in the ",(0,a.yg)("a",{parentName:"p",href:"#how-can-i-use-my-providers-in-the-both-server-and-client-side"},"FAQ")," section.")))),(0,a.yg)("p",null,"Your action definitions in the resources can contain additional parameters and nested routes. Passing these parameters when navigating to the pages are handled by the current available parameters and the ",(0,a.yg)("inlineCode",{parentName:"p"},"meta")," props of the related hooks and components."),(0,a.yg)("p",null,"Refine supports route parameters defined with ",(0,a.yg)("inlineCode",{parentName:"p"},":param")," syntax. You can use these parameters in your action definitions and create your routes accordingly. For example, if you have a ",(0,a.yg)("inlineCode",{parentName:"p"},"posts")," resource and you want to create a route for the ",(0,a.yg)("inlineCode",{parentName:"p"},"show")," action of a specific post, you can define the ",(0,a.yg)("inlineCode",{parentName:"p"},"show")," action as ",(0,a.yg)("inlineCode",{parentName:"p"},"/posts/show/:id")," and use the ",(0,a.yg)("inlineCode",{parentName:"p"},"id")," parameter in your component."),(0,a.yg)("p",null,"Now we can create our pages in the ",(0,a.yg)("inlineCode",{parentName:"p"},"app")," directory:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:"title=app/posts/page.tsx",title:"app/posts/page.tsx"},'"use client";\n\nimport { useTable } from "@refinedev/core";\nimport Link from "next/link";\n\ntype IPost = {\n  id: string;\n  title: string;\n  description: string;\n};\n\nexport default function PostList() {\n  // `posts` resource will be inferred from the route.\n  // Because we\'ve defined `/posts` as the `list` action of the `posts` resource.\n  const {\n    tableQuery: { data, isLoading },\n  } = useTable<IPost>();\n\n  const tableData = data?.data;\n\n  return (\n    <div>\n      {isLoading && <p>Loading...</p>}\n      {!isLoading && (\n        <ul>\n          {tableData?.map((post) => (\n            <li key={post.id}>\n              <Link href={`/posts/show/${post.id}`}>{post.title}</Link>\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n}\n')),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:"title=pages/posts/show/[id]/page.tsx",title:"pages/posts/show/[id]/page.tsx"},'"use client";\n\nimport { useShow } from "@refinedev/core";\n\ntype IPost = {\n    id: string;\n    title: string;\n    description: string;\n}\n\nexport default function PostShow() {\n    // `posts` resource and the `id` will be inferred from the route.\n    // Because we\'ve defined `/posts/show/:id` as the `show` action of the `posts` resource.\n    const { queryResult: { data, isLoading } } = useShow<IPost>();\n\n    const postData = data?.data;\n\n    return (\n        <div>\n            {isLoading && <p>Loading...</p>}\n            {!isLoading && (\n                <h1>{postData?.title}</h1>\n                <p>{postData?.description}</p>\n            )}\n        </div>\n    );\n}\n')),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:"title=pages/categories/page.tsx",title:"pages/categories/page.tsx"},'"use client";\n\nimport { useTable } from "@refinedev/core";\nimport Link from "next/link";\n\ntype ICategory = {\n  id: string;\n  label: string;\n};\n\nexport default function CategoryList() {\n  // `categories` resource will be inferred from the route.\n  // Because we\'ve defined `/categories` as the `list` action of the `categories` resource.\n  const {\n    tableQuery: { data, isLoading },\n  } = useTable<ICategory>();\n\n  const tableData = data?.data;\n\n  return (\n    <div>\n      {isLoading && <p>Loading...</p>}\n      {!isLoading && (\n        <ul>\n          {tableData?.map((category) => (\n            <li key={category.id}>\n              <Link href={`/categories/show/${category.id}`}>\n                {category.label}\n              </Link>\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n}\n')),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:"title=pages/categories/show/[id]/page.tsx",title:"pages/categories/show/[id]/page.tsx"},'"use client";\n\nimport { useShow } from "@refinedev/core";\n\ntype ICategory = {\n  id: string;\n  label: string;\n};\n\nexport default function CategoryShow() {\n  // `categories` resource and the `id` will be inferred from the route.\n  // Because we\'ve defined `/categories/show/:id` as the `show` action of the `categories` resource.\n  const {\n    queryResult: { data, isLoading },\n  } = useShow<ICategory>();\n\n  const categoryData = data?.data;\n\n  return (\n    <div>\n      <h1>{categoryData?.label}</h1>\n    </div>\n  );\n}\n')),(0,a.yg)("p",null,"Now, we'll use ",(0,a.yg)("a",{parentName:"p",href:"#navigatetoresource"},(0,a.yg)("inlineCode",{parentName:"a"},"NavigateToResource"))," component to redirect to the ",(0,a.yg)("inlineCode",{parentName:"p"},"posts")," resource when the user visits the home page."),(0,a.yg)("admonition",{title:"Implementation Tips",type:"simple"},(0,a.yg)("p",{parentName:"admonition"},"Even though we're using the ",(0,a.yg)("inlineCode",{parentName:"p"},"NavigateToResource")," component, when using Next.js it's better to handle such redirect operations in the server side rather than the client side. You can use the ",(0,a.yg)("inlineCode",{parentName:"p"},"getServerSideProps")," function to redirect the user to the ",(0,a.yg)("inlineCode",{parentName:"p"},"/posts"),".")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:"title=app/page.tsx",title:"app/page.tsx"},'"use client";\n\nimport { NavigateToResource } from "@refinedev/nextjs-router";\n\nexport default function IndexPage() {\n  return <NavigateToResource />;\n}\n'))),(0,a.yg)("h3",{id:"pages-directory"},(0,a.yg)("inlineCode",{parentName:"h3"},"/pages")," Directory"),(0,a.yg)(D,{id:"pages-directory",mdxType:"DocThumbsUpDownFeedbackWidget"},(0,a.yg)("p",null,"We'll use the ",(0,a.yg)("inlineCode",{parentName:"p"},"routerProvider")," from ",(0,a.yg)("inlineCode",{parentName:"p"},"@refinedev/nextjs-router")," to set up the router bindings for Refine. We'll define the action routes for our resources in the ",(0,a.yg)("inlineCode",{parentName:"p"},"resources")," array and define our pages in the ",(0,a.yg)("inlineCode",{parentName:"p"},"pages")," directory."),(0,a.yg)("p",null,"We'll create four pages for our resources:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"pages/posts/index.tsx")," - List page for posts"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"pages/posts/show/[id].tsx")," - Detail page for posts"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"pages/categories/index.tsx")," - List page for categories"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"pages/categories/show/[id].tsx")," - Detail page for categories")),(0,a.yg)("p",null,"And we'll create one page for the index route and use it to redirect to the ",(0,a.yg)("inlineCode",{parentName:"p"},"posts")," resource:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"pages/index.tsx")," - Index page")),(0,a.yg)("p",null,"Let's start with the initialization of the Refine app in the ",(0,a.yg)("inlineCode",{parentName:"p"},"_app.tsx")," file:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:"title=_app.tsx",title:"_app.tsx"},'import { Refine } from "@refinedev/core";\nimport dataProvider from "@refinedev/simple-rest";\nimport routerProvider from "@refinedev/nextjs-router/pages";\n\nimport { Layout } from "components/Layout";\n\nfunction App({ Component, pageProps }: AppProps): JSX.Element {\n  return (\n    <Refine\n      dataProvider={dataProvider("https://api.fake-rest.refine.dev")}\n      // highlight-next-line\n      routerProvider={routerProvider}\n      resources={[\n        {\n          name: "posts",\n          list: "/posts",\n          show: "/posts/show/:id",\n        },\n        {\n          name: "categories",\n          list: "/categories",\n          show: "/categories/show/:id",\n        },\n      ]}\n    >\n      <Layout>\n        <Component {...pageProps} />\n      </Layout>\n    </Refine>\n  );\n}\n')),(0,a.yg)("admonition",{title:"Good to know",type:"simple"},(0,a.yg)("p",{parentName:"admonition"},"Next.js uses the bracket syntax (",(0,a.yg)("inlineCode",{parentName:"p"},"[param]"),") for dynamic routes but Refine uses the colon syntax (",(0,a.yg)("inlineCode",{parentName:"p"},":param"),") for route parameters. This won't cause any problems since Refine only uses the colon syntax as an indicator for route parameters and the communication between Refine and the router is handled by the ",(0,a.yg)("inlineCode",{parentName:"p"},"routerProvider")," prop.")),(0,a.yg)("p",null,"Your action definitions in the resources can contain additional parameters and nested routes. Passing these parameters when navigating to the pages are handled by the current available parameters and the ",(0,a.yg)("inlineCode",{parentName:"p"},"meta")," props of the related hooks and components."),(0,a.yg)("p",null,"Refine supports route parameters defined with ",(0,a.yg)("inlineCode",{parentName:"p"},":param")," syntax. You can use these parameters in your action definitions and create your routes accordingly. For example, if you have a ",(0,a.yg)("inlineCode",{parentName:"p"},"posts")," resource and you want to create a route for the ",(0,a.yg)("inlineCode",{parentName:"p"},"show")," action of a specific post, you can define the ",(0,a.yg)("inlineCode",{parentName:"p"},"show")," action as ",(0,a.yg)("inlineCode",{parentName:"p"},"/posts/show/:id")," and use the ",(0,a.yg)("inlineCode",{parentName:"p"},"id")," parameter in your component."),(0,a.yg)("p",null,"Now we can create our pages in the ",(0,a.yg)("inlineCode",{parentName:"p"},"pages")," directory:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:"title=pages/posts/index.tsx",title:"pages/posts/index.tsx"},'import { useTable } from "@refinedev/core";\nimport Link from "next/link";\n\ntype IPost = {\n  id: string;\n  title: string;\n  description: string;\n};\n\nexport default function PostList() {\n  // `posts` resource will be inferred from the route.\n  // Because we\'ve defined `/posts` as the `list` action of the `posts` resource.\n  const {\n    tableQuery: { data, isLoading },\n  } = useTable<IPost>();\n\n  const tableData = data?.data;\n\n  return (\n    <div>\n      {isLoading && <p>Loading...</p>}\n      {!isLoading && (\n        <ul>\n          {tableData?.map((post) => (\n            <li key={post.id}>\n              <Link href={`/posts/show/${post.id}`}>{post.title}</Link>\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n}\n')),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:"title=pages/posts/show/[id].tsx",title:"pages/posts/show/[id].tsx"},'import { useShow } from "@refinedev/core";\n\ntype IPost = {\n    id: string;\n    title: string;\n    description: string;\n}\n\nexport default function PostShow() {\n    // `posts` resource and the `id` will be inferred from the route.\n    // Because we\'ve defined `/posts/show/:id` as the `show` action of the `posts` resource.\n    const { queryResult: { data, isLoading } } = useShow<IPost>();\n\n    const postData = data?.data;\n\n    return (\n        <div>\n            {isLoading && <p>Loading...</p>}\n            {!isLoading && (\n                <h1>{postData?.title}</h1>\n                <p>{postData?.description}</p>\n            )}\n        </div>\n    );\n}\n')),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:"title=pages/categories/index.tsx",title:"pages/categories/index.tsx"},'import { useTable } from "@refinedev/core";\nimport Link from "next/link";\n\ntype ICategory = {\n  id: string;\n  label: string;\n};\n\nexport default function CategoryList() {\n  // `categories` resource will be inferred from the route.\n  // Because we\'ve defined `/categories` as the `list` action of the `categories` resource.\n  const {\n    tableQuery: { data, isLoading },\n  } = useTable<ICategory>();\n\n  const tableData = data?.data;\n\n  return (\n    <div>\n      {isLoading && <p>Loading...</p>}\n      {!isLoading && (\n        <ul>\n          {tableData?.map((category) => (\n            <li key={category.id}>\n              <Link href={`/categories/show/${category.id}`}>\n                {category.label}\n              </Link>\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n}\n')),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:"title=pages/categories/show/[id].tsx",title:"pages/categories/show/[id].tsx"},'import { useShow } from "@refinedev/core";\n\ntype ICategory = {\n  id: string;\n  label: string;\n};\n\nexport default function CategoryShow() {\n  // `categories` resource and the `id` will be inferred from the route.\n  // Because we\'ve defined `/categories/show/:id` as the `show` action of the `categories` resource.\n  const {\n    queryResult: { data, isLoading },\n  } = useShow<ICategory>();\n\n  const categoryData = data?.data;\n\n  return (\n    <div>\n      <h1>{categoryData?.label}</h1>\n    </div>\n  );\n}\n')),(0,a.yg)("p",null,"Now, we'll use ",(0,a.yg)("a",{parentName:"p",href:"#navigatetoresource"},(0,a.yg)("inlineCode",{parentName:"a"},"NavigateToResource"))," component to redirect to the ",(0,a.yg)("inlineCode",{parentName:"p"},"posts")," resource when the user visits the home page."),(0,a.yg)("admonition",{title:"Implementation Tips",type:"simple"},(0,a.yg)("p",{parentName:"admonition"},"Even though we're using the ",(0,a.yg)("inlineCode",{parentName:"p"},"NavigateToResource")," component, when using Next.js it's better to handle such redirect operations in the server side rather than the client side. You can use the ",(0,a.yg)("inlineCode",{parentName:"p"},"getServerSideProps")," function to redirect the user to the ",(0,a.yg)("inlineCode",{parentName:"p"},"/posts"),".")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:"title=pages/index.tsx",title:"pages/index.tsx"},'import { NavigateToResource } from "@refinedev/nextjs-router/pages";\n\nexport default function Home() {\n  return <NavigateToResource />;\n}\n'))),(0,a.yg)("h2",{id:"additional-components"},"Additional Components"),(0,a.yg)(D,{id:"additional-components",mdxType:"DocThumbsUpDownFeedbackWidget"},(0,a.yg)("p",null,(0,a.yg)("inlineCode",{parentName:"p"},"@refinedev/nextjs-router")," package also includes some additional components that can be useful in some cases.")),(0,a.yg)("h3",{id:"navigatetoresource"},"NavigateToResource"),(0,a.yg)(D,{id:"navigatetoresource",mdxType:"DocThumbsUpDownFeedbackWidget"},(0,a.yg)("p",null,"A basic component to navigate to a resource page. It is useful when you want to navigate to a resource page at the index route of your app.")),(0,a.yg)("h4",{id:"in-apppagetsx"},"In ",(0,a.yg)("inlineCode",{parentName:"h4"},"app/page.tsx")),(0,a.yg)(D,{id:"in-apppagetsx",mdxType:"DocThumbsUpDownFeedbackWidget"},(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:"title=app/page.tsx",title:"app/page.tsx"},'"use client";\n\nimport { NavigateToResource } from "@refinedev/nextjs-router";\n\nexport default function IndexPage() {\n  return <NavigateToResource />;\n}\n'))),(0,a.yg)("h4",{id:"in-pagesindextsx"},"In ",(0,a.yg)("inlineCode",{parentName:"h4"},"pages/index.tsx")),(0,a.yg)(D,{id:"in-pagesindextsx",mdxType:"DocThumbsUpDownFeedbackWidget"},(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:"title=pages/index.tsx",title:"pages/index.tsx"},'import { NavigateToResource } from "@refinedev/nextjs-router/pages";\n\nexport default function IndexPage() {\n  return <NavigateToResource />;\n}\n'))),(0,a.yg)("h4",{id:"properties"},"Properties"),(0,a.yg)(D,{id:"properties",mdxType:"DocThumbsUpDownFeedbackWidget"},(0,a.yg)("p",null,(0,a.yg)("inlineCode",{parentName:"p"},"resource")," (optional) - The name of the resource to navigate to. It will redirect to the first ",(0,a.yg)("inlineCode",{parentName:"p"},"list")," route in the ",(0,a.yg)("inlineCode",{parentName:"p"},"resources")," array if not provided."),(0,a.yg)("p",null,(0,a.yg)("inlineCode",{parentName:"p"},"meta")," (optional) - The meta object to use if the route has parameters in it. The parameters in the current location will also be used to compose the route but ",(0,a.yg)("inlineCode",{parentName:"p"},"meta")," will take precedence.")),(0,a.yg)("h3",{id:"unsavedchangesnotifier"},"UnsavedChangesNotifier"),(0,a.yg)(D,{id:"unsavedchangesnotifier",mdxType:"DocThumbsUpDownFeedbackWidget"},(0,a.yg)("blockquote",null,(0,a.yg)("p",{parentName:"blockquote"},"\ud83d\udea8 Note that this component currently only works in the ",(0,a.yg)("inlineCode",{parentName:"p"},"pages")," directory due to limitations of the ",(0,a.yg)("inlineCode",{parentName:"p"},"next/navigation")," and missing events.")),(0,a.yg)("p",null,"This component enables the ",(0,a.yg)("inlineCode",{parentName:"p"},"warnWhenUnsavedChanges")," feature of Refine. It will show a warning message when user tries to navigate away from the current page without saving the changes. Also checks for ",(0,a.yg)("inlineCode",{parentName:"p"},"beforeunload")," event to warn the user when they try to close the browser tab or window."),(0,a.yg)("p",null,"Place this component inside the ",(0,a.yg)("inlineCode",{parentName:"p"},"<Refine>")," components children to enable this feature."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:"title=_app.tsx",title:"_app.tsx"},'import { Refine } from "@refinedev/core";\nimport { UnsavedChangesNotifier } from "@refinedev/nextjs-router/pages";\n\nfunction App({ Component, pageProps }: AppProps): JSX.Element {\n  return (\n    <Refine\n    /* ... */\n    >\n      <Component {...pageProps} />\n      {/* highlight-next-line */}\n      <UnsavedChangesNotifier />\n    </Refine>\n  );\n}\n')),(0,a.yg)("admonition",{type:"info"},(0,a.yg)("p",{parentName:"admonition"},"This feature is not working in ",(0,a.yg)("inlineCode",{parentName:"p"},"appDir")," mode in Next.js due to limitations of the ",(0,a.yg)("inlineCode",{parentName:"p"},"next/navigation")," and missing events."))),(0,a.yg)("h4",{id:"properties-1"},"Properties"),(0,a.yg)(D,{id:"properties-1",mdxType:"DocThumbsUpDownFeedbackWidget"},(0,a.yg)("p",null,(0,a.yg)("inlineCode",{parentName:"p"},"translationKey")," (optional) - The translation key for the warning message. Default value is ",(0,a.yg)("inlineCode",{parentName:"p"},"warnWhenUnsavedChanges"),". Useful when you use an i18n provider."),(0,a.yg)("p",null,(0,a.yg)("inlineCode",{parentName:"p"},"message")," (optional) - The warning message. Default value is ",(0,a.yg)("inlineCode",{parentName:"p"},"Are you sure you want to leave? You have unsaved changes.")," Useful when you don't use an i18n provider.")),(0,a.yg)("h3",{id:"parsetableparams"},"parseTableParams"),(0,a.yg)(D,{id:"parsetableparams",mdxType:"DocThumbsUpDownFeedbackWidget"},(0,a.yg)("p",null,"This function can be used to parse the query parameters of current route. It can be useful when you want to use the query parameters in your server side functions (",(0,a.yg)("inlineCode",{parentName:"p"},"getData"),") to fetch the data such as ",(0,a.yg)("a",{parentName:"p",href:"#how-to-persist-syncwithlocation-in-ssr"},"persisting the table state")),(0,a.yg)("p",null,"For server components, import it from ",(0,a.yg)("inlineCode",{parentName:"p"},"@refinedev/nextjs-router/parse-table-params"),"."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx"},'import parseTableParams from "@refinedev/nextjs-router/parse-table-params";\n')),(0,a.yg)("p",null,"If you want to use it in your client components, you can import it directly from ",(0,a.yg)("inlineCode",{parentName:"p"},"@refinedev/nextjs-router"),"."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx"},'import { parseTableParams } from "@refinedev/nextjs-router";\n'))),(0,a.yg)("h3",{id:"documenttitlehandler"},"DocumentTitleHandler"),(0,a.yg)(D,{id:"documenttitlehandler",mdxType:"DocThumbsUpDownFeedbackWidget"},(0,a.yg)("blockquote",null,(0,a.yg)("p",{parentName:"blockquote"},"\ud83d\udea8 Note that this component currently only works in the ",(0,a.yg)("inlineCode",{parentName:"p"},"pages")," directory.")),(0,a.yg)("p",null,"This component will generate the document title for the current page.By default, it follows a set of predefined rules to generate titles based on the provided props. However, it also offers the flexibility to customize the title generation process by providing a custom ",(0,a.yg)("inlineCode",{parentName:"p"},"handler")," function.\nThe default title generation rules are as follows:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"list : ",(0,a.yg)("inlineCode",{parentName:"li"},"Posts | Refine")),(0,a.yg)("li",{parentName:"ul"},"edit : ",(0,a.yg)("inlineCode",{parentName:"li"},"#{id} Edit Post | Refine")),(0,a.yg)("li",{parentName:"ul"},"show : ",(0,a.yg)("inlineCode",{parentName:"li"},"#{id} Show Post | Refine")),(0,a.yg)("li",{parentName:"ul"},"create : ",(0,a.yg)("inlineCode",{parentName:"li"},"Create new Post | Refine")),(0,a.yg)("li",{parentName:"ul"},"clone : ",(0,a.yg)("inlineCode",{parentName:"li"},"#{id} Clone Post | Refine")),(0,a.yg)("li",{parentName:"ul"},"default : ",(0,a.yg)("inlineCode",{parentName:"li"},"Refine"))),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx"},"const App = () => {\n  return (\n    <BrowserRouter>\n      <Refine\n      /* ... */\n      >\n        {/* ... */}\n        {/* highlight-next-line */}\n        <DocumentTitleHandler />\n      </Refine>\n    </BrowserRouter>\n  );\n};\n"))),(0,a.yg)("h4",{id:"properties-2"},"Properties"),(0,a.yg)(D,{id:"properties-2",mdxType:"DocThumbsUpDownFeedbackWidget"},(0,a.yg)("p",null,(0,a.yg)("inlineCode",{parentName:"p"},"handler")," (optional) - The function that will get invoked in every location change. It will receive an object with the following properties:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"pathname"),": The current URL pathname."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"resource"),': The resource being displayed (e.g., "posts").'),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"action"),': The action being performed (e.g., "edit", "show", "create").'),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"autoGeneratedTitle"),": The default auto-generated title based on the predefined rules."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"params"),": An object containing URL parameters, including the ",(0,a.yg)("inlineCode",{parentName:"li"},"id")," parameter if present.")),(0,a.yg)("p",null,"Inside the handler function, you can dynamically generate the document title based on the provided properties and any additional logic required. The function should return the generated title."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx"},'const customTitleHandler = ({ resource, action, params }) => {\n  let title = "Custom default"; // Default title\n\n  if (resource && action) {\n    title = `${resource} ${action} ${params.id}`;\n  }\n\n  return title;\n};\n\n// Usage\n<DocumentTitleHandler handler={customTitleHandler} />;\n'))),(0,a.yg)("h2",{id:"hooks"},"Hooks"),(0,a.yg)("h3",{id:"usedocumenttitle"},"useDocumentTitle"),(0,a.yg)(D,{id:"usedocumenttitle",mdxType:"DocThumbsUpDownFeedbackWidget"},(0,a.yg)("p",null,"Note that this hook doesn't support SSR. It will only set the document title in the client side."),(0,a.yg)("p",null,"This hook allows you to set the document title for the current page. It can be used in any component that is a child of the ",(0,a.yg)("inlineCode",{parentName:"p"},"<Refine>")," component."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx"},'import { useDocumentTitle } from "@refinedev/nextjs-router/pages";\n\nconst PostList = () => {\n  // highlight-next-line\n  useDocumentTitle("Posts | Refine");\n\n  return <List>{/* ... */}</List>;\n};\n')),(0,a.yg)("p",null,"This hook can take an object as an argument with ",(0,a.yg)("inlineCode",{parentName:"p"},"i18nKey"),". This key will be used to translate the title using the i18n provider."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx"},'import { useDocumentTitle } from "@refinedev/nextjs-router/pages";\n\nconst PostList = () => {\n  // highlight-next-line\n  useDocumentTitle({ i18nKey: "documentTitle.posts.list" });\n\n  return <List>{/* ... */}</List>;\n};\n')),(0,a.yg)("p",null,"This hook also returns a function that can be used to set the document title dynamically."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx"},'import { useDocumentTitle } from "@refinedev/nextjs-router/pages";\n\nconst PostList = () => {\n  const setTitle = useDocumentTitle();\n\n  useEffect(() => {\n    setTitle("Posts | Refine");\n  }, []);\n\n  return <List>{/* ... */}</List>;\n};\n'))),(0,a.yg)("h2",{id:"authentication"},"Authentication"),(0,a.yg)(D,{id:"authentication",mdxType:"DocThumbsUpDownFeedbackWidget"},(0,a.yg)("p",null,"In Next.js you can achieve authentication control in multiple ways;"),(0,a.yg)("admonition",{title:"Implementation Tips",type:"simple"},(0,a.yg)("p",{parentName:"admonition"},"For page level authentication, server-side approach is recommended."))),(0,a.yg)("h3",{id:"client-side"},"Client side"),(0,a.yg)(D,{id:"client-side",mdxType:"DocThumbsUpDownFeedbackWidget"},(0,a.yg)("p",null,"On the client-side, you can wrap your pages with ",(0,a.yg)("a",{parentName:"p",href:"/docs/authentication/components/authenticated"},(0,a.yg)("inlineCode",{parentName:"a"},"Authenticated"))," component from ",(0,a.yg)("inlineCode",{parentName:"p"},"@refinedev/core")," to protect your pages from unauthenticated access.")),(0,a.yg)("h3",{id:"server-side"},"Server Side"),(0,a.yg)(D,{id:"server-side",mdxType:"DocThumbsUpDownFeedbackWidget"},(0,a.yg)("admonition",{title:"Implementation Tips",type:"simple"},(0,a.yg)("p",{parentName:"admonition"},"For page level authentication, server-side approach is recommended.")),(0,a.yg)("p",null,"First let's create our ",(0,a.yg)("a",{parentName:"p",href:"/docs/authentication/auth-provider"},"AuthProvider")),(0,a.yg)("p",null,"let's install the ",(0,a.yg)("inlineCode",{parentName:"p"},"nookies")," packages in our project."),(0,a.yg)(T,{args:"nookies",mdxType:"InstallPackagesCommand"}),(0,a.yg)("p",null,"We will set/destroy cookies in the ",(0,a.yg)("inlineCode",{parentName:"p"},"login"),", ",(0,a.yg)("inlineCode",{parentName:"p"},"logout")," and ",(0,a.yg)("inlineCode",{parentName:"p"},"check")," functions of our ",(0,a.yg)("inlineCode",{parentName:"p"},"AuthProvider"),"."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/providers/auth-provider.ts"',title:'"src/providers/auth-provider.ts"'},'import { AuthProvider } from "@refinedev/core";\n// highlight-start\nimport nookies from "nookies";\n// highlight-end\n\nconst mockUsers = [\n  {\n    username: "admin",\n    roles: ["admin"],\n  },\n  {\n    username: "editor",\n    roles: ["editor"],\n  },\n];\n\n// highlight-next-line\nconst COOKIE_NAME = "user";\n\nexport const authProvider: AuthProvider = {\n  login: ({ username, password, remember }) => {\n    // Suppose we actually send a request to the back end here.\n    const user = mockUsers.find((item) => item.username === username);\n\n    if (user) {\n      // highlight-start\n      nookies.set(null, COOKIE_NAME, JSON.stringify(user), {\n        maxAge: remember ? 30 * 24 * 60 * 60 : undefined,\n      });\n      // highlight-end\n\n      return {\n        success: true,\n      };\n    }\n\n    return {\n      success: false,\n    };\n  },\n  logout: () => {\n    // highlight-next-line\n    nookies.destroy(null, COOKIE_NAME);\n\n    return {\n      success: true,\n      redirectTo: "/login",\n    };\n  },\n  onError: (error) => {\n    if (error && error.statusCode === 401) {\n      return {\n        error: new Error("Unauthorized"),\n        logout: true,\n        redirectTo: "/login",\n      };\n    }\n\n    return {};\n  },\n  check: async (context) => {\n    // highlight-start\n    let user = undefined;\n    if (context) {\n      // for SSR\n      const cookies = nookies.get(context);\n      user = cookies[COOKIE_NAME];\n    } else {\n      // for CSR\n      const cookies = nookies.get(null);\n      user = cookies[COOKIE_NAME];\n    }\n    // highlight-end\n\n    if (!user) {\n      return {\n        authenticated: false,\n        error: {\n          message: "Check failed",\n          name: "Unauthorized",\n        },\n        logout: true,\n        redirectTo: "/login",\n      };\n    }\n\n    return {\n      authenticated: true,\n    };\n  },\n  getPermissions: async () => {\n    return null;\n  },\n  getIdentity: async () => {\n    return null;\n  },\n};\n')),(0,a.yg)("p",null,"After creating our ",(0,a.yg)("inlineCode",{parentName:"p"},"AuthProvider"),", we can call it from server-side to check if the user is authenticated or not.")),(0,a.yg)("h4",{id:"app-directory-1"},(0,a.yg)("inlineCode",{parentName:"h4"},"app")," directory"),(0,a.yg)(D,{id:"app-directory-1",mdxType:"DocThumbsUpDownFeedbackWidget"},(0,a.yg)("p",null,"You can use your authProvider's check function inside your server components. To do this, you can use normal async function and use it in your server component."),(0,a.yg)("blockquote",null,(0,a.yg)("p",{parentName:"blockquote"},"\ud83d\udea8 Refer to the ",(0,a.yg)("a",{parentName:"p",href:"#how-can-i-use-my-providers-in-the-both-server-and-client-side"},"FAQ section")," for instructions on using providers in both client and server components.")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="app/blog-posts/layout.ts"',title:'"app/blog-posts/layout.ts"'},'import { authProvider } from "@providers/auth-provider";\nimport { redirect } from "next/navigation";\n\nexport default async function IndexPage() {\n  const { hasAuth, hasPermission, data } = await getData();\n\n  if (!hasAuth) {\n    return redirect("/login");\n  }\n\n  return (\n    <div>\n      <h1>Posts</h1>\n      <ul>\n        {data?.map((post: any) => (\n          <li key={post.id}>{post.title}</li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n\nasync function getData() {\n  const hasAuth = await authProvider.check();\n\n  let data = null;\n  if (hasAuth && hasPermission) {\n    data = await dataProvider.getList({\n      resource: "posts",\n    });\n  }\n\n  return {\n    hasAuth,\n    data,\n  };\n}\n'))),(0,a.yg)("h4",{id:"pages-directory-1"},(0,a.yg)("inlineCode",{parentName:"h4"},"pages")," directory"),(0,a.yg)(D,{id:"pages-directory-1",mdxType:"DocThumbsUpDownFeedbackWidget"},(0,a.yg)("p",null,"On the server-side of pages router, you can use your ",(0,a.yg)("inlineCode",{parentName:"p"},"authProvider"),"'s ",(0,a.yg)("inlineCode",{parentName:"p"},"check")," function inside server side functions (",(0,a.yg)("inlineCode",{parentName:"p"},"getServerSideProps"),") to redirect unauthenticated users to other pages like login..."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="pages/posts/index.tsx"',title:'"pages/posts/index.tsx"'},'import { authProvider } from "@providers/auth-provider";\n\nexport const getServerSideProps = async (context) => {\n  // We\'ve handled the SSR case in our `check` function by sending the `context` as parameter.\n  const { authenticated, redirectTo } = await authProvider.check(context);\n\n  if (!authenticated) {\n    context.res.statusCode = 401;\n    context.res.end();\n  }\n\n  if (!authenticated && redirectTo) {\n    return {\n      redirect: {\n        destination: redirectTo,\n        permanent: false,\n      },\n    };\n  }\n\n  return {\n    props: {\n      authenticated,\n    },\n  };\n};\n')),(0,a.yg)("p",null,"This needs to be done for all the routes that we want to protect.")),(0,a.yg)("h2",{id:"access-control"},"Access Control"),(0,a.yg)(D,{id:"access-control",mdxType:"DocThumbsUpDownFeedbackWidget"},(0,a.yg)("p",null,"In Next.js you can achieve access control in multiple ways;"),(0,a.yg)("p",null,"On the client-side you can wrap your pages with ",(0,a.yg)("inlineCode",{parentName:"p"},"CanAccess")," component from ",(0,a.yg)("inlineCode",{parentName:"p"},"@refinedev/core")," to protect your pages from unauthorized access."),(0,a.yg)("p",null,"And on the server-side you can use your ",(0,a.yg)("inlineCode",{parentName:"p"},"accessControlProvider"),"'s ",(0,a.yg)("inlineCode",{parentName:"p"},"can")," function inside server side functions (",(0,a.yg)("inlineCode",{parentName:"p"},"getServerSideProps"),") to redirect unauthorized users to other pages.."),(0,a.yg)("admonition",{title:"Implementation Tips",type:"simple"},(0,a.yg)("p",{parentName:"admonition"},"For page level access control, server-side approach is recommended.")),(0,a.yg)("p",null,"First, let's build our ",(0,a.yg)("a",{parentName:"p",href:"/docs/authorization/access-control-provider"},"AccessControlProvider")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/acccessControlProvider.ts"',title:'"src/acccessControlProvider.ts"'},'export const accessControlProvider = {\n  can: async ({ resource, action, params }) => {\n    // You can also access resource object directly with `params.resource` and use any useful meta data in `params.resource.meta`.\n    // const resourceName = params?.resource?.name;\n    // const anyUsefulMeta = params?.resource?.meta?.yourUsefulMeta;\n\n    if (resource === "posts" && action === "edit") {\n      return {\n        can: false,\n        reason: "Unauthorized",\n      };\n    }\n\n    return { can: true };\n  },\n};\n'))),(0,a.yg)("h3",{id:"client-side-1"},"Client Side"),(0,a.yg)(D,{id:"client-side-1",mdxType:"DocThumbsUpDownFeedbackWidget"},(0,a.yg)("p",null,"For client-side, you can wrap your pages with ",(0,a.yg)("a",{parentName:"p",href:"/docs/authorization/components/can-access"},(0,a.yg)("inlineCode",{parentName:"a"},"CanAccess"))," component from ",(0,a.yg)("inlineCode",{parentName:"p"},"@refinedev/core")," to protect your pages from unauthorized access."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx"},'import { CanAccess } from "@refinedev/core";\n\nexport const MyPage = () => (\n  <CanAccess>\n    <div>{/* ... */}</div>\n  </CanAccess>\n);\n'))),(0,a.yg)("h3",{id:"server-side-1"},"Server Side"),(0,a.yg)("h4",{id:"app-directory-2"},(0,a.yg)("inlineCode",{parentName:"h4"},"app")," directory"),(0,a.yg)(D,{id:"app-directory-2",mdxType:"DocThumbsUpDownFeedbackWidget"},(0,a.yg)("p",null,"You can use your ",(0,a.yg)("inlineCode",{parentName:"p"},"accessControlProvider"),"'s ",(0,a.yg)("inlineCode",{parentName:"p"},"can")," function inside your server components. To do this, you can use normal async function and use it in your server component."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="app/posts/page.tsx"',title:'"app/posts/page.tsx"'},'import { accessControlProvider } from "src/accessControlProvider";\n\nexport default async function PostList() {\n  const { can } = await getData();\n\n  if (!can) {\n    return <h1>Unauthorized</h1>;\n  }\n\n  return (\n    <div>\n      <h1>Posts</h1>\n    </div>\n  );\n}\n\nasync function getData() {\n  const { can } = await accessControlProvider.can({\n    resource: "posts",\n    action: "list",\n  });\n\n  return {\n    can,\n  };\n}\n')),(0,a.yg)("blockquote",null,(0,a.yg)("p",{parentName:"blockquote"},"\ud83d\udea8 Refer to the ",(0,a.yg)("a",{parentName:"p",href:"#how-can-i-use-my-providers-in-the-both-server-and-client-side"},"FAQ section")," for instructions on using providers in both client and server components.")),(0,a.yg)("p",null,"To learn more about how to fetch data in server components, you can check the ",(0,a.yg)("a",{parentName:"p",href:"https://nextjs.org/docs/pages/building-your-application/data-fetching"},"data fetching documentation of Next.js"),".")),(0,a.yg)("h4",{id:"pages-directory-2"},(0,a.yg)("inlineCode",{parentName:"h4"},"pages")," directory"),(0,a.yg)(D,{id:"pages-directory-2",mdxType:"DocThumbsUpDownFeedbackWidget"},(0,a.yg)("p",null,"You can use your ",(0,a.yg)("inlineCode",{parentName:"p"},"accessControlProvider"),"'s ",(0,a.yg)("inlineCode",{parentName:"p"},"can")," function inside ",(0,a.yg)("inlineCode",{parentName:"p"},"getServerSideProps")," to redirect unauthorized users to other pages."),(0,a.yg)("p",null,"Then, let's create our posts page and use the ",(0,a.yg)("inlineCode",{parentName:"p"},"accessControlProvider")," to check if the user can list the posts."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="pages/posts/index.tsx"',title:'"pages/posts/index.tsx"'},'import { accessControlProvider } from "src/accessControlProvider";\n\nexport default async function PostList() {\n  const { can } = await getData();\n\n  if (!can) {\n    return <h1>Unauthorized</h1>;\n  }\n\n  return (\n    <div>\n      <h1>Posts</h1>\n    </div>\n  );\n}\n\nasync function getData() {\n  const { can } = await accessControlProvider.can({\n    resource: "posts",\n    action: "list",\n  });\n\n  return {\n    can,\n  };\n}\n'))),(0,a.yg)("h2",{id:"faq"},"FAQ"),(0,a.yg)("h3",{id:"how-can-i-use-my-providers-in-the-both-server-and-client-side"},"How can I use my providers in the both server and client side?"),(0,a.yg)(D,{id:"how-can-i-use-my-providers-in-the-both-server-and-client-side",mdxType:"DocThumbsUpDownFeedbackWidget"},(0,a.yg)("admonition",{title:"Possible Errors",type:"simple"},(0,a.yg)("ul",{parentName:"admonition"},(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("p",{parentName:"li"},'Error: Functions cannot be passed directly to Client Components unless you explicitly expose it by marking it with "use server".')),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("p",{parentName:"li"},"Error: It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")))),(0,a.yg)("p",null,"In some cases, you may want to use your providers on both the server and client side. For example, you may want to use your data provider in your server components to fetch data even before the page is rendered but also you need to give the same data provider to your Refine components to fetch data in the client side."),(0,a.yg)("p",null,"Since Refine heavily uses React context and React state, It's needed to be a client component, and we can't pass functions into the Refine component unless we mark them as ",(0,a.yg)("inlineCode",{parentName:"p"},"client")," functions with ",(0,a.yg)("inlineCode",{parentName:"p"},'"use client";')," directive. After marking them as ",(0,a.yg)("inlineCode",{parentName:"p"},"client")," functions, you can't use them on the server side."),(0,a.yg)("p",null,"To solve this problem, you can create a separate file for your providers and mark them as ",(0,a.yg)("inlineCode",{parentName:"p"},"client")," or ",(0,a.yg)("inlineCode",{parentName:"p"},"server")," functions. Then, you can use the appropriate provider in your server and client components."),(0,a.yg)(i,{mdxType:"NextJSAppProviderServerClient"}),(0,a.yg)("p",null,"You can learn more about this on the ",(0,a.yg)("a",{parentName:"p",href:"https://nextjs.org/docs/app/building-your-application/data-fetching"},"Next.js documentation"),".")),(0,a.yg)("h3",{id:"can-i-use-nested-routes"},"Can I use nested routes?"),(0,a.yg)(D,{id:"can-i-use-nested-routes",mdxType:"DocThumbsUpDownFeedbackWidget"},(0,a.yg)("p",null,"Yes, you can use nested routes in your app. Refine will match the routes depending on how you define the action paths in your resources. Additional parameters and nesting is supported. Refine will not limit you and your router in route configuration, all you need to do is to pass the appropriate path to the related resource and the action in the ",(0,a.yg)("inlineCode",{parentName:"p"},"resources")," array (This is also optional but recommended due to the features it provides)."),(0,a.yg)("p",null,"You can use ",(0,a.yg)("inlineCode",{parentName:"p"},":param")," syntax to define parameters in your routes.")),(0,a.yg)("h3",{id:"how-to-make-ssr-work"},"How to make SSR work?"),(0,a.yg)(D,{id:"how-to-make-ssr-work",mdxType:"DocThumbsUpDownFeedbackWidget"},(0,a.yg)(S,{mdxType:"Tabs"},(0,a.yg)(L,{value:"app",label:"App router",default:!0,mdxType:"TabItem"},(0,a.yg)("p",null,"You can use the methods provided from the ",(0,a.yg)("inlineCode",{parentName:"p"},"dataProvider")," to fetch data in your server components. To do this, you can use normal async function and use it in your server component."),(0,a.yg)("p",null,"To learn more about how to fetch data in server components, you can check the ",(0,a.yg)("a",{parentName:"p",href:"https://nextjs.org/docs/app/building-your-application/data-fetching"},"data fetching documentation")," of Next.js."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="app/posts/page.tsx"',title:'"app/posts/page.tsx"'},'import dataProvider from "@refinedev/simple-rest";\n\nconst API_URL = "https://api.fake-rest.refine.dev";\n\nexport default async function ProductList() {\n  const { posts, total } = await getData();\n\n  return (\n    <div>\n      <h1>Posts ({total})</h1>\n      <hr />\n      {posts.map((post) => (\n        <div key={post.id}>\n          <h1>{post.title}</h1>\n          <p>{post.body}</p>\n        </div>\n      ))}\n    </div>\n  );\n}\n\nasync function getData() {\n  const response = await dataProvider(API_URL).getList({\n    resource: "posts",\n    pagination: { current: 1, pageSize: 10 },\n  });\n\n  return {\n    posts: response.data,\n    total: response.total,\n  };\n}\n'))),(0,a.yg)(L,{value:"pages",label:"Pages Router",mdxType:"TabItem"},(0,a.yg)("p",null,"You can always use the methods provided from the ",(0,a.yg)("inlineCode",{parentName:"p"},"dataProvider")," to fetch data in your pages. To do this, you can both use ",(0,a.yg)("inlineCode",{parentName:"p"},"getServerSideProps")," or ",(0,a.yg)("inlineCode",{parentName:"p"},"getStaticProps")," methods and pass the data to your page as a prop."),(0,a.yg)("p",null,"All you need to do is to pass the data as the ",(0,a.yg)("inlineCode",{parentName:"p"},"initialData")," to your data hooks using the ",(0,a.yg)("inlineCode",{parentName:"p"},"queryOptions")," prop."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx"},'import { useList } from "@refinedev/core";\n\nimport { dataProvider } from "src/providers";\n\ntype IPost = {\n  id: number;\n  title: string;\n  description: string;\n};\n\nexport const getServerSideProps = async () => {\n  const { data } = await dataProvider.getList<IPost>("posts", {\n    pagination: {\n      page: 1,\n      perPage: 10,\n    },\n  });\n\n  return {\n    props: {\n      posts: data,\n    },\n  };\n};\n\nexport default function Posts({ posts }: { posts: GetListResponse<IPost> }) {\n  const {\n    tableQuery: { data },\n  } = useTable<IPost>({\n    queryOptions: {\n      initialData: posts,\n    },\n  });\n\n  return <>{/* ... */}</>;\n}\n'))))),(0,a.yg)("h3",{id:"how-to-persist-syncwithlocation-in-ssr"},"How to persist ",(0,a.yg)("inlineCode",{parentName:"h3"},"syncWithLocation")," in SSR?"),(0,a.yg)(D,{id:"how-to-persist-syncwithlocation-in-ssr",mdxType:"DocThumbsUpDownFeedbackWidget"},(0,a.yg)("p",null,"If ",(0,a.yg)("inlineCode",{parentName:"p"},"syncWithLocation")," is enabled, query parameters must be handled while doing SSR."),(0,a.yg)("p",null,"For example, search params can be like this:"),(0,a.yg)(S,{mdxType:"Tabs"},(0,a.yg)(L,{value:"app",label:"App router",default:!0,mdxType:"TabItem"},(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="app/posts/page.tsx"',title:'"app/posts/page.tsx"'},'import dataProvider from "@refinedev/simple-rest";\nimport { type CrudFilters, type Pagination } from "@refinedev/core";\nimport { parseTableParams } from "@refinedev/nextjs-router";\n\nconst API_URL = "https://api.fake-rest.refine.dev";\n\ntype PostListProps = {\n  params?: Record<string, string>;\n  searchParams?: Record<string, string>;\n};\n\nexport default async function PostList({ searchParams }: PostListProps) {\n  const tableParams = parseTableParams(searchParams);\n  const { posts, total } = await getData(tableParams);\n\n  return (\n    <div>\n      <h1>Posts ({total})</h1>\n      <hr />\n      {posts?.map((post) => (\n        <div key={post.id}>\n          <h1>{post.title}</h1>\n          <p>{post.body}</p>\n        </div>\n      ))}\n    </div>\n  );\n}\n\ntype GetDataParams = {\n  pagination?: Pagination;\n  filters?: CrudFilters;\n};\n\nasync function getData(\n  params: GetDataParams = {\n    pagination: { current: 1, pageSize: 10 },\n    filters: [],\n  },\n) {\n  const response = await dataProvider(API_URL).getList({\n    resource: "posts",\n    pagination: params.pagination,\n    filters: params.filters,\n  });\n\n  return {\n    posts: response.data,\n    total: response.total,\n  };\n}\n'))),(0,a.yg)(L,{value:"pages",label:"Pages Router",mdxType:"TabItem"},(0,a.yg)("p",null,"If ",(0,a.yg)("inlineCode",{parentName:"p"},"syncWithLocation")," is enabled, query parameters must be handled while doing SSR."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx"},'// highlight-next-line\nimport { parseTableParams } from "@refinedev/nextjs-router/pages";\nimport dataProvider from "@refinedev/simple-rest";\n\nconst API_URL = "https://api.fake-rest.refine.dev";\n\nexport const getServerSideProps = ({ params, resolvedUrl }) => {\n  const { resource } = params;\n\n  // highlight-next-line\n  const tableParams = parseTableParams(resolvedUrl?.split("?")[1] ?? "");\n\n  try {\n    const data = await dataProvider(API_URL).getList({\n      resource: resource as string,\n      ...tableParams, // this includes `filters`, `sorters` and `pagination`\n    });\n\n    return {\n      props: {\n        initialData: data,\n      },\n    };\n  } catch (error) {\n    return {\n      props: {},\n    };\n  }\n};\nexport default function MyListPage({ initialData }) {\n  return <>{/* ... */}</>;\n}\n')),(0,a.yg)("p",null,(0,a.yg)("inlineCode",{parentName:"p"},"parseTableParams")," parses the query string and returns query parameters(","[refer here for their interfaces][interfaces]","). They can be directly used for ",(0,a.yg)("inlineCode",{parentName:"p"},"dataProvider")," methods that accept them.")))),(0,a.yg)("h3",{id:"how-to-use-multiple-layouts"},"How to use multiple layouts?"),(0,a.yg)(D,{id:"how-to-use-multiple-layouts",mdxType:"DocThumbsUpDownFeedbackWidget"},(0,a.yg)("p",null,"You'll probably have a point where you need to use multiple layouts. For example, you may want to use a different layout for the login page. To achieve this, you can either use your ",(0,a.yg)("inlineCode",{parentName:"p"},"Layout")," wrappers in your pages or you can add extra properties to your page components to render the page with the specified layout."),(0,a.yg)("p",null,"Here's an example of how you can use additional properties to render different layouts."),(0,a.yg)(S,{mdxType:"Tabs"},(0,a.yg)(L,{value:"app",label:"App router",default:!0,mdxType:"TabItem"},(0,a.yg)("p",null,"The App Router inside Next.js 13 introduced new file conventions to easily create pages, shared layouts, and templates. You can define a layout by default exporting a React component from a ",(0,a.yg)("inlineCode",{parentName:"p"},"layout.js")," file."),(0,a.yg)("p",null,"File structure should similar to this:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-bash"},"\n\u251c\u2500\u2500 app\n\u2502   \u251c\u2500\u2500 posts\n\u2502   \u2502   \u251c\u2500\u2500 page.tsx\n\u2502   \u2502   \u2514\u2500\u2500 layout.tsx\n\u2502   \u251c\u2500\u2500 login\n\u2502   \u2502   \u251c\u2500\u2500 page.tsx\n\u2502   \u2502   \u2514\u2500\u2500 layout.tsx\n\u2502   \u251c\u2500\u2500 layout.tsx\n\u2502   \u251c\u2500\u2500 page.tsx\n\u2502\n\n")),(0,a.yg)("p",null,"In the example above we have three layouts."),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"app/layout.tsx - The default layout and wraps all the pages."),(0,a.yg)("li",{parentName:"ul"},"app/posts/layout.tsx - The layout for the posts page."),(0,a.yg)("li",{parentName:"ul"},"app/login/layout.tsx - The layout for the login page.")),(0,a.yg)("p",null,"To learn more about this, you can check the ",(0,a.yg)("a",{parentName:"p",href:"https://nextjs.org/docs/app/building-your-application/routing/pages-and-layouts#layouts"},"Next.js documentation"),".")),(0,a.yg)(L,{value:"pages",label:"Pages Router",mdxType:"TabItem"},(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="pages/login.tsx"',title:'"pages/login.tsx"'},'export default function Login() {\n  return (\n    <div>\n      <h1>Login</h1>\n    </div>\n  );\n}\n\nLogin.layout = "auth";\n')),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="pages/posts/index.tsx"',title:'"pages/posts/index.tsx"'},'export default function Posts() {\n  return <div>{/* ... */}</div>;\n}\n\nPosts.layout = "default";\n')),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="pages/_app.tsx"',title:'"pages/_app.tsx"'},'import { AuthLayout, DefaultLayout } from "src/layouts";\n\nconst Layouts = {\n    auth: AuthLayout,\n    default: DefaultLayout,\n};\n\nexport default function MyApp({ Component, pageProps }) {\n    const Layout = Layouts[Component.layout ?? "default"];\n\n    return (\n        <Refine\n            {/* ... */}\n        >\n            <Layout>\n                <Component {...pageProps} />\n            </Layout>\n        </Refine>\n    );\n}\n')),(0,a.yg)("p",null,"To comply with TypeScript types, we'll need to extend the ",(0,a.yg)("inlineCode",{parentName:"p"},"NextPage")," and ",(0,a.yg)("inlineCode",{parentName:"p"},"AppProps")," types accordingly to expect the ",(0,a.yg)("inlineCode",{parentName:"p"},"layout")," property in page components."),(0,a.yg)("admonition",{title:"Further Reading",type:"simple"},(0,a.yg)("p",{parentName:"admonition"},"You can find out more about this at ",(0,a.yg)("a",{parentName:"p",href:"https://nextjs.org/docs/basic-features/layouts#with-typescript"},"Next.js documentation for multiple layouts"))),(0,a.yg)("p",null,"We'll define the types in ",(0,a.yg)("inlineCode",{parentName:"p"},"_app.tsx")," file."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="pages/_app.tsx"',title:'"pages/_app.tsx"'},'import type { NextPage } from "next";\nimport type { AppProps } from "next/app";\n\nexport type PageWithLayout<P = {}, IP = P> = NextPage<P, IP> & {\n  layout?: keyof typeof Layouts;\n};\n\ntype AppPropsWithLayout = AppProps & {\n  Component: PageWithLayout;\n};\n\n// Then we\'ll change the type of `MyApp` components props to `AppPropsWithLayout`.\nexport default function MyApp({ Component, pageProps }: AppPropsWithLayout) {\n  /* ... */\n}\n')),(0,a.yg)("p",null,"Then in our pages, we can use the ",(0,a.yg)("inlineCode",{parentName:"p"},"PageWithLayout")," type when defining our page components."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="pages/login.tsx"',title:'"pages/login.tsx"'},'import type { PageWithLayout } from "pages/_app";\n\nconst Login: PageWithLayout = () => {\n  return (\n    <div>\n      <h1>Login</h1>\n    </div>\n  );\n};\n\nLogin.layout = "auth";\n'))))),(0,a.yg)("h3",{id:"handling-404s"},"Handling 404s"),(0,a.yg)(D,{id:"handling-404s",mdxType:"DocThumbsUpDownFeedbackWidget"},(0,a.yg)("p",null,"In the earlier versions of Refine, if ",(0,a.yg)("inlineCode",{parentName:"p"},"authProvider")," was defined, we've redirected the users to the ",(0,a.yg)("inlineCode",{parentName:"p"},"/login")," route even with the 404s and 404 pages were only available to the authenticated users. Now, the routes are handled by the users, so you can handle the 404s however you like."),(0,a.yg)(S,{mdxType:"Tabs"},(0,a.yg)(L,{value:"app",label:"App router",default:!0,mdxType:"TabItem"},(0,a.yg)("h4",null,"Using the Next.js's not-found.js"),(0,a.yg)("p",null,"If you want handle unmatched routes, you can create a ",(0,a.yg)("inlineCode",{parentName:"p"},"not-found.tsx")," file in your ",(0,a.yg)("inlineCode",{parentName:"p"},"/app")," directory and it will be used as the 404 page. For more information, you can check the ",(0,a.yg)("a",{parentName:"p",href:"https://nextjs.org/docs/app/api-reference/file-conventions/not-found"},"Next.js documentation for not-found.js"),"."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-ts",metastring:'title="app/not-found.tsx"',title:'"app/not-found.tsx"'},'import { ErrorComponent } from "@refinedev/antd";\nimport { Suspense } from "react";\n\nexport default function NotFound() {\n  return (\n    <Suspense>\n      <ErrorComponent />\n    </Suspense>\n  );\n}\n')),(0,a.yg)("h4",null,"Using a catch-all route"),(0,a.yg)("p",null,"If you want to achieve the legacy behavior or want to have more control over the unhandled routes, you can use the catch-all route. For more information, you can check the ",(0,a.yg)("a",{parentName:"p",href:"https://nextjs.org/docs/app/building-your-application/routing/dynamic-routes#catch-all-segments"},"Next.js documentation for catch-all route"),"."),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Client Side")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="app/[[...slug]]/page.tsx"',title:'"app/[[...slug]]/page.tsx"'},'"use client";\n\nimport { Authenticated } from "@refinedev/core";\n\nexport default function CatchAll() {\n  return (\n    // This will redirect the user if they\'re not authenticated depending on the response of `authProvider.check`.\n    <Authenticated>\n      <div>This page is not found.</div>\n    </Authenticated>\n  );\n}\n')),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Server Side")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="app/[[...slug]]/page.tsx"',title:'"app/[[...slug]]/page.tsx"'},'import { redirect } from "next/navigation";\nimport { cookies } from "next/headers";\n\nexport default async function Layout({ children }: React.PropsWithChildren) {\n  const data = await getData();\n\n  if (!data.authenticated) {\n    return redirect("/login");\n  }\n\n  return <>{children}</>;\n}\n\nasync function getData() {\n  const cookieStore = cookies();\n  const auth = cookieStore.get("auth");\n\n  return {\n    authenticated = !!auth,\n  };\n}\n'))),(0,a.yg)(L,{value:"pages",label:"Pages Router",mdxType:"TabItem"},(0,a.yg)("h4",null,"Using the Next.js's 404 page"),(0,a.yg)("p",null,"If you want to use the Next.js's 404 page, you can create a ",(0,a.yg)("inlineCode",{parentName:"p"},"404.tsx")," file in your ",(0,a.yg)("inlineCode",{parentName:"p"},"/pages")," directory and it will be used as the 404 page. For more information, you can check the ",(0,a.yg)("a",{parentName:"p",href:"https://nextjs.org/docs/advanced-features/custom-error-page#404-page"},"Next.js documentation for custom 404 page"),"."),(0,a.yg)("h4",null,"Using a catch-all route"),(0,a.yg)("p",null,"If you want to achieve the legacy behavior or want to have more control over the unhandled routes, you can use the catch-all route. For more information, you can check the ",(0,a.yg)("a",{parentName:"p",href:"https://nextjs.org/docs/routing/dynamic-routes#optional-catch-all-routes"},"Next.js documentation for catch-all route"),"."),(0,a.yg)("p",null,"You can use Refine's authentication hooks and the ",(0,a.yg)("inlineCode",{parentName:"p"},"authProvider")," to check if the user is authenticated or not and redirect them to the login page. This check can be done on the client-side or server-side."),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Client Side")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="pages/[...slug].tsx"',title:'"pages/[...slug].tsx"'},'import { Authenticated } from "@refinedev/core";\n\nexport default function CatchAll() {\n  return (\n    // This will redirect the user if they\'re not authenticated depending on the response of `authProvider.check`.\n    <Authenticated>\n      <div>This page is not found.</div>\n    </Authenticated>\n  );\n}\n')),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Server Side")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="pages/[...slug].tsx"',title:'"pages/[...slug].tsx"'},'import { authProvider } from "src/authProvider";\n\nexport const getServerSideProps = async (context) => {\n  const { authenticated, redirectTo } = await authProvider.check(context);\n\n  if (!authenticated && redirectTo) {\n    return {\n      redirect: {\n        destination: redirectTo,\n        permanent: false,\n      },\n      props: {},\n    };\n  }\n\n  return {\n    props: {},\n  };\n};\n\nexport default function CatchAll() {\n  return <div>This page is not found.</div>;\n}\n'))))),(0,a.yg)("h3",{id:"refineroutes-component"},(0,a.yg)("inlineCode",{parentName:"h3"},"RefineRoutes")," Component"),(0,a.yg)(D,{id:"refineroutes-component",mdxType:"DocThumbsUpDownFeedbackWidget"},(0,a.yg)("admonition",{title:"Good to know",type:"simple"},(0,a.yg)("p",{parentName:"admonition"},"While this may work for the simple cases, it is not recommended to use this component. Defining your routes separately will give you more control over your routes and will allow you to use the full potential of your router.")),(0,a.yg)("p",null,"This component can be used to render the matching route in your resources by using the ",(0,a.yg)("inlineCode",{parentName:"p"},"resources")," prop. It will only take effect if the action properties in the resource definitions are assigned to components or objects with ",(0,a.yg)("inlineCode",{parentName:"p"},"component")," property."),(0,a.yg)("p",null,"It will render the component for the matching route and pass it as a ",(0,a.yg)("inlineCode",{parentName:"p"},"JSX.Element")," to the ",(0,a.yg)("inlineCode",{parentName:"p"},"children")," function. You can use this to render your components in a single catch-all route. If there's no matching route ",(0,a.yg)("inlineCode",{parentName:"p"},"undefined")," will be passed to the ",(0,a.yg)("inlineCode",{parentName:"p"},"children")," function. In this case, you can render an error page or redirect the user to another page."),(0,a.yg)("p",null,"We'll define our resources in the ",(0,a.yg)("inlineCode",{parentName:"p"},"<Refine>")," component:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx"},'return (\n  <Refine\n    resources={[\n      {\n        name: "posts",\n        list: "/posts",\n        show: "/posts/show/:id",\n      },\n      {\n        name: "categories",\n        list: "/categories",\n      },\n    ]}\n  >\n    {/* ... */}\n  </Refine>\n);\n')),(0,a.yg)("p",null,"Then, we'll create a catch-all route to render the matching route in our resources:"),(0,a.yg)("h4",null,"In `app/[[...refine]]/page.tsx`"),(0,a.yg)("p",null,"If you're using ",(0,a.yg)("inlineCode",{parentName:"p"},"appDir")," in your Next.js project, you can create a catch-all route in the ",(0,a.yg)("inlineCode",{parentName:"p"},"app")," directory."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:"title=app/[[...refine]]/page.tsx",title:"app/[[...refine]]/page.tsx"},'"use client";\n\nimport { RefineRoutes } from "@refinedev/nextjs-router";\n\nexport default function CatchAll() {\n  return (\n    <RefineRoutes>\n      {(matchingRoute) => {\n        if (matchingRoute) {\n          return { matchingRoute };\n        }\n\n        return <ErrorPage />;\n      }}\n    </RefineRoutes>\n  );\n}\n')),(0,a.yg)("h4",null,"In `pages/[[...refine]].tsx`"),(0,a.yg)("p",null,"If you're using the ",(0,a.yg)("inlineCode",{parentName:"p"},"/pages")," directory in your Next.js project, you can create a catch-all route in the ",(0,a.yg)("inlineCode",{parentName:"p"},"pages")," directory."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:"title=pages/[[...refine]].tsx",title:"pages/[[...refine]].tsx"},'import { RefineRoutes } from "@refinedev/nextjs-router/pages";\n\nimport { ErrorPage } from "components/error";\n\nexport default function CatchAll() {\n  return (\n    <RefineRoutes>\n      {(matchingRoute) => {\n        if (matchingRoute) {\n          return { matchingRoute };\n        }\n\n        return <ErrorPage />;\n      }}\n    </RefineRoutes>\n  );\n}\n')),(0,a.yg)("p",null,"When components are used to define the resource actions, default paths will be used. You can override the default paths by assigning an object with ",(0,a.yg)("inlineCode",{parentName:"p"},"component")," and ",(0,a.yg)("inlineCode",{parentName:"p"},"path")," properties to the action properties."),(0,a.yg)("p",null,"Default paths are:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"list"),": ",(0,a.yg)("inlineCode",{parentName:"li"},"/resources")),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"create"),": ",(0,a.yg)("inlineCode",{parentName:"li"},"/resources/create")),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"edit"),": ",(0,a.yg)("inlineCode",{parentName:"li"},"/resources/edit/:id")),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"show"),": ",(0,a.yg)("inlineCode",{parentName:"li"},"/resources/show/:id")))),(0,a.yg)("h3",{id:"how-to-change-the-document-title"},"How to change the document title?"),(0,a.yg)(D,{id:"how-to-change-the-document-title",mdxType:"DocThumbsUpDownFeedbackWidget"},(0,a.yg)("p",null,"By default ",(0,a.yg)("a",{parentName:"p",href:"#documenttitlehandler"},(0,a.yg)("inlineCode",{parentName:"a"},"<DocumentTitleHandler/>")),' component will generate the document title based on current resource and action with the "Refine" suffix. You can customize the title generation process by providing a custom ',(0,a.yg)("inlineCode",{parentName:"p"},"handler")," function."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx"},'import { BrowserRouter, DocumentTitleHandler } from "@refinedev/react-router";\nimport { Refine } from "@refinedev/core";\n\nconst App = () => {\n  return (\n    <BrowserRouter>\n      <Refine\n      /* ... */\n      >\n        {/* ... */}\n        <DocumentTitleHandler\n          handler={({ action, params, resource }) => {\n            const id = params?.id ?? "";\n\n            const actionPrefixMatcher = {\n              create: "Create new ",\n              clone: `#${id} Clone ${resource?.meta?.label}`,\n              edit: `#${id} Edit ${resource?.meta?.label}`,\n              show: `#${id} Show ${resource?.meta?.label}`,\n              list: `${resource?.meta?.label}`,\n            };\n\n            const suffix = " | <Company Name>";\n            const title = actionPrefixMatcher[action || "list"] + suffix;\n\n            return title;\n          }}\n        />\n      </Refine>\n    </BrowserRouter>\n  );\n};\n'))),(0,a.yg)("h2",{id:"example-app"},"Example (",(0,a.yg)("inlineCode",{parentName:"h2"},"/app"),")"),(0,a.yg)(D,{id:"example-app",mdxType:"DocThumbsUpDownFeedbackWidget"},(0,a.yg)(j,{path:"with-nextjs",mdxType:"CodeSandboxExample"})))}O.isMDXComponent=!0}}]);