"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[56943],{3905:(e,t,o)=>{o.d(t,{Zo:()=>p,kt:()=>d});var r=o(67294);function a(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function n(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach((function(t){a(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function l(e,t){if(null==e)return{};var o,r,a=function(e,t){if(null==e)return{};var o,r,a={},n=Object.keys(e);for(r=0;r<n.length;r++)o=n[r],t.indexOf(o)>=0||(a[o]=e[o]);return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(a[o]=e[o])}return a}var s=r.createContext({}),u=function(e){var t=r.useContext(s),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},p=function(e){var t=u(e.components);return r.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var o=e.components,a=e.mdxType,n=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),m=u(o),d=a,h=m["".concat(s,".").concat(d)]||m[d]||c[d]||n;return o?r.createElement(h,i(i({ref:t},p),{},{components:o})):r.createElement(h,i({ref:t},p))}));function d(e,t){var o=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var n=o.length,i=new Array(n);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var u=2;u<n;u++)i[u]=o[u];return r.createElement.apply(null,i)}return r.createElement.apply(null,o)}m.displayName="MDXCreateElement"},32572:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>p,contentTitle:()=>s,default:()=>d,frontMatter:()=>l,metadata:()=>u,toc:()=>c});o(67294);var r=o(3905);function a(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function n(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}(Object(t)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))})),e}function i(e,t){if(null==e)return{};var o,r,a=function(e,t){if(null==e)return{};var o,r,a={},n=Object.keys(e);for(r=0;r<n.length;r++)o=n[r],t.indexOf(o)>=0||(a[o]=e[o]);return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(a[o]=e[o])}return a}const l={title:"What is Turborepo and Why Should You Care?",description:"The advantages of using Turborepo for monorepo development.",slug:"how-to-use-turborepo",authors:"muhammad_khabbab",tags:["nextjs","dev-tools"],image:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2022-11-13-turborepo/social.png",hide_table_of_contents:!1},s=void 0,u={permalink:"/blog/how-to-use-turborepo",source:"@site/blog/2022-11-13-turborepo.md",title:"What is Turborepo and Why Should You Care?",description:"The advantages of using Turborepo for monorepo development.",date:"2022-11-13T00:00:00.000Z",formattedDate:"November 13, 2022",tags:[{label:"nextjs",permalink:"/blog/tags/nextjs"},{label:"dev-tools",permalink:"/blog/tags/dev-tools"}],readingTime:6.07,hasTruncateMarker:!1,authors:[{name:"Muhammad Khabbab",title:"Project Manager",imageURL:"/img/generic-profile.png",key:"muhammad_khabbab"}],frontMatter:{title:"What is Turborepo and Why Should You Care?",description:"The advantages of using Turborepo for monorepo development.",slug:"how-to-use-turborepo",authors:"muhammad_khabbab",tags:["nextjs","dev-tools"],image:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2022-11-13-turborepo/social.png",hide_table_of_contents:!1},prevItem:{title:"How to use JavaScript Ternary Operator?",permalink:"/blog/javascript-ternary-operator"},nextItem:{title:"Next.js 13 - What are the new features?",permalink:"/blog/new-features-in-next-js-13"},relatedPosts:[{title:"What Exit Code 137 means for Kubernetes",description:"We'll discuss what exit code 137 means for Kubernetes, how it reflects the operating system's intervention due to memory concerns, and how to mitigate memory issues.",permalink:"/blog/kubernetes-exit-code-137",formattedDate:"November 29, 2023",authors:[{name:"Muhammad Khabbab",title:"Project Manager",imageURL:"/img/generic-profile.png",key:"muhammad_khabbab"}],readingTime:10.26,date:"2023-11-29T00:00:00.000Z"},{title:"Beginner's Guide to React Query",description:"We'll be looking at the basics of React Query, how to use it, and why you should use it.",permalink:"/blog/react-query-guide",formattedDate:"July 4, 2023",authors:[{name:"Marvel Ken",title:"Software Developer",imageURL:"/img/generic-profile.png",key:"marvel_ken"}],readingTime:9.71,date:"2023-07-04T00:00:00.000Z"},{title:"Getting Started with Terraform on AWS",description:"We'll walk through getting started with Terraform specifically for infrastructure provisioning on Amazon Web Services (AWS).",permalink:"/blog/terraform-aws",formattedDate:"November 28, 2023",authors:[{name:"Shangai Ziviku",title:"Software Developer",imageURL:"/img/generic-profile.png",key:"shingai_zivuku"}],readingTime:6.465,date:"2023-11-28T00:00:00.000Z"}],authorPosts:[{title:"How to use Docker Build Args and Environment Variables",description:"A guide for using Docker Build Args to Configure Image Builds",permalink:"/blog/docker-build-args-and-env-vars",formattedDate:"September 28, 2022",authors:[{name:"Muhammad Khabbab",title:"Project Manager",imageURL:"/img/generic-profile.png",key:"muhammad_khabbab"}],readingTime:7.235,date:"2022-09-28T00:00:00.000Z"},{title:"A Detailed Guide on Docker run Command",description:"We'll discuss the Docker run command in detail, including its syntax, options, and examples.",permalink:"/blog/docker-run-command",formattedDate:"June 24, 2023",authors:[{name:"Muhammad Khabbab",title:"Project Manager",imageURL:"/img/generic-profile.png",key:"muhammad_khabbab"}],readingTime:11.855,date:"2023-06-24T00:00:00.000Z"},{title:"kubectl port-forward - Kubernetes Port Forwarding Explained",description:"We'll see how to use kubectl port-forward to access internal Kubernetes services from outside the cluster.",permalink:"/blog/kubectl-port-forward",formattedDate:"November 5, 2023",authors:[{name:"Muhammad Khabbab",title:"Project Manager",imageURL:"/img/generic-profile.png",key:"muhammad_khabbab"}],readingTime:11.64,date:"2023-11-05T00:00:00.000Z"}]},p={authorsImageUrls:[void 0]},c=[{value:"Introduction",id:"introduction",level:2},{value:"Why Turborepo?",id:"why-turborepo",level:2},{value:"Unique Features of Turborepo",id:"unique-features-of-turborepo",level:2},{value:"Remote caching",id:"remote-caching",level:3},{value:"Prune now supports all package managers",id:"prune-now-supports-all-package-managers",level:3},{value:"Support for Polyrepo",id:"support-for-polyrepo",level:3},{value:"When should you use Turborepo?",id:"when-should-you-use-turborepo",level:2},{value:"How to use Turborepo?",id:"how-to-use-turborepo",level:2},{value:"Conclusion",id:"conclusion",level:2}],m={toc:c};function d(e){var{components:t}=e,o=i(e,["components"]);return(0,r.kt)("wrapper",n(function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},r=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(o).filter((function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})))),r.forEach((function(t){a(e,t,o[t])}))}return e}({},m,o),{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"Monorepos are very popular in modern application development because of their immense benefits. A monorepo is a single repository having multiple distinct projects with well-defined associations. Note that monorepo is not a monolith; in fact, it is the opposite of a monolith.  "),(0,r.kt)("p",null," It is very easy to make cross-cutting code changes across different applications (/backend, /frontend) in a single atomic commit. It also provides a single source of truth for various environmental concerns you would want to be applied uniformly across your organization. Some examples include dependency management, code reuse from shared packages, etc. Because of the powerful features of monorepo that tech giants like Google and Facebook have adopted monorepo. Even major Javascript tools like React, Next.JS, Yarn, and many others are using monorepo. "),(0,r.kt)("p",null,"In this article, we will discuss ",(0,r.kt)("a",{parentName:"p",href:"https://turbo.build/"},"Turborepo")," in detail. Turborepo is one of the best tools for monorepo. It is a high-performance build system for Typescript and Javascript projects. It provides some powerful features like:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Fast incremental build"),(0,r.kt)("li",{parentName:"ul"},"Local computational caching"),(0,r.kt)("li",{parentName:"ul"},"Distributed computation caching"),(0,r.kt)("li",{parentName:"ul"},"Local task orchestration"),(0,r.kt)("li",{parentName:"ul"},"Dependency graph visualization"),(0,r.kt)("li",{parentName:"ul"},"Source code sharing")),(0,r.kt)("p",null,"Today we will cover why we should use Turborepo, what are its major features and when are the best use cases for adopting it in your projects. "),(0,r.kt)("p",null,"Steps we'll cover:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#why-turborepo"},"Why Turborepo?")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#unique-features-of-turborepo"},"Unique Features of Turborepo"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#remote-caching"},"Remote caching")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#prune-now-supports-all-package-managers"},"Prune now supports all package managers")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#support-for-polyrepo"},"Support for Polyrepo")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#when-should-you-use-turborepo"},"When should you use Turborepo?")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#how-to-use-turborepo"},"How to use Turborepo?"))),(0,r.kt)("h2",{id:"why-turborepo"},"Why Turborepo?"),(0,r.kt)("p",null,"There was a need for a monorepo tool that could take advantage of advanced techniques with zero configuration. Something that is easy to scale and adapt while at the same time improving the speed of monorepo pipelines. Turborepo provides all these features and more."),(0,r.kt)("p",null,"The main idea behind monorepo is to never recompute the work that has already been done before. It keeps a cache of previous builds for each project and then uses it for subsequent builds. It keeps track of the output of any task you execute and then skips the work that is already done.\nTurborepo is designed to be adopted incrementally, so you can add it to our codebase in just a few minutes. It speeds up your tasks through smart scheduling, minimizing idle CPU. "),(0,r.kt)("p",null,"Turborepo's magic lies in the execution of its tasks. For package installation, you can still use pnpm or npm. Turborepo complements pnpm/npm, where these package managers install your packages, and Turborepo runs your tasks efficiently. "),(0,r.kt)("h2",{id:"unique-features-of-turborepo"},"Unique Features of Turborepo"),(0,r.kt)("h3",{id:"remote-caching"},"Remote caching"),(0,r.kt)("p",null,"Build caches are usually generated and checked on the local machine, so if you are reviewing your team member's code, you will also have to build it locally. Remote caching shares that cache on a global scale, turning it into a \"dropbox of your ",(0,r.kt)("inlineCode",{parentName:"p"},"dist"),' folder". Vercel offers free remote cache on Turborepo builds even if you are not hosting your application on Vercel servers. '),(0,r.kt)("p",null,"With your remote caching, builds can achieve amazingly fast build times by providing a way to share compiled computations and code artifacts on Vercel. These artifacts can be log outputs, build outputs, blobs of data, etc. Remote caching identifies any necessary artifacts already generated in the same code PR and recycles them across different machines. This recycling or reuse can be done either during Vercel build process or an external CI/CD."),(0,r.kt)("br",null),(0,r.kt)("div",{className:"centered-image"},(0,r.kt)("img",{style:{alignSelf:"center"},src:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2022-11-13-turborepo/turbopack.png",alt:"turbopack"}),(0,r.kt)("em",null," Source - ")),(0,r.kt)("br",null),(0,r.kt)("p",null,"The above image shows that the shared cache resides on the Vercel servers. You can share your cache with fellow developers and your CI server.\nRemote caching speeds up your workflow as you do not need to constantly re-compile, re-test, or re-run your unchanged code."),(0,r.kt)("h3",{id:"prune-now-supports-all-package-managers"},"Prune now supports all package managers"),(0,r.kt)("p",null,"Pruning is the process of automatically removing the overgrowth of the build cache efficiently. Pruning creates a subset of your monorepo, including pruning the dependencies in your lock file. As a result, the tool providing the pruning must also implement the logic for each workspace manager separately. The good news is that the command ",(0,r.kt)("inlineCode",{parentName:"p"}," turbo prune")," provides support for all major package managers including npm, yarn, and pnpm. "),(0,r.kt)("h3",{id:"support-for-polyrepo"},"Support for Polyrepo"),(0,r.kt)("p",null,"Initially, Turborepo was focused solely on monorepo because monorepo runs plenty of tasks, and Turborepo is exceptionally fast in executing the tasks rapidly. Now Turborepo supports polyrepo too. After all, a polyrepo also executes plenty of tasks, so it is well worth utilizing Turborepo in monorepo and polyrepo. The majority of CI/CD processes duplicate a lot of work, so taking advantage of the Turborepo cache would benefit polyrepo too.\nSome of the other features of Turborepo include:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Incremental builds. Turborepo will remember what you have built and skip the existing computations"),(0,r.kt)("li",{parentName:"ul"},"Context-aware hashing. Turborepo keeps track of the contents of your files, not date/time, to identify what needs to be built. "),(0,r.kt)("li",{parentName:"ul"},"Zero runtime overhead. Turborepo will not interfere with your runtime code or alter your sourcemaps"),(0,r.kt)("li",{parentName:"ul"},"Pruned subsets. It speeds up your deployments by generating a subset of your monorepo with only what is required to build a specific target"),(0,r.kt)("li",{parentName:"ul"},"Integration with Lerna. If you are using lerna as your package publishing workflow, you can use Turborepo in parallel to improve the execution of your tasks. "),(0,r.kt)("li",{parentName:"ul"},"Profile in your browser. You can create build profiles and import them in Edge or chrome browser to identify which tasks are running the longest. ")),(0,r.kt)("h2",{id:"when-should-you-use-turborepo"},"When should you use Turborepo?"),(0,r.kt)("p",null,"Despite all the good things about monorepo, they struggle to scale. Each project in monorepo has its own ecosystem of testing, building, linting, etc. While majority of the projects will benefit from Turborepo, Turborepo will be highly beneficial for you if:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"There is a lot of dependency of scripts on each other"),(0,r.kt)("li",{parentName:"ul"},"You want to execute tasks in parallel"),(0,r.kt)("li",{parentName:"ul"},"You want top-level dependency management for JavaScript and TypeScript"),(0,r.kt)("li",{parentName:"ul"},"You want Incremental builds"),(0,r.kt)("li",{parentName:"ul"},"You want a uniform linting configuration"),(0,r.kt)("li",{parentName:"ul"},"You want caching of the build steps"),(0,r.kt)("li",{parentName:"ul"},"You want out-of-the-box hot module reload for the NextJS application for imported packages")),(0,r.kt)("h2",{id:"how-to-use-turborepo"},"How to use Turborepo?"),(0,r.kt)("p",null,"Following are some of the commands to use Turborepo:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"npx create-turbo@latest turbo-demo")," scaffolds a monorepo with different applications (API, frontend) and packages (design system and shared configs (eslint, tsconfig))"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"turbo run build")," builds all apps simultaneously. When you execute this command again, the second build completes in just 100ms because everything is cached. There are many ",(0,r.kt)("a",{parentName:"li",href:"https://turborepo.org/docs/reference/command-line-reference"},"variations")," of ",(0,r.kt)("inlineCode",{parentName:"li"},"turbo run")," command. "),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"turbo prune --scope=<target>")," creates a sparse/partial monorepo with a pruned lock file for a target package."),(0,r.kt)("li",{parentName:"ul"},"Remote Caching commands: ",(0,r.kt)("inlineCode",{parentName:"li"},"turbo login")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"turbo link"))),(0,r.kt)("br",null),(0,r.kt)("div",null,(0,r.kt)("a",{href:"https://discord.gg/refine"},(0,r.kt)("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/website/static/img/discord_big_blue.png",alt:"discord banner"}))),(0,r.kt)("h2",{id:"conclusion"},"Conclusion"),(0,r.kt)("p",null,"Turborepo is a high performant and blazing-fast build tool for monorepo. With the Javascript ecosystem growing rapidly, you need a modern and efficient set of tools, especially the build tool. "),(0,r.kt)("p",null,'As shown in the above picture, Turborepo is written 74% in the Go language, which means it is written with performance in mind. Clearly, the age of "JS tools in JS" is gone. Turborepo can make your pipeline 10x faster. It brings immense value out of the box with a declarative build pipeline, excellent debugging/profiling options, and great documentation.'))}d.isMDXComponent=!0}}]);