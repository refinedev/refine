"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[90329],{58860:(e,t,a)=>{a.d(t,{xA:()=>d,yg:()=>c});var n=a(37953);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var l=n.createContext({}),p=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},d=function(e){var t=p(e.components);return n.createElement(l.Provider,{value:t},e.children)},m="mdxType",g={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,r=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),m=p(a),u=i,c=m["".concat(l,".").concat(u)]||m[u]||g[u]||r;return a?n.createElement(c,o(o({ref:t},d),{},{components:a})):n.createElement(c,o({ref:t},d))}));function c(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=a.length,o=new Array(r);o[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[m]="string"==typeof e?e:i,o[1]=s;for(var p=2;p<r;p++)o[p]=a[p];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},1474:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>d,contentTitle:()=>l,default:()=>c,frontMatter:()=>s,metadata:()=>p,toc:()=>m});a(37953);var n=a(58860);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})),e}function o(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}const s={title:"An Introduction to Using FastAPI",description:"We'll be looking at FastAPI, a modern Python microframework that simplifies the creation of web APIs using Python programming.",slug:"introduction-to-fast-api",authors:"obisike_treause",tags:["dev-tools"],image:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2023-08-07-fast-api/social-2.png",hide_table_of_contents:!1},l=void 0,p={permalink:"/blog/introduction-to-fast-api",source:"@site/blog/2025-01-09-fast-api.md",title:"An Introduction to Using FastAPI",description:"We'll be looking at FastAPI, a modern Python microframework that simplifies the creation of web APIs using Python programming.",date:"2025-01-09T00:00:00.000Z",formattedDate:"January 9, 2025",tags:[{label:"dev-tools",permalink:"/blog/tags/dev-tools"}],readingTime:18.805,hasTruncateMarker:!1,authors:[{name:"Obisike Treasure",title:"Software Developer",imageURL:"https://github.com/Otrex.png",key:"obisike_treause"}],frontMatter:{title:"An Introduction to Using FastAPI",description:"We'll be looking at FastAPI, a modern Python microframework that simplifies the creation of web APIs using Python programming.",slug:"introduction-to-fast-api",authors:"obisike_treause",tags:["dev-tools"],image:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2023-08-07-fast-api/social-2.png",hide_table_of_contents:!1},prevItem:{title:"Essentials of TypeScript Classes",permalink:"/blog/typescript-classes"},nextItem:{title:"TypeScript Decorators in Brief",permalink:"/blog/typescript-decorators"},relatedPosts:[{title:"Beginner's Guide to React Query",description:"We'll be looking at the basics of React Query, how to use it, and why you should use it.",permalink:"/blog/react-query-guide",formattedDate:"November 28, 2024",authors:[{name:"Marvel Ken",title:"Software Developer",imageURL:"/img/generic-profile.png",key:"marvel_ken"}],readingTime:13.42,date:"2024-11-28T00:00:00.000Z"},{title:"React Design Patterns",description:"We'll explore React design patterns and examine how they might improve the development of React applications.",permalink:"/blog/react-design-patterns",formattedDate:"September 5, 2024",authors:[{name:"Peter Osah",title:"Web Developer",imageURL:"/img/generic-profile.png",key:"peter_osah"}],readingTime:14.98,date:"2024-09-05T00:00:00.000Z"},{title:"How to Use Nodemon to Automatically Restart Node.js Applications",description:"This guide shows you how to install and use Nodemon to streamline your development process.",permalink:"/blog/nodemon",formattedDate:"November 8, 2024",authors:[{name:"Necati \xd6zmen",title:"Head of Growth at Refine",url:"https://github.com/necatiozmen",description:"Feeling Irie",github:"https://github.com/necatiozmen",twitter:"https://twitter.com/necatiozmen3",linkedin:"https://www.linkedin.com/in/necatiozmen/",imageURL:"https://github.com/necatiozmen.png",key:"necati"}],readingTime:10.62,date:"2024-11-08T00:00:00.000Z"}],authorPosts:[]},d={authorsImageUrls:[void 0]},m=[{value:"Introduction",id:"introduction",level:2},{value:"What is FastAPI",id:"what-is-fastapi",level:2},{value:"Benefits of using FastAPI",id:"benefits-of-using-fastapi",level:2},{value:"Comparing FastAPI with other Python frameworks",id:"comparing-fastapi-with-other-python-frameworks",level:2},{value:"Django Vs FastAPI",id:"django-vs-fastapi",level:3},{value:"Flask Vs FastAPI",id:"flask-vs-fastapi",level:3},{value:"Pyramid Vs FastAPI",id:"pyramid-vs-fastapi",level:3},{value:"Getting Started",id:"getting-started",level:2},{value:"Creating your first route",id:"creating-your-first-route",level:3},{value:"Managing request and response bodies using FastAPI models",id:"managing-request-and-response-bodies-using-fastapi-models",level:3},{value:"Preview the API Documentation",id:"preview-the-api-documentation",level:3},{value:"Understanding FastAPI by building a REST API for an inventory application",id:"understanding-fastapi-by-building-a-rest-api-for-an-inventory-application",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Setting the project",id:"setting-the-project",level:3},{value:"Installing Dependencies",id:"installing-dependencies",level:3},{value:"Creating Your Endpoints",id:"creating-your-endpoints",level:3},{value:"FastAPI: Error Handling",id:"fastapi-error-handling",level:2},{value:"Handling Invalid IDs",id:"handling-invalid-ids",level:4},{value:"Customizing Error Responses",id:"customizing-error-responses",level:4},{value:"Catching Server Errors",id:"catching-server-errors",level:4},{value:"Use Asynchronous Libraries",id:"use-asynchronous-libraries",level:4},{value:"Implement Caching",id:"implement-caching",level:4},{value:"Use Load Balancer",id:"use-load-balancer",level:4},{value:"Improve Query Performance",id:"improve-query-performance",level:4},{value:"Gzip Compression",id:"gzip-compression",level:4},{value:"Advanced Concepts in FastAPI",id:"advanced-concepts-in-fastapi",level:2},{value:"Implementing the Authentication Middleware",id:"implementing-the-authentication-middleware",level:3},{value:"Database Integration",id:"database-integration",level:3},{value:"File Uploads",id:"file-uploads",level:3},{value:"Comparison Table",id:"comparison-table",level:2},{value:"Conclusion",id:"conclusion",level:2},{value:"Resources",id:"resources",level:2}],g={toc:m},u="wrapper";function c(e){var{components:t}=e,a=o(e,["components"]);return(0,n.yg)(u,r(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){i(e,t,a[t])}))}return e}({},g,a),{components:t,mdxType:"MDXLayout"}),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"This article was last updated on January 9, 2025, to include sections on Error Handling in FastAPI and Optimizing FastAPI Performance, with practical examples and simplified explanations for better understanding.")),(0,n.yg)("h2",{id:"introduction"},"Introduction"),(0,n.yg)("p",null,"Since its introduction to backend development, Python has grown in popularity, competing with pre-existing heavyweights such as ",(0,n.yg)("a",{parentName:"p",href:"https://www.php.net/"},"PHP")," and ",(0,n.yg)("a",{parentName:"p",href:"https://dotnet.microsoft.com/en-us/languages"},".Net"),". It has made the developer experience more efficient and streamlined by introducing simplicity and power. Despite being known to be slower than its counterpart, Python has thrived greatly in this ecosystem."),(0,n.yg)("p",null,"Several frameworks for developing web APIs have been developed, such as ",(0,n.yg)("a",{parentName:"p",href:"https://www.djangoproject.com/"},"Django")," and ",(0,n.yg)("a",{parentName:"p",href:"https://flask.palletsprojects.com/en/2.3.x/"},"Flask"),", but the underlying speed problem has always been present. As a result, another Python framework, FastAPI, has been developed to combat this issue."),(0,n.yg)("p",null,"Steps we'll cover:"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("a",{parentName:"li",href:"#what-is-fastapi"},"What is FastAPI")),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("a",{parentName:"li",href:"#benefits-of-using-fastapi"},"Benefits of using FastAPI")),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("a",{parentName:"li",href:"#comparing-fastapi-with-other-python-frameworks"},"Comparing FastAPI with other Python frameworks")),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("a",{parentName:"li",href:"#understanding-fastapi-by-building-a-rest-api-for-an-inventory-application"},"Understanding FastAPI by building a REST API for an inventory application")),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("a",{parentName:"li",href:"#advanced-concepts-in-fastapi"},"Advanced Concepts in FastAPI"))),(0,n.yg)("h2",{id:"what-is-fastapi"},"What is FastAPI"),(0,n.yg)("p",null,"FastAPI is a modern Python microframework that simplifies the creation of web APIs using Python programming. It allows developers to swiftly and easily build APIs, ensuring optimal performance and easy management without compromising code quality and efficiency."),(0,n.yg)("p",null,"It provides numerous advantages, including exceptional speed, outperforming several other Python backend frameworks, and competing with popular frameworks like Express.js."),(0,n.yg)("p",null,"FastAPI offers the simplicity of Flask as it closely resembles Flask but still packs out-of-the-box configurations such as validation, documentation, and response encoding."),(0,n.yg)("h2",{id:"benefits-of-using-fastapi"},"Benefits of using FastAPI"),(0,n.yg)("p",null,"As previously emphasized, FastAPI stands out due to its exceptional benefits and extensive advantages. Let's delve into some of the notable benefits it offers:"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Performance"),": FastAPI maximizes performance by utilizing the full potential of critical libraries and tools such as ",(0,n.yg)("a",{parentName:"li",href:"https://docs.pydantic.dev/latest/"},"Pydantic")," and the ",(0,n.yg)("a",{parentName:"li",href:"https://asgi.readthedocs.io/"},"ASGI")," ecosystem. Furthermore, because of its solid foundation on the Starlette framework, it seamlessly integrates the power of async/await functionality."),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Scalability"),": The modularity and simplicity of FastAPI allow for seamless integration with load balancers, facilitating scalability and ensuring efficient resource utilization."),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Automatic Documentation:")," By requiring the explicit definition of various FastAPI components, Pydantic's integration has allowed FastAPI to be able to generate its API documentation automatically. FastAPI provides Swagger API documentation."),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Ease-of-use:")," FastAPI is a Python framework, so the benefits of using Python are inherited. Not only that, FastAPI makes creating your server and building endpoints simple and quick."),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Request Validation"),": FastAPI provides request validation with a much more detailed error message readable by users. This is also attributed to its use of Pydantic for request data type specification.")),(0,n.yg)("h2",{id:"comparing-fastapi-with-other-python-frameworks"},"Comparing FastAPI with other Python frameworks"),(0,n.yg)("p",null,"FastAPI, a relatively new addition to the backend API ecosystem, competes with established Python giants such as Flask and Django. While Flask and Django have been recognized as leading frameworks in this space, it's important to see how they compare to FastAPI."),(0,n.yg)("h3",{id:"django-vs-fastapi"},"Django Vs FastAPI"),(0,n.yg)("p",null,"Django is a feature-rich Python backend framework that includes a variety of built-in libraries to meet the needs of various projects. It has powerful features like ORM, authentication mechanisms, and routing capabilities, which make it suitable for developing complex web applications."),(0,n.yg)("p",null,"FastAPI, on the other hand, shines as a nimble microframework that was purposefully designed to be lightweight. While it lacks a large library ecosystem, it compensates by being extremely fast. Unlike Django, which is limited by its app system, FastAPI uses modern Python techniques to unlock its inherent advantages and improve its performance."),(0,n.yg)("h3",{id:"flask-vs-fastapi"},"Flask Vs FastAPI"),(0,n.yg)("p",null,"Flask is a lightweight framework used by Python developers to quickly build web applications. Flask stands out for its design, giving developers more control and flexibility when structuring their applications, ensuring that the applications are tailored to their specific needs or requirements."),(0,n.yg)("p",null,"FastAPI, on the other hand, focuses on developing highly performant and scalable applications with exceptional speed. It has additional benefits discussed in this article and is best suited for complex applications."),(0,n.yg)("h3",{id:"pyramid-vs-fastapi"},"Pyramid Vs FastAPI"),(0,n.yg)("p",null,'Pyramid is yet another intriguing flavor of one of Python\'s most popular backend frameworks. It adheres to the "use only what you need" philosophy, which means it provides a minimalistic core that can be supplemented with various add-ons and libraries. This modular approach enables developers to pick and choose which components they need for their specific use cases, resulting in a lightweight and highly customizable framework.'),(0,n.yg)("p",null,"FastAPI, on the other hand, prioritizes developer productivity and ease of use. It has a simple and intuitive API design, as well as clear documentation and extensive examples. It also comes with some pre-built tools, such as auto-documentation generation."),(0,n.yg)("h2",{id:"getting-started"},"Getting Started"),(0,n.yg)("p",null,"With FastAPI, you can easily set up a project in a few steps. Firstly, like any other Python project, you'll need to set up your virtual environment. After that, you\u2019ll need to install the packages, FastAPI and Uvicorn."),(0,n.yg)("p",null,"To do this, run the command:"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-py"},"python -m pip install fastapi 'uvicorn[standard]'\n")),(0,n.yg)("p",null,"With that, you can start creating the endpoints required for your application."),(0,n.yg)("p",null,"The packages ",(0,n.yg)("strong",{parentName:"p"},"fastapi")," and ",(0,n.yg)("strong",{parentName:"p"},"uvicorn")," are essential for setting up a FastAPI project. The package ",(0,n.yg)("strong",{parentName:"p"},"uvicorn")," creates the server that runs the FastAPI setup, while ",(0,n.yg)("strong",{parentName:"p"},"fastapi")," provides the necessary methods and configurations for creating endpoints."),(0,n.yg)("h3",{id:"creating-your-first-route"},"Creating your first route"),(0,n.yg)("p",null,"To create your first route, create a file, ",(0,n.yg)("strong",{parentName:"p"},"main.py,")," which will contain all your code. Open the file in your text editor and add the following:"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-py"},'from fastapi import FastAPI\n\nfastapi = FastAPI()\n\n@fastapi.get("/")\nasync def home():\n    return {"data": "Hello World"}\n')),(0,n.yg)("p",null,"In the above snippet, you\u2019ll notice that you are importing the ",(0,n.yg)("strong",{parentName:"p"},"FastAPI")," class from the ",(0,n.yg)("strong",{parentName:"p"},"fastapi")," module and then instantiating the class."),(0,n.yg)("p",null,"The instance of the ",(0,n.yg)("inlineCode",{parentName:"p"},"FastAPI")," class can then be used as a decorator for the handler function to set up the endpoints. This instance provides the REST API verbs such as PUT, DELETE, PATCH, GET, and POST and a way to set the resource path."),(0,n.yg)("p",null,"Once that is done, you can run the following command on the terminal to start the server."),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-tsx"},"uvicorn main:fastapi --reload\n")),(0,n.yg)("p",null,"The ",(0,n.yg)("strong",{parentName:"p"},"main")," represents the module import, and the ",(0,n.yg)("strong",{parentName:"p"},"fastapi")," is an instance of the FastAPI. The command above starts the server, which can then be accessed via the browser at ",(0,n.yg)("strong",{parentName:"p"},(0,n.yg)("a",{parentName:"strong",href:"http://127.0.0.1:8000"},"http://127.0.0.1:8000")),"."),(0,n.yg)("div",null,(0,n.yg)("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2023-08-07-fast-api/cli.png",alt:"introduction to fast api "})),(0,n.yg)("p",null,"To add another route, simply create a handler function e.g."),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-py"},'def handler():\n    return { "data": "from handler"}\n')),(0,n.yg)("p",null,"After that, using the FastAPI instance you created, add the decorator"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-py"},'@fastapi.post("/home-page")\n')),(0,n.yg)("p",null,"To the function. This converts the function to an API endpoint."),(0,n.yg)("p",null,"You can use ",(0,n.yg)("strong",{parentName:"p"},"@fastapi.post"),", ",(0,n.yg)("strong",{parentName:"p"},"@fastapi.put")," or ",(0,n.yg)("strong",{parentName:"p"},"@fastapi.patch")," or ",(0,n.yg)("strong",{parentName:"p"},"@fastapi.delete")," to create different endpoints."),(0,n.yg)("h3",{id:"managing-request-and-response-bodies-using-fastapi-models"},"Managing request and response bodies using FastAPI models"),(0,n.yg)("p",null,"Sending and receiving data to an endpoint is a fundamental aspect of API development. When it comes to the sending aspect, there are multiple methods for sending data to an endpoint, one of which includes the following:"),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"Path parameters"),": This method involves attaching short data directly to the URL path. To implement this functionality in a FastAPI's endpoint, you can refer to the example below:"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-py"},'# other data goes here\n@fastapi.get("/{name}")\nasync def get_name(name: str):\n    return { "name": name }\n')),(0,n.yg)("p",null,"In the above example, the ",(0,n.yg)("strong",{parentName:"p"},"name")," is a path parameter that is extracted from the URL and passed as a parameter to the ",(0,n.yg)("strong",{parentName:"p"},"get_name")," function. This way, you can conveniently access the data sent through the URL path."),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"Query parameters"),': They are similar to the path parameter, but the difference is that the query parameters are appended to the URL after a question mark ("?"). To implement query parameters in a FastAPI\'s endpoint, you can refer to the example below:'),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-py"},'@fastapi.get("/")\nasync def get_api_data(data_type: str, skip: int = 0, limit: int = 10):\n    return { "data_type": data_type, "skip": skip, "limit": limit }\n')),(0,n.yg)("p",null,"In the above example, the ",(0,n.yg)("strong",{parentName:"p"},"skip")," and ",(0,n.yg)("strong",{parentName:"p"},"limit"),' parameters are query parameters. They are provided via the URL after the endpoint ("/") using the format ',(0,n.yg)("strong",{parentName:"p"},"?key=value"),". The ",(0,n.yg)("strong",{parentName:"p"},"skip")," and ",(0,n.yg)("strong",{parentName:"p"},"limit")," parameters have default values of 0 and 10, respectively, but can be overridden by providing different values in the URL."),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"Body parameters:")," This type is different from the previously mentioned. It\u2019s a method whereby the data is encoded and appended to the request made to the endpoint. The body parameter is implemented in the following way:"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-py"},'from pydantic import BaseModel\nfrom fastapi import FastAPI\n\nfastapi = FastAPI()\nclass Item(BaseModel):\n    name: str\n    price: float\n\n@fastapi.post("/items")\nasync def create_item(item: Item):\n    return {"item": item}\n')),(0,n.yg)("p",null,"In the above example, we define an ",(0,n.yg)("strong",{parentName:"p"},"Item")," class that inherits from ",(0,n.yg)("strong",{parentName:"p"},"BaseModel")," provided by Pydantic. This system defines the whole request body parameters and provides more context to FastAPI."),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"Headers and Cookies"),": One of the major ways of sending extra information for context to the server is through headers and cookies. To do this with FastAPI, simply follow the example below. \\\nFor Headers:"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-py"},'from fastapi import FastAPI, Header\n\napp = FastAPI()\n\n@app.get("/items")\nasync def read_items(user_agent: str = Header(None)):\n    return {"User-Agent": user_agent}\n')),(0,n.yg)("p",null,"In the above example, the ",(0,n.yg)("strong",{parentName:"p"},"user_agent")," parameter is given the default, ",(0,n.yg)("strong",{parentName:"p"},"Header(None)"),", which tells FastAPI to extract the value of the header from the request. If the header is present in the request, ",(0,n.yg)("strong",{parentName:"p"},"user_agent")," will be set to it; otherwise, ",(0,n.yg)("strong",{parentName:"p"},"user_agent")," will be set to ",(0,n.yg)("strong",{parentName:"p"},"None"),"."),(0,n.yg)("p",null,"For Cookies:"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-py"},'from fastapi import FastAPI, Cookie\n\napp = FastAPI()\n\n@app.get("/items/")\nasync def read_items(session_token: str = Cookie(None)):\n    return {"session_token": session_token}\n')),(0,n.yg)("p",null,"In this example, similarly to headers, the ",(0,n.yg)("strong",{parentName:"p"},"session_token")," parameter is given the default value of ",(0,n.yg)("strong",{parentName:"p"},"Cookie(None)"),", indicating that FastAPI should inject the cookies set on the request into the ",(0,n.yg)("strong",{parentName:"p"},"session_token")," parameter. If no cookies are set, then the value of the ",(0,n.yg)("strong",{parentName:"p"},"session_token")," will be None."),(0,n.yg)("h3",{id:"preview-the-api-documentation"},"Preview the API Documentation"),(0,n.yg)("p",null,"Once the server is running on the browser, visit ",(0,n.yg)("strong",{parentName:"p"},(0,n.yg)("a",{parentName:"strong",href:"http://127.0.0.1:8000/docs"},"http://127.0.0.1:8000/docs"))),(0,n.yg)("div",null,(0,n.yg)("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2023-08-07-fast-api/preivew-api.png",alt:"introduction to fast api "})),(0,n.yg)("h2",{id:"understanding-fastapi-by-building-a-rest-api-for-an-inventory-application"},"Understanding FastAPI by building a REST API for an inventory application"),(0,n.yg)("p",null,"To demonstrate the power of FastAPI, you\u2019ll be building a REST API for a hypothetical inventory application. This API will be connected to a database, support image uploads, and have protected routes. This API will have the following endpoints:"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"GET /items")," - To fetch all the items stored on the server"),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"GET /items/{item_id}")," - to get a specific item from the server"),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"POST /items")," - to get add a new item to our server"),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"PATCH /items/{item_id}")," - to update the item on the server"),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"DELETE /items/{item_id}")," - to delete an item from the inventory")),(0,n.yg)("p",null,"Then you\u2019ll be creating more endpoints to handle the serving of files, and you'll also be adding a database and some sort of authentication to some of the endpoints using a middleware."),(0,n.yg)("h3",{id:"prerequisites"},"Prerequisites"),(0,n.yg)("p",null,"To follow along, you\u2019ll need to have the following:"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},"Knowledge of Python"),(0,n.yg)("li",{parentName:"ul"},"Knowledge of HTTP, JSON, REST API and Python\u2019s Virtual Environment"),(0,n.yg)("li",{parentName:"ul"},"A terminal"),(0,n.yg)("li",{parentName:"ul"},"Python 3.10 installed")),(0,n.yg)("h3",{id:"setting-the-project"},"Setting the project"),(0,n.yg)("p",null,"To do this, set up a virtual environment by following the ",(0,n.yg)("a",{parentName:"p",href:"https://docs.python.org/3/library/venv.html"},"instructions"),". Once done, you must create the ",(0,n.yg)("strong",{parentName:"p"},"src")," directory in the virtual environment folder. This is where your code will reside."),(0,n.yg)("p",null,"Open the directory using your code editor."),(0,n.yg)("div",{className:"centered-image"},(0,n.yg)("img",{width:"300px",src:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2023-08-07-fast-api/folder-structure.png",alt:"introduction to fast api "})),(0,n.yg)("h3",{id:"installing-dependencies"},"Installing Dependencies"),(0,n.yg)("p",null,"You'll only need essential dependencies such as Uvicorn and FastAPI to accomplish this. However, since you'll be enhancing the server's capabilities by incorporating a database connection and a file upload system, installing additional dependencies like databases and SQLAlchemy is necessary."),(0,n.yg)("p",null,"To proceed, run the command:"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-py"},"pip install 'fastapi[all]' 'uvicorn[standard]' databases sqlalchemy\n")),(0,n.yg)("p",null,"This will install all the necessary dependencies for this project."),(0,n.yg)("h3",{id:"creating-your-endpoints"},"Creating Your Endpoints"),(0,n.yg)("p",null,"In your ",(0,n.yg)("strong",{parentName:"p"},"src")," directory, create a new file, ",(0,n.yg)("strong",{parentName:"p"},"main.py"),"; this will be the entry point of your application."),(0,n.yg)("p",null,"So on the ",(0,n.yg)("strong",{parentName:"p"},"main.py"),", add the following:"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-py"},'from fastapi import FastAPI\nfrom fastapi import HTTPException\nfrom .utils import find_item\nfrom pydantic import BaseModel, Field\nfrom typing import Optional\n\nfastapi = FastAPI()\n\ninventory = [\n  { "id": 1, "name": "Treasure", "quantity": 3 }\n]\n\n\nclass Item(BaseModel):\n  name: str\n  quantity: int\n\nclass ItemUpdate(BaseModel):\n  name: Optional[str] = Field(None, description="Optional name of the item")\n  quantity: Optional[int] = Field(None, description="Optional quantity of the item")\n\n@fastapi.get("/items")\nasync def get_items():\n  return {"items": inventory}\n\n\n@fastapi.get("/items/{item_id}")\nasync def get_item(item_id: int):\n  item, idx = find_item(inventory, lambda x: x["id"] == item_id)\n  return { "item": item }\n\n@fastapi.delete("/items/{item_id}")\nasync def delete_item(item_id: int, authenticated: bool = Depends(authenticate)):\n  item, idx = find_item(inventory, lambda x: x["id"] == item_id)\n  if idx == -1: return HTTPException(404, "item not found")\n  inventory.pop(idx)\n  return { "item": item }\n\n\n\n@fastapi.post("/items")\nasync def add_item(data: Item):\n  item = {\n    "id": len(inventory) + 1,\n    "name": data.name,\n    "quantity": data.quantity\n  }\n  inventory.append(item)\n  return item\n\n@fastapi.patch("/items/{item_id}")\nasync def update_item(item_id: int, item_update: ItemUpdate):\n  item, idx = find_item(inventory, lambda x: x["id"] == item_id)\n  if idx == -1:\n    raise HTTPException(status_code=404, detail="Item not found")\n\n  if item_update.name is not None:\n    item["name"] = item_update.name\n\n  if item_update.quantity is not None:\n    item["quantity"] = item_update.quantity\n\n  inventory[idx] = item\n\n  return item\n')),(0,n.yg)("p",null,"In the snippet above, there are five handlers for the endpoints. You have a local ",(0,n.yg)("strong",{parentName:"p"},"inventory")," data store that saves all the added ",(0,n.yg)("strong",{parentName:"p"},"items"),". The ",(0,n.yg)("strong",{parentName:"p"},"ItemUpdate")," class specifies the body parameter for the patch endpoint, allowing for optional parameters. The ",(0,n.yg)("strong",{parentName:"p"},"Optional")," class from the ",(0,n.yg)("strong",{parentName:"p"},"typing")," module and the ",(0,n.yg)("strong",{parentName:"p"},"Field")," class from ",(0,n.yg)("strong",{parentName:"p"},"pydantic")," are imported for creating these optional fields."),(0,n.yg)("p",null,"Add the ",(0,n.yg)("a",{parentName:"p",href:"https://github.com/Otrex/refine-fastapi/blob/main/src/utils.py"},"utility functions")," to a file, ",(0,n.yg)("strong",{parentName:"p"},"utils.py"),", in the src directory."),(0,n.yg)("p",null,"Following that, you can run the server to test the endpoints via the documentation."),(0,n.yg)("h2",{id:"fastapi-error-handling"},"FastAPI: Error Handling"),(0,n.yg)("p",null,"Error handling in FastAPI is quite straightforward and intuitive. FastAPI provides an in-built class called HTTPException which makes it very easy to return proper error responses if something goes wrong."),(0,n.yg)("p",null,"The following is an example that uses HTTPException for handling invalid inputs:"),(0,n.yg)("h4",{id:"handling-invalid-ids"},"Handling Invalid IDs"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-python"},'from fastapi import FastAPI, HTTPException\n\napp = FastAPI()\n\n@app.get("/items/{item_id}")\nasync def read_item(item_id: int):\n    if item_id <= 0:\n        # Raise an error if the item_id is invalid\n        raise HTTPException(\n            status_code=400,\n            detail="Invalid ID. ID must be greater than 0."\n        )\n    return {"item_id": item_id}\n')),(0,n.yg)("p",null,"This would be the response when the request sent by the user has item_id less than or equal to 0:"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-json"},'{\n  "detail": "Invalid ID. ID must be greater than 0."\n}\n')),(0,n.yg)("h4",{id:"customizing-error-responses"},"Customizing Error Responses"),(0,n.yg)("p",null,"You can also personalize the error response to include more information:"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-python"},"@app.get(\"/users/{user_id}\")\nasync def read_user(user_id: int):\n    if user_id > 100:\n        raise HTTPException(\n            status_code=404,\n            detail={'error': 'User not found', 'user_id': user_id}\n        )\n    return {\"user_id\": user_id}\n")),(0,n.yg)("p",null,"The response for an invalid user ID might look like this:"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-json"},'{\n  "error": "User not found",\n  "user_id": 150\n}\n')),(0,n.yg)("h4",{id:"catching-server-errors"},"Catching Server Errors"),(0,n.yg)("p",null,"For unexpected errors, use the following exception handlers:"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-python"},'from fastapi import Request\nfrom fastapi.responses import JSONResponse\n\n@app.exception_handler(Exception)\nasync def global_exception_handler(request: Request, exc: Exception):\n    return JSONResponse(\n        status_code=500,\n        content={"message": "An unexpected error occurred. Please try again."}\n    )\n')),(0,n.yg)("p",null,"This ensures that should something fail on the server, the user will get a friendly error message."),(0,n.yg)("ol",{start:5},(0,n.yg)("li",{parentName:"ol"},"Optimizing Performance in FastAPI")),(0,n.yg)("p",null,"FastAPI is fast by default, but some things you can do will further increase the speed. Here are a few tips and code examples:"),(0,n.yg)("h4",{id:"use-asynchronous-libraries"},"Use Asynchronous Libraries"),(0,n.yg)("p",null,"Use async libraries like httpx for HTTP requests that don't block."),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-python"},'import httpx\nfrom fastapi import FastAPI\n\napp = FastAPI()\n\n@app.get("/data")\nasync def get_data():\n    async with httpx.AsyncClient() as client:\n        response = await client.get("https://api.example.com/data")\n        return response.json()\n')),(0,n.yg)("h4",{id:"implement-caching"},"Implement Caching"),(0,n.yg)("p",null,"Caching reduces the number of database calls or API calls a server makes repeatedly; cache the responses using tools like Redis."),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-python"},'import aioredis\nfrom fastapi import FastAPI\n\napp = FastAPI()\nredis = aioredis.from_url("redis://localhost")\n\n@app.get("/items/{item_id}")\nasync def read_item(item_id: int):\n    # Check if item is cached\n    cached_item = await redis.get(f"item:{item_id}")\n    if cached_item:\n        return {"item": cached_item.decode("utf-8")}\n\n    # Simulate database fetch\n    item = f"Item {item_id}"\n    await redis.set(f"item:{item_id}", item)\n    return {"item": item}\n')),(0,n.yg)("h4",{id:"use-load-balancer"},"Use Load Balancer"),(0,n.yg)("p",null,"Configure a load balancer like Nginx or Traefik to do the heavy lifting on requests. A typical example might be this inside an Nginx config file:"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-nginx"},'server {\n    listen 80;\n\n    location / {\n        proxy_pass http://127.0.0.1:8000;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection "upgrade";\n        proxy_set_header Host $host;\n    }\n}\n')),(0,n.yg)("h4",{id:"improve-query-performance"},"Improve Query Performance"),(0,n.yg)("p",null,"Proper indexing of your database and avoiding fetching the data which isn't required."),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-python"},'from sqlalchemy.orm import Session\nfrom fastapi import Depends\n\n@app.get("/users")\nasync def get_users(limit: int = 10, db: Session = Depends(get_db)):\n    return db.query(User).limit(limit).all()\n')),(0,n.yg)("h4",{id:"gzip-compression"},"Gzip Compression"),(0,n.yg)("p",null,"Enable Gzip compression in order to reduce response size:"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-bash"},"pip install fastapi-compression\n")),(0,n.yg)("p",null,"Then, add it to your FastAPI app:"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-python"},"from fastapi import FastAPI\nfrom fastapi_compression import CompressionMiddleware\n\napp = FastAPI()\napp.add_middleware(CompressionMiddleware)\n")),(0,n.yg)("p",null,"Follow these tips, and your FastAPI application will be fast and efficient, ready for high loads."),(0,n.yg)("h2",{id:"advanced-concepts-in-fastapi"},"Advanced Concepts in FastAPI"),(0,n.yg)("p",null,"APIs are usually not basic, like the inventory API created. Sometimes, you'll need to persist data or validate credentials before performing requests or handling files."),(0,n.yg)("p",null,"For your inventory app, you'll be adding the validation middleware, the file upload, and the database."),(0,n.yg)("h3",{id:"implementing-the-authentication-middleware"},"Implementing the Authentication Middleware"),(0,n.yg)("p",null,"Middlewares are like the valves of the API world. They can be used to do a lot of things, like restricting access to certain users, adding extra context to the request, and many more. To demonstrate its capability, you are going to create a middleware that allows access to clients that have a certain credential and add it to some of the endpoints of the inventory app."),(0,n.yg)("p",null,"Create a new file in the ",(0,n.yg)("strong",{parentName:"p"},"src")," directory called ",(0,n.yg)("strong",{parentName:"p"},"middleware.py")," and add the following code:"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-py"},"from fastapi import HTTPException, Depends\nfrom fastapi.security import HTTPBasic, HTTPBasicCredentials\n\nsecurity = HTTPBasic()\n\ndef authenticate(credentials: HTTPBasicCredentials = Depends(security)):\n    correct_username = 'admin'\n    correct_password = 'password'\n    if credentials.username != correct_username or credentials.password != correct_password:\n        raise HTTPException(status_code=401, detail=\"Unauthorized\")\n    return True\n")),(0,n.yg)("p",null,"In the case above, the middleware, ",(0,n.yg)("inlineCode",{parentName:"p"},"authenticate"),", implements basic authentication. To add this to your desired route handler, go to the ",(0,n.yg)("strong",{parentName:"p"},"main.py")," file, locate the endpoints you want to add ",(0,n.yg)("strong",{parentName:"p"},"authentication")," and add the parameter:"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-py"},"authenticated: bool = Depends(authenticate)\n")),(0,n.yg)("p",null,"After that, the handler will look like this:"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-py"},'@fastapi.post("/items")\nasync def add_item(data: Item, authenticated: bool = Depends(authenticate)):\n  item = {\n    "name": data.name,\n    "id": len(inventory) + 1,\n    "quantity": data.quantity\n  }\n  inventory.append(item)\n  return item\n')),(0,n.yg)("p",null,"Ensure you import the ",(0,n.yg)("strong",{parentName:"p"},"authenticate")," from the ",(0,n.yg)("strong",{parentName:"p"},"middleware.py")," you created and ",(0,n.yg)("strong",{parentName:"p"},"Depends")," from ",(0,n.yg)("strong",{parentName:"p"},"fastapi.")),(0,n.yg)("h3",{id:"database-integration"},"Database Integration"),(0,n.yg)("p",null,"To add a database to our existing inventory app, we must first ensure that ",(0,n.yg)("strong",{parentName:"p"},"sqlalchemy")," and ",(0,n.yg)("strong",{parentName:"p"},"databases")," are installed. Then create a file, \u201c",(0,n.yg)("strong",{parentName:"p"},"database.py"),"\u201d in the ",(0,n.yg)("strong",{parentName:"p"},"src")," directory, Then we need to import the following:"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-py"},"from sqlalchemy import Column, Integer, String, create_engine\nfrom sqlalchemy.ext.declarative import declarative_base\nfrom sqlalchemy.orm import sessionmaker\n")),(0,n.yg)("p",null,"You\u2019ll be using SQLite due to its simplicity."),(0,n.yg)("p",null,"Next, you'll need to create the database engine by adding the code to the file"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-py"},'DATABASE_URL = "sqlite:///./database.db"\nengine = create_engine(DATABASE_URL)\n')),(0,n.yg)("p",null,"This is the basic connection configuration for the database.\nAfter that, create the ",(0,n.yg)("strong",{parentName:"p"},"SessionLocal")," class, which creates a database session when called, and the ",(0,n.yg)("strong",{parentName:"p"},"Base")," class, which will serve as the ",(0,n.yg)("strong",{parentName:"p"},"BaseModel")," for all the database models to inherit."),(0,n.yg)("p",null,"On the same ",(0,n.yg)("strong",{parentName:"p"},"database.py")," file, add the following:"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-py"},"SessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine)\nBase = declarative_base()\n")),(0,n.yg)("p",null,"Next, create a database model by creating by adding the following:"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-py"},'class DBItem(Base):\n    __tablename__ = "items"\n\n    id = Column(Integer, primary_key=True, index=True)\n    quantity = Column(Integer)\n    name = Column(String)\n')),(0,n.yg)("p",null,"After that, you'll need to import the ",(0,n.yg)("strong",{parentName:"p"},"DBItem")," and the ",(0,n.yg)("strong",{parentName:"p"},"SessionLocal")," from the ",(0,n.yg)("strong",{parentName:"p"},"database.py")," file to the ",(0,n.yg)("strong",{parentName:"p"},"main.py")," file."),(0,n.yg)("p",null,"Additionally, make sure to update the route handlers accordingly."),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-py"},'@fastapi.post("/items")\ndef create_item(item: Item, authenticated: bool = Depends(authenticate)):\n    db = SessionLocal()\n    new_item = DBItem(name=item.name, quantity=item.quantity)\n    db.add(new_item)\n    db.commit()\n    db.refresh(new_item)\n    return {"item" :new_item}\n\n@fastapi.get("/items")\nasync def get_items():\n  db = SessionLocal()\n  items = db.query(DBItem).all()\n  return { "items": items }\n\n\n@fastapi.get("/items/{item_id}")\ndef get_item(item_id: int):\n    db = SessionLocal()\n    item = db.query(DBItem).filter(DBItem.id == item_id).first()\n    if not item:\n        raise HTTPException(status_code=404, detail="Item not found")\n    return {"item": item}\n\n@fastapi.patch("/items/{item_id}")\ndef update_item(item_id: int, item: ItemUpdate, authenticated: bool = Depends(authenticate)):\n    db = SessionLocal()\n    db_item = db.query(DBItem).filter(DBItem.id == item_id).first()\n    if not db_item:\n        raise HTTPException(status_code=404, detail="Item not found")\n    db_item.name = item.name\n    db_item.quantity = item.quantity\n    db.commit()\n    db.refresh(db_item)\n    return { "item": db_item}\n\n@fastapi.delete("/items/{item_id}")\ndef delete_item(item_id: int, authenticated: bool = Depends(authenticate)):\n    db = SessionLocal()\n    db_item = db.query(DBItem).filter(DBItem.id == item_id).first()\n    if not db_item:\n        raise HTTPException(status_code=404, detail="Item not found")\n    db.delete(db_item)\n    db.commit()\n    return {"message": "Item deleted"}\n')),(0,n.yg)("p",null,"In the code above, you\u2019ll notice that you are instantiating the ",(0,n.yg)("strong",{parentName:"p"},"SessionLocal")," for each endpoint, which is then used to perform the database queries. After the query is performed, you can then commit it to the database for persistence."),(0,n.yg)("h3",{id:"file-uploads"},"File Uploads"),(0,n.yg)("p",null,"With FastAPI, file uploads can be done very easily. We\u2019ll use our existing API to demonstrate how file uploads and serving can be achieved. First, you\u2019ll have to update the DBItem in your ",(0,n.yg)("strong",{parentName:"p"},"database.py")," file by adding the following:"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-py"},"class DBItem(Base):\n    # other database fields goes here\n    image_src = Column(String)\n")),(0,n.yg)("p",null,"After that, on the ",(0,n.yg)("strong",{parentName:"p"},"main.py"),", import ",(0,n.yg)("strong",{parentName:"p"},"File")," and ",(0,n.yg)("strong",{parentName:"p"},"UploadFile")," from ",(0,n.yg)("strong",{parentName:"p"},"fastapi"),", import ",(0,n.yg)("strong",{parentName:"p"},"os")," and then import ",(0,n.yg)("strong",{parentName:"p"},"FileResponse")," from ",(0,n.yg)("strong",{parentName:"p"},"starlette.responses"),". After that, add the following:"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-py"},'@fastapi.patch("/item-image/{item_id}")\nasync def upload_file(item_id: int, file: UploadFile = File()):\n    db = SessionLocal()\n    db_item = db.query(DBItem).filter(DBItem.id == item_id).first()\n    if not db_item:\n        raise HTTPException(status_code=404, detail="Item not found")\n\n    file_path = os.path.join("uploads", file.filename)\n    with open(file_path, "wb") as f:\n        f.write(await file.read())\n\n    db_item.image_src = file.filename\n    db.commit()\n    db.refresh(db_item)\n\n    return {"item": db_item}\n\n@fastapi.get("/static/{file}")\nasync def serve_file(file: str):\n    return FileResponse(os.path.join("uploads", file))\n')),(0,n.yg)("p",null,"The first route handler in the snippet above updates the ",(0,n.yg)("strong",{parentName:"p"},"image_src")," field of the specified item and uploads the file to the server. Then the second, ",(0,n.yg)("strong",{parentName:"p"},"serve_file"),", handles the file retrieval from the server."),(0,n.yg)("p",null,"Starlette offers several other types of responses, including the ",(0,n.yg)("strong",{parentName:"p"},"FileResponse"),", which can then be used on the route handler."),(0,n.yg)("div",{className:"centered-image"},(0,n.yg)("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2023-08-07-fast-api/swagger-last.png",alt:"introduction to fast api"})),(0,n.yg)("p",null,"The source code for this inventory API can be found ",(0,n.yg)("a",{parentName:"p",href:"https://github.com/Otrex/refine-fastapi"},"here"),"."),(0,n.yg)("h2",{id:"comparison-table"},"Comparison Table"),(0,n.yg)("table",null,(0,n.yg)("thead",{parentName:"table"},(0,n.yg)("tr",{parentName:"thead"},(0,n.yg)("th",{parentName:"tr",align:null},(0,n.yg)("strong",{parentName:"th"},"Feature")),(0,n.yg)("th",{parentName:"tr",align:null},(0,n.yg)("strong",{parentName:"th"},"FastAPI")),(0,n.yg)("th",{parentName:"tr",align:null},(0,n.yg)("strong",{parentName:"th"},"Django")),(0,n.yg)("th",{parentName:"tr",align:null},(0,n.yg)("strong",{parentName:"th"},"Flask")),(0,n.yg)("th",{parentName:"tr",align:null},(0,n.yg)("strong",{parentName:"th"},"Pyramid")))),(0,n.yg)("tbody",{parentName:"table"},(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:null},"Performance"),(0,n.yg)("td",{parentName:"tr",align:null},"High (ASGI & async/await)"),(0,n.yg)("td",{parentName:"tr",align:null},"Moderate"),(0,n.yg)("td",{parentName:"tr",align:null},"Moderate"),(0,n.yg)("td",{parentName:"tr",align:null},"Moderate")),(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:null},"Auto Documentation"),(0,n.yg)("td",{parentName:"tr",align:null},"Yes (Swagger/OpenAPI)"),(0,n.yg)("td",{parentName:"tr",align:null},"No"),(0,n.yg)("td",{parentName:"tr",align:null},"No"),(0,n.yg)("td",{parentName:"tr",align:null},"No")),(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:null},"Database Integration"),(0,n.yg)("td",{parentName:"tr",align:null},"Requires external libraries"),(0,n.yg)("td",{parentName:"tr",align:null},"Built-in ORM (Django ORM)"),(0,n.yg)("td",{parentName:"tr",align:null},"Requires external libraries"),(0,n.yg)("td",{parentName:"tr",align:null},"Requires external libraries")),(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:null},"Scalability"),(0,n.yg)("td",{parentName:"tr",align:null},"High"),(0,n.yg)("td",{parentName:"tr",align:null},"High"),(0,n.yg)("td",{parentName:"tr",align:null},"Moderate"),(0,n.yg)("td",{parentName:"tr",align:null},"High")),(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:null},"Learning Curve"),(0,n.yg)("td",{parentName:"tr",align:null},"Easy"),(0,n.yg)("td",{parentName:"tr",align:null},"Moderate"),(0,n.yg)("td",{parentName:"tr",align:null},"Easy"),(0,n.yg)("td",{parentName:"tr",align:null},"Moderate")))),(0,n.yg)("h2",{id:"conclusion"},"Conclusion"),(0,n.yg)("p",null,"Congratulations on making it this far! By now, you should have gained valuable insight into using FastAPI to build your backend application. FastAPI is an exceptional, user-friendly, and highly effective API development tool. It provides the flexibility associated with a microframework and delivers exceptional performance, making it an excellent choice for your API development requirements."),(0,n.yg)("h2",{id:"resources"},"Resources"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("a",{parentName:"li",href:"https://fastapi.tiangolo.com"},"FastAPI documentation")),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("a",{parentName:"li",href:"https://www.starlette.io/"},"Starlette documentation")),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("a",{parentName:"li",href:"https://docs.pydantic.dev/latest/"},"Pydantic documentation"))))}c.isMDXComponent=!0}}]);