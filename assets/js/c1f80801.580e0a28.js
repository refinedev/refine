"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[84871],{3905:(e,n,t)=>{t.d(n,{Zo:()=>m,kt:()=>d});var r=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=r.createContext({}),p=function(e){var n=r.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},m=function(e){var n=p(e.components);return r.createElement(s.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},u=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),u=p(t),d=a,g=u["".concat(s,".").concat(d)]||u[d]||c[d]||o;return t?r.createElement(g,i(i({ref:n},m),{},{components:t})):r.createElement(g,i({ref:n},m))}));function d(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,i=new Array(o);i[0]=u;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var p=2;p<o;p++)i[p]=t[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,t)}u.displayName="MDXCreateElement"},29310:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>m,contentTitle:()=>s,default:()=>f,frontMatter:()=>l,metadata:()=>p,toc:()=>c});t(67294);var r=t(3905);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){return n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})),e}function i(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}const l={title:"Simple Web Application Example with Refine",description:"Do you want to develop a web application quickly? You are at the right place!",slug:"simple-web-application-with-refine",authors:"aydin",tags:["refine","supabase","react","tutorial"],image:"https://refine.ams3.cdn.digitaloceanspaces.com/website/static/img/placeholder.png",hide_table_of_contents:!1},s=void 0,p={permalink:"/blog/simple-web-application-with-refine",source:"@site/blog/2021-10-4-simple-web-application.md",title:"Simple Web Application Example with Refine",description:"Do you want to develop a web application quickly? You are at the right place!",date:"2021-10-04T00:00:00.000Z",formattedDate:"October 4, 2021",tags:[{label:"refine",permalink:"/blog/tags/refine"},{label:"supabase",permalink:"/blog/tags/supabase"},{label:"react",permalink:"/blog/tags/react"},{label:"tutorial",permalink:"/blog/tags/tutorial"}],readingTime:9.445,hasTruncateMarker:!0,authors:[{name:"Ayd\u0131n Akyol",title:"Software Developer",url:"https://github.com/biskuvit",imageURL:"https://github.com/biskuvit.png",key:"aydin"}],frontMatter:{title:"Simple Web Application Example with Refine",description:"Do you want to develop a web application quickly? You are at the right place!",slug:"simple-web-application-with-refine",authors:"aydin",tags:["refine","supabase","react","tutorial"],image:"https://refine.ams3.cdn.digitaloceanspaces.com/website/static/img/placeholder.png",hide_table_of_contents:!1},prevItem:{title:"Let's Build an App to Manage Your Hackathons with Refine",permalink:"/blog/manage-hackathons-with-refine"},relatedPosts:[{title:"A Guide on React Lazy Loading",description:"We will be looking at what lazy loading is, how it works, and how it can be used to improve the performance of React applications.",permalink:"/blog/react-lazy-loading",formattedDate:"December 7, 2022",authors:[{name:"Chidume Nnamdi",title:"Software Engineer",url:"https://github.com/philipszdavido",imageURL:"https://github.com/philipszdavido.png",key:"chidume_nnamdi"}],readingTime:9.85,date:"2022-12-07T00:00:00.000Z"},{title:"Understanding Virtual DOM in React",description:"We'll dive into the concept of a virtual DOM in the React as well as explore its purpose.",permalink:"/blog/react-virtual-dom",formattedDate:"November 23, 2023",authors:[{name:"Peter Osah",title:"Web Developer",imageURL:"/img/generic-profile.png",key:"peter_osah"}],readingTime:12.11,date:"2023-11-23T00:00:00.000Z"},{title:"Getting started with Astro Framework",description:"We will learn how to set up Astrojs, create a new project, and basics.",permalink:"/blog/astro-js-guide",formattedDate:"June 12, 2023",authors:[{name:"Chidume Nnamdi",title:"Software Engineer",url:"https://github.com/philipszdavido",imageURL:"https://github.com/philipszdavido.png",key:"chidume_nnamdi"}],readingTime:15.195,date:"2023-06-12T00:00:00.000Z"}],authorPosts:[{title:"10 High-Quality Free Resources That Will Make Every Web Developer's Life Easier",description:"We will examine the resources that will make our job easier when making a website.",permalink:"/blog/10-high-quality-free-resources",formattedDate:"May 2, 2022",authors:[{name:"Ayd\u0131n Akyol",title:"Software Developer",url:"https://github.com/biskuvit",imageURL:"https://github.com/biskuvit.png",key:"aydin"}],readingTime:4,date:"2022-05-02T00:00:00.000Z"},{title:"Top React JS Frameworks Every Developer Should Know",description:"We will compare the features of refine and react-admin",permalink:"/blog/best-react-frameworks",formattedDate:"February 21, 2022",authors:[{name:"Ayd\u0131n Akyol",title:"Software Developer",url:"https://github.com/biskuvit",imageURL:"https://github.com/biskuvit.png",key:"aydin"}],readingTime:4.5,date:"2022-02-21T00:00:00.000Z"}]},m={authorsImageUrls:[void 0]},c=[{value:"Refine setup",id:"refine-setup",level:2},{value:"Create admin panel with refine",id:"create-admin-panel-with-refine",level:2},{value:"Login page",id:"login-page",level:2},{value:"Create page",id:"create-page",level:2},{value:"Edit page",id:"edit-page",level:2},{value:"Show page",id:"show-page",level:2},{value:"Create list page for movies",id:"create-list-page-for-movies",level:2},{value:"Movies list page",id:"movies-list-page",level:3},{value:"Movies detail page",id:"movies-detail-page",level:3},{value:"Example",id:"example",level:2}],u=(d="CodeSandboxExample",function(e){return console.warn("Component "+d+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",e)});var d;const g={toc:c};function f(e){var{components:n}=e,t=i(e,["components"]);return(0,r.kt)("wrapper",o(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){a(e,n,t[n])}))}return e}({},g,t),{components:n,mdxType:"MDXLayout"}),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"This post was created using version 3.x.x of ",(0,r.kt)("strong",{parentName:"p"},"refine"),". Although we plan to update it with the latest version of ",(0,r.kt)("strong",{parentName:"p"},"refine")," as soon as possible, you can still benefit from the post in the meantime."),(0,r.kt)("p",{parentName:"admonition"},"You should know that ",(0,r.kt)("strong",{parentName:"p"},"refine")," version 4.x.x is backward compatible with version 3.x.x, so there is no need to worry. If you want to see the differences between the two versions, check out the ",(0,r.kt)("a",{parentName:"p",href:"https://refine.dev/docs/migration-guide/"},"migration guide"),"."),(0,r.kt)("p",{parentName:"admonition"},"Just be aware that the source code example in this post have been updated to version 4.x.x.")),(0,r.kt)("p",null,"Do you want to develop a web application quickly? You are at the right place! I will develop a simple movie web application with ",(0,r.kt)("strong",{parentName:"p"},"refine")," on the frontend and ",(0,r.kt)("strong",{parentName:"p"},"Supabase")," on the backend, you should continue reading. I will try to explain it step by step in a very simple way."),(0,r.kt)("h2",{id:"refine-setup"},"Refine setup"),(0,r.kt)("p",null,"There are two alternative methods to set up a refine application."),(0,r.kt)("p",null,"The recommended way is using the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/pankod/superplate"},"superplate")," tool. superplate's CLI wizard will let you create and customize your application in seconds."),(0,r.kt)("p",null,"Alternatively, you may use the create-react-app tool to create an empty React application and then add refine module via npm."),(0,r.kt)("p",null,"I will use superplate-cli and select a Supabase. You can customize other options as you wish."),(0,r.kt)("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2021-10-4-simple-web-application/cli.png",alt:"cli"}),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"create-admin-panel-with-refine"},"Create admin panel with refine"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"We should add our Supabase url and key in ",(0,r.kt)("em",{parentName:"li"},"supabaseClient.tsx")),(0,r.kt)("li",{parentName:"ul"},"Add custom login page in ",(0,r.kt)("em",{parentName:"li"},"App.tsx"))),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"App.tsx")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'import { Refine } from "@pankod/refine";\nimport { dataProvider } from "@refinedev/supabase";\nimport authProvider from "./authProvider";\nimport { supabaseClient } from "utility";\n\nimport "@pankod/refine/dist/styles.min.css";\n\nimport { Login } from "./pages/login";\n\nfunction App() {\n    return (\n        <Refine\n            dataProvider={dataProvider(supabaseClient)}\n            authProvider={authProvider}\n            LoginPage={Login}\n        />\n    );\n}\n\nexport default App;\n')),(0,r.kt)("h2",{id:"login-page"},"Login page"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'import React from "react";\nimport {\n    Row,\n    Col,\n    AntdLayout,\n    Card,\n    Typography,\n    Form,\n    Input,\n    Button,\n    Checkbox,\n} from "@pankod/refine";\nimport "./styles.css";\n\nimport { useLogin } from "@pankod/refine";\n\nconst { Text, Title } = Typography;\n\nexport interface ILoginForm {\n    username: string;\n    password: string;\n    remember: boolean;\n}\n\nexport const Login: React.FC = () => {\n    const [form] = Form.useForm<ILoginForm>();\n\n    const { mutate: login } = useLogin<ILoginForm>();\n\n    const CardTitle = (\n        <Title level={3} className="title">\n            Sign in your account\n        </Title>\n    );\n\n    return (\n        <AntdLayout className="layout">\n            <Row\n                justify="center"\n                align="middle"\n                style={{\n                    height: "100vh",\n                }}\n            >\n                <Col xs={22}>\n                    <div className="container">\n                        <div className="imageContainer">\n                            <img src="./refine.svg" alt="Refine Logo" />\n                        </div>\n                        <Card title={CardTitle} headStyle={{ borderBottom: 0 }}>\n                            <Form<ILoginForm>\n                                layout="vertical"\n                                form={form}\n                                onFinish={(values) => {\n                                    login(values);\n                                }}\n                                requiredMark={false}\n                                initialValues={{\n                                    remember: false,\n                                    email: "info+refineflix@refine.dev",\n                                    password: "refineflix",\n                                }}\n                            >\n                                <Form.Item\n                                    name="email"\n                                    label="Email"\n                                    rules={[{ required: true, type: "email" }]}\n                                >\n                                    <Input size="large" placeholder="Email" />\n                                </Form.Item>\n                                <Form.Item\n                                    name="password"\n                                    label="Password"\n                                    rules={[{ required: true }]}\n                                    style={{ marginBottom: "12px" }}\n                                >\n                                    <Input\n                                        type="password"\n                                        placeholder="\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf"\n                                        size="large"\n                                    />\n                                </Form.Item>\n                                <div style={{ marginBottom: "12px" }}>\n                                    <Form.Item\n                                        name="remember"\n                                        valuePropName="checked"\n                                        noStyle\n                                    >\n                                        <Checkbox\n                                            style={{\n                                                fontSize: "12px",\n                                            }}\n                                        >\n                                            Remember me\n                                        </Checkbox>\n                                    </Form.Item>\n\n                                    <a\n                                        style={{\n                                            float: "right",\n                                            fontSize: "12px",\n                                        }}\n                                        href="#"\n                                    >\n                                        Forgot password?\n                                    </a>\n                                </div>\n                                <Button\n                                    type="primary"\n                                    size="large"\n                                    htmlType="submit"\n                                    block\n                                >\n                                    Sign in\n                                </Button>\n                            </Form>\n                            <div style={{ marginTop: 8 }}>\n                                <Text style={{ fontSize: 12 }}>\n                                    Don\u2019t have an account?{" "}\n                                    <a href="#" style={{ fontWeight: "bold" }}>\n                                        Sign up\n                                    </a>\n                                </Text>\n                            </div>\n                        </Card>\n                    </div>\n                </Col>\n            </Row>\n        </AntdLayout>\n    );\n};\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-css"},'.layout {\n    background: radial-gradient(50% 50% at 50% 50%, #63386a 0%, #310438 100%);\n    background-size: "cover";\n}\n\n.container {\n    max-width: 408px;\n    margin: auto;\n}\n\n.title {\n    text-align: center;\n    color: #626262;\n    font-size: 30px;\n    letter-spacing: -0.04em;\n}\n\n.imageContainer {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin-bottom: 16px;\n}\n')),(0,r.kt)("p",null,"You can use default user for login."),(0,r.kt)("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2021-10-4-simple-web-application/signin.png",alt:"signin"}),(0,r.kt)("br",null),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Create movies list page with add a resource in ",(0,r.kt)("em",{parentName:"li"},"App.tsx"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'import { Refine, Resource } from "@pankod/refine";\n\nimport "@pankod/refine/dist/styles.min.css";\nimport { dataProvider } from "@refinedev/supabase";\n\nimport authProvider from "./authProvider";\nimport { supabaseClient } from "utility";\n\nimport { AdminMovieList } from "./pages/admin/movies";\nimport { Login } from "./pages/login";\n\nfunction App() {\n    return (\n        <Refine\n            dataProvider={dataProvider(supabaseClient)}\n            authProvider={authProvider}\n            LoginPage={Login}\n            resources={[\n                {\n                    name: "movies",\n                    list: AdminMovieList,\n                    meta: {\n                        route: "admin/movies",\n                    },\n                },\n            ]}\n        />\n    );\n}\n\nexport default App;\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"AdminMovieList page")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'import {\n    List,\n    Table,\n    useTable,\n    IResourceComponentsProps,\n    Space,\n    EditButton,\n    ShowButton,\n    getDefaultSortOrder,\n    CreateButton,\n    DeleteButton,\n} from "@pankod/refine";\n\nimport { IMovies } from "interfaces";\n\nexport const AdminMovieList: React.FC<IResourceComponentsProps> = () => {\n    const { tableProps, sorter } = useTable<IMovies>({\n        sorters: {\n            initial: [\n                {\n                    field: "id",\n                    order: "asc",\n                },\n            ],\n        },\n    });\n\n    return (\n        <List pageHeaderProps={{ extra: <CreateButton /> }}>\n            <Table {...tableProps} rowKey="id">\n                <Table.Column\n                    key="id"\n                    dataIndex="id"\n                    title="ID"\n                    sorter\n                    defaultSortOrder={getDefaultSortOrder("id", sorter)}\n                />\n                <Table.Column key="name" dataIndex="name" title="name" sorter />\n\n                <Table.Column<IMovies>\n                    title="Actions"\n                    dataIndex="actions"\n                    render={(_, record) => (\n                        <Space>\n                            <EditButton\n                                hideText\n                                size="small"\n                                recordItemId={record.id}\n                            />\n                            <ShowButton\n                                hideText\n                                size="small"\n                                recordItemId={record.id}\n                            />\n                            <DeleteButton\n                                hideText\n                                size="small"\n                                recordItemId={record.id}\n                            />\n                        </Space>\n                    )}\n                />\n            </Table>\n        </List>\n    );\n};\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Movies interface")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"export interface IMovies {\n    id: string;\n    name: string;\n    description: string;\n    preload: string;\n    director: string;\n    stars: string;\n    premiere: string;\n    trailer: string;\n    images: IFile[];\n}\n")),(0,r.kt)("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2021-10-4-simple-web-application/movies.png",alt:"movies"}),(0,r.kt)("br",null),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Now we will add create page")),(0,r.kt)("h2",{id:"create-page"},"Create page"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'    resources={[\n        {\n            name: "movies",\n            list: AdminMovieList,\n            create: AdminMovieCreate,\n            meta: {\n                route: "admin/movies",\n            },\n        },\n    ]}\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'import {\n    Create,\n    Form,\n    Input,\n    IResourceComponentsProps,\n    Upload,\n    useForm,\n    RcFile,\n} from "@pankod/refine";\nimport { IMovies } from "interfaces";\nimport { supabaseClient, normalizeFile } from "utility";\n\nexport const AdminMovieCreate: React.FC<IResourceComponentsProps> = () => {\n    const { formProps, saveButtonProps } = useForm<IMovies>();\n\n    return (\n        <Create saveButtonProps={saveButtonProps}>\n            <Form {...formProps} layout="vertical">\n                <Form.Item\n                    label="Name"\n                    name="name"\n                    rules={[\n                        {\n                            required: true,\n                        },\n                    ]}\n                >\n                    <Input />\n                </Form.Item>\n                <Form.Item label="Premiere" name="premiere">\n                    <Input />\n                </Form.Item>\n                <Form.Item label="Description" name="description">\n                    <Input />\n                </Form.Item>\n                <Form.Item label="Director" name="director">\n                    <Input />\n                </Form.Item>\n                <Form.Item label="Stars" name="stars">\n                    <Input />\n                </Form.Item>\n\n                <Form.Item label="Images">\n                    <Form.Item\n                        name="images"\n                        valuePropName="fileList"\n                        normalize={normalizeFile}\n                        noStyle\n                    >\n                        <Upload.Dragger\n                            name="file"\n                            listType="picture"\n                            multiple\n                            customRequest={async ({\n                                file,\n                                onError,\n                                onSuccess,\n                            }) => {\n                                try {\n                                    const rcFile = file as RcFile;\n\n                                    await supabaseClient.storage\n                                        .from("refineflix")\n                                        .upload(`public/${rcFile.name}`, file, {\n                                            cacheControl: "3600",\n                                            upsert: true,\n                                        });\n\n                                    const { data } = supabaseClient.storage\n                                        .from("refineflix")\n                                        .getPublicUrl(`public/${rcFile.name}`);\n\n                                    const xhr = new XMLHttpRequest();\n                                    onSuccess &&\n                                        onSuccess(\n                                            { url: data?.publicUrl },\n                                            xhr,\n                                        );\n                                } catch (error) {\n                                    onError &&\n                                        onError(new Error("Upload Error"));\n                                }\n                            }}\n                        >\n                            <p className="ant-upload-text">\n                                Drag & drop a file in this area\n                            </p>\n                        </Upload.Dragger>\n                    </Form.Item>\n                </Form.Item>\n            </Form>\n        </Create>\n    );\n};\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"normalize file in utility folder")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'import { UploadFile } from "@pankod/refine";\n\ninterface UploadResponse {\n    url: string;\n}\ninterface EventArgs<T = UploadResponse> {\n    file: UploadFile<T>;\n    fileList: Array<UploadFile<T>>;\n}\n\nexport const normalizeFile = (event: EventArgs) => {\n    const { fileList } = event;\n\n    return fileList.map((item) => {\n        const { uid, name, type, size, response, percent, status } = item;\n\n        return {\n            uid,\n            name,\n            url: item.url || response?.url,\n            type,\n            size,\n            percent,\n            status,\n        };\n    });\n};\n')),(0,r.kt)("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2021-10-4-simple-web-application/create.png",alt:"create"}),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"edit-page"},"Edit page"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'import React from "react";\nimport {\n    Edit,\n    Form,\n    Input,\n    IResourceComponentsProps,\n    RcFile,\n    Upload,\n    useForm,\n} from "@pankod/refine";\n\nimport { IMovies } from "interfaces";\nimport { supabaseClient, normalizeFile } from "utility";\n\nexport const AdminMovieEdit: React.FC<IResourceComponentsProps> = () => {\n    const { formProps, saveButtonProps } = useForm<IMovies>();\n\n    return (\n        <Edit\n            saveButtonProps={saveButtonProps}\n            pageHeaderProps={{ extra: null }}\n        >\n            <Form {...formProps} layout="vertical">\n                <Form.Item\n                    label="Name"\n                    name="name"\n                    rules={[\n                        {\n                            required: true,\n                        },\n                    ]}\n                >\n                    <Input />\n                </Form.Item>\n                <Form.Item label="Premiere" name="premiere">\n                    <Input />\n                </Form.Item>\n                <Form.Item label="Description" name="description">\n                    <Input />\n                </Form.Item>\n                <Form.Item label="Director" name="director">\n                    <Input />\n                </Form.Item>\n                <Form.Item label="Stars" name="stars">\n                    <Input />\n                </Form.Item>\n                <Form.Item label="Trailer" name="trailer">\n                    <Input />\n                </Form.Item>\n                <Form.Item label="Images">\n                    <Form.Item\n                        name="images"\n                        valuePropName="fileList"\n                        normalize={normalizeFile}\n                        noStyle\n                    >\n                        <Upload.Dragger\n                            name="file"\n                            listType="picture"\n                            multiple\n                            customRequest={async ({\n                                file,\n                                onError,\n                                onSuccess,\n                            }) => {\n                                try {\n                                    const rcFile = file as RcFile;\n\n                                    await supabaseClient.storage\n                                        .from("refineflix")\n                                        .upload(`public/${rcFile.name}`, file, {\n                                            cacheControl: "3600",\n                                            upsert: true,\n                                        });\n\n                                    const { data } = supabaseClient.storage\n                                        .from("refineflix")\n                                        .getPublicUrl(`public/${rcFile.name}`);\n\n                                    const xhr = new XMLHttpRequest();\n                                    onSuccess &&\n                                        onSuccess(\n                                            { url: data?.publicUrl },\n                                            xhr,\n                                        );\n                                } catch (error) {\n                                    onError &&\n                                        onError(new Error("Upload Error"));\n                                }\n                            }}\n                        >\n                            <p className="ant-upload-text">\n                                Drag & drop a file in this area\n                            </p>\n                        </Upload.Dragger>\n                    </Form.Item>\n                </Form.Item>\n            </Form>\n        </Edit>\n    );\n};\n')),(0,r.kt)("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2021-10-4-simple-web-application/edit.png",alt:"edit"}),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"show-page"},"Show page"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'import {\n    useShow,\n    Show,\n    Typography,\n    IResourceComponentsProps,\n    Space,\n    ImageField,\n    RefreshButton,\n    EditButton,\n    useNavigation,\n} from "@pankod/refine";\n\nimport { IMovies } from "interfaces";\n\nconst { Title, Text } = Typography;\n\nexport const AdminMovieShow: React.FC<IResourceComponentsProps> = () => {\n    const { queryResult } = useShow<IMovies>();\n    const { data, isLoading } = queryResult;\n    const record = data?.data;\n\n    const { push } = useNavigation();\n\n    return (\n        <Show\n            isLoading={isLoading}\n            pageHeaderProps={{\n                title: record?.name,\n                subTitle: record?.premiere,\n                extra: (\n                    <>\n                        <EditButton\n                            onClick={() =>\n                                push(`/admin/movies/edit/${record?.id}`)\n                            }\n                        />\n                        <RefreshButton />\n                    </>\n                ),\n            }}\n        >\n            <Title level={5}>Director</Title>\n            <Text>{record?.director || "-"}</Text>\n\n            <Title level={5}>Stars</Title>\n            <Text>{record?.stars || "-"}</Text>\n\n            <Title level={5}>Trailer</Title>\n            {record?.trailer && (\n                <video width="400" controls>\n                    <source src={record.trailer} type="video/mp4" />\n                </video>\n            )}\n\n            <Title level={5}>Images</Title>\n            <Space wrap>\n                {record?.images ? (\n                    record.images.map((img) => (\n                        <ImageField\n                            key={img.name}\n                            value={img.url}\n                            title={img.name}\n                            width={200}\n                        />\n                    ))\n                ) : (\n                    <Text>Not found any images</Text>\n                )}\n            </Space>\n        </Show>\n    );\n};\n')),(0,r.kt)("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2021-10-4-simple-web-application/show.png",alt:"show"}),(0,r.kt)("br",null),(0,r.kt)("p",null,"Final version of our ",(0,r.kt)("inlineCode",{parentName:"p"},"<Resource>"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'    resources={[\n        {\n            name: "movies",\n            list: AdminMovieList,\n            create: AdminMovieCreate,\n            show: AdminMovieShow,\n            edit: AdminMovieEdit,\n            meta: {\n                route: "admin/movies",\n            },\n        },\n    ]}\n')),(0,r.kt)("h2",{id:"create-list-page-for-movies"},"Create list page for movies"),(0,r.kt)("p",null,"We will create custom list and show pages for the unauthorized users because of that, we should add custom routes for these pages."),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"App.tsx")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'import { Refine, Resource } from "@pankod/refine";\n\nimport "@pankod/refine/dist/styles.min.css";\nimport { dataProvider } from "@refinedev/supabase";\n\nimport authProvider from "./authProvider";\nimport { supabaseClient } from "utility";\n\nimport {\n    AdminMovieList,\n    AdminMovieCreate,\n    AdminMovieShow,\n    AdminMovieEdit,\n} from "./pages/admin/movies";\nimport { MoviesList, MovieShow } from "./pages/movies";\nimport { Login } from "./pages/login";\n\nfunction App() {\n    return (\n        <Refine\n            dataProvider={dataProvider(supabaseClient)}\n            authProvider={authProvider}\n            LoginPage={Login}\n            routerProvider={{\n                ...routerProvider,\n\n                routes: [\n                    {\n                        exact: true,\n                        component: MoviesList,\n                        path: "/movies",\n                    },\n                    {\n                        exact: true,\n                        component: MovieShow,\n                        path: "/:resource(movies)/:action(show)/:id",\n                    },\n                ],\n            }}\n            resources={[\n                {\n                    name: "movies",\n                    list: AdminMovieList,\n                    create: AdminMovieCreate,\n                    show: AdminMovieShow,\n                    edit: AdminMovieEdit,\n\n                    meta: {\n                        route: "admin/movies",\n                    },\n                },\n            ]}\n        />\n    );\n}\n\nexport default App;\n')),(0,r.kt)("h3",{id:"movies-list-page"},"Movies list page"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'import {\n    IResourceComponentsProps,\n    Card,\n    Space,\n    useList,\n    useNavigation,\n} from "@pankod/refine";\nimport { Layout } from "components";\n\nimport { IMovies } from "interfaces";\n\nexport const MoviesList: React.FC<IResourceComponentsProps> = () => {\n    const { Meta } = Card;\n\n    const { data, isLoading } = useList<IMovies>({\n        resource: "movies",\n        queryOptions: {\n            staleTime: 0,\n        },\n    });\n\n    const { push } = useNavigation();\n\n    const renderMovies = () => {\n        if (data) {\n            return data.data.map((movie) => {\n                return (\n                    <Card\n                        hoverable\n                        key={movie.name}\n                        style={{ width: 240, minHeight: 400 }}\n                        cover={\n                            movie.images?.length > 0 ? (\n                                <img\n                                    alt={movie.images[0].name}\n                                    src={movie.images[0].url}\n                                />\n                            ) : (\n                                <img\n                                    alt="default"\n                                    src="https://cdn.pixabay.com/photo/2019/04/24/21/55/cinema-4153289_960_720.jpg"\n                                />\n                            )\n                        }\n                        loading={isLoading}\n                        onClick={() => push(`/movies/show/${movie.id}`)}\n                    >\n                        <Meta\n                            title={movie.name}\n                            description={movie.description}\n                        />\n                    </Card>\n                );\n            });\n        }\n    };\n\n    return (\n        <Layout>\n            <Space align="start">{renderMovies()}</Space>\n        </Layout>\n    );\n};\n')),(0,r.kt)("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2021-10-4-simple-web-application/movies_all.png",alt:"movies_all"}),(0,r.kt)("br",null),(0,r.kt)("h3",{id:"movies-detail-page"},"Movies detail page"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'import {\n    useShow,\n    Show,\n    Typography,\n    IResourceComponentsProps,\n    Space,\n    ImageField,\n} from "@pankod/refine";\nimport { Layout } from "components";\n\nimport { IMovies } from "interfaces";\n\nconst { Title, Text } = Typography;\n\nexport const MovieShow: React.FC<IResourceComponentsProps> = () => {\n    const { queryResult } = useShow<IMovies>();\n    const { data, isLoading } = queryResult;\n    const record = data?.data;\n\n    const renderDetail = () => (\n        <>\n            <Title level={5}>Director</Title>\n            <Text>{record?.director || "-"}</Text>\n\n            <Title level={5}>Stars</Title>\n            <Text>{record?.stars || "-"}</Text>\n            <Title level={5}>Trailer</Title>\n            {record?.trailer && (\n                <video width="400" controls>\n                    <source src={record.trailer} type="video/mp4" />\n                </video>\n            )}\n            <Title level={5}>Images</Title>\n            <Space wrap>\n                {record?.images ? (\n                    record.images.map((img) => (\n                        <ImageField\n                            key={img.name}\n                            value={img.url}\n                            title={img.name}\n                            width={200}\n                        />\n                    ))\n                ) : (\n                    <Text>Not found any images</Text>\n                )}\n            </Space>\n        </>\n    );\n\n    return (\n        <Layout>\n            <Show\n                isLoading={isLoading}\n                pageHeaderProps={{\n                    title: record?.name,\n                    subTitle: record?.premiere,\n                    extra: null,\n                }}\n            >\n                {renderDetail()}\n            </Show>\n        </Layout>\n    );\n};\n')),(0,r.kt)("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2021-10-4-simple-web-application/detailed.png",alt:"detailed"}),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"example"},"Example"),(0,r.kt)(u,{path:"blog-refineflix",mdxType:"CodeSandboxExample"}),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/refinedev/refine/tree/master/examples/blog-refineflix"},"here is repo")))}f.isMDXComponent=!0}}]);