"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[33272],{58860:(e,n,t)=>{t.d(n,{xA:()=>d,yg:()=>u});var a=t(37953);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=a.createContext({}),p=function(e){var n=a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},d=function(e){var n=p(e.components);return a.createElement(l.Provider,{value:n},e.children)},m="mdxType",g={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},y=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),m=p(t),y=r,u=m["".concat(l,".").concat(y)]||m[y]||g[y]||o;return t?a.createElement(u,i(i({ref:n},d),{},{components:t})):a.createElement(u,i({ref:n},d))}));function u(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=t.length,i=new Array(o);i[0]=y;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s[m]="string"==typeof e?e:r,i[1]=s;for(var p=2;p<o;p++)i[p]=t[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}y.displayName="MDXCreateElement"},40035:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>N,frontMatter:()=>s,metadata:()=>p,toc:()=>m});t(37953);var a=t(58860);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){return n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})),e}function i(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}const s={title:"Rest Data Provider",source:"https://github.com/refinedev/refine/tree/main/packages/rest",swizzle:!0},l=void 0,p={unversionedId:"data/packages/rest-data-provider/index",id:"data/packages/rest-data-provider/index",title:"Rest Data Provider",description:"We've created @refinedev/rest data provider to make it easier to create custom data providers for REST APIs. Creating custom data provider previously required swizzling simple-rest or other data providers. Now with rest data provider, we aim to streamline the process of creating custom data providers for REST APIs.",source:"@site/docs/data/packages/rest-data-provider/index.md",sourceDirName:"data/packages/rest-data-provider",slug:"/data/packages/rest-data-provider/",permalink:"/docs/data/packages/rest-data-provider/",draft:!1,editUrl:"https://github.com/refinedev/refine/tree/main/documentation/docs/data/packages/rest-data-provider/index.md",tags:[],version:"current",lastUpdatedBy:"Batuhan Wilhelm",lastUpdatedAt:1758725956,formattedLastUpdatedAt:"Sep 24, 2025",frontMatter:{title:"Rest Data Provider",source:"https://github.com/refinedev/refine/tree/main/packages/rest",swizzle:!0},sidebar:"mainSidebar",previous:{title:"useApiUrl",permalink:"/docs/data/hooks/use-api-url/"},next:{title:"Airtable",permalink:"/docs/data/packages/airtable/"}},d={},m=[{value:"Installation",id:"installation",level:2},{value:"Usage",id:"usage",level:2},{value:"Create Data Provider Options Interface",id:"create-data-provider-options-interface",level:2},{value:"How to create a custom REST data provider",id:"how-to-create-a-custom-rest-data-provider",level:2},{value:"getOne",id:"getone",level:3},{value:"update",id:"update",level:3},{value:"getMany",id:"getmany",level:3},{value:"createMany",id:"createmany",level:3},{value:"Available Hooks",id:"available-hooks",level:3},{value:"Auth Header Hook",id:"auth-header-hook",level:4},{value:"Refresh Token Hook",id:"refresh-token-hook",level:4},{value:"Creating Custom Hooks",id:"creating-custom-hooks",level:3},{value:"Swizzling Existing Hooks",id:"swizzling-existing-hooks",level:3},{value:"Common Hook Patterns",id:"common-hook-patterns",level:3}],g=e=>function(n){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,a.yg)("div",n)},y=g("DocThumbsUpDownFeedbackWidget"),u=g("InstallPackagesCommand"),c={toc:m},h="wrapper";function N(e){var{components:n}=e,t=i(e,["components"]);return(0,a.yg)(h,o(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},a=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),a.forEach((function(n){r(e,n,t[n])}))}return e}({},c,t),{components:n,mdxType:"MDXLayout"}),(0,a.yg)("p",null,"We've created ",(0,a.yg)("inlineCode",{parentName:"p"},"@refinedev/rest")," data provider to make it easier to create custom data providers for REST APIs. Creating custom data provider previously required swizzling simple-rest or other data providers. Now with rest data provider, we aim to streamline the process of creating custom data providers for REST APIs."),(0,a.yg)("p",null,"It uses KY library under the hood, which is a tiny and elegant HTTP client based on Fetch API."),(0,a.yg)("p",null,"2nd parameter of createDataProvider is options for the data provider itself. It has common data provider methods such as getList, getOne, create, update and inside they have additional methods such as ",(0,a.yg)("inlineCode",{parentName:"p"},"getEndpoint"),", ",(0,a.yg)("inlineCode",{parentName:"p"},"buildHeaders"),", ",(0,a.yg)("inlineCode",{parentName:"p"},"buildQueryParams"),", ",(0,a.yg)("inlineCode",{parentName:"p"},"mapResponse"),"."),(0,a.yg)("p",null,"All of these methods accepts respective parameters from the relevant action. Additionally, ",(0,a.yg)("inlineCode",{parentName:"p"},"mapResponse")," and ",(0,a.yg)("inlineCode",{parentName:"p"},"getTotalCount")," methods also accepts response object."),(0,a.yg)("p",null,", and 3rd parameter is options for KY client. You can find KY options ",(0,a.yg)("a",{parentName:"p",href:"https://github.com/sindresorhus/ky#options"},"here"),"."),(0,a.yg)(y,{id:"getlist",mdxType:"DocThumbsUpDownFeedbackWidget"},(0,a.yg)("h2",{id:"installation"},"Installation"),(0,a.yg)(y,{id:"create",mdxType:"DocThumbsUpDownFeedbackWidget"},(0,a.yg)(y,{id:"installation",mdxType:"DocThumbsUpDownFeedbackWidget"},(0,a.yg)(y,{id:"deleteone",mdxType:"DocThumbsUpDownFeedbackWidget"},(0,a.yg)(u,{args:"@refinedev/rest",mdxType:"InstallPackagesCommand"})),(0,a.yg)("h2",{id:"usage"},"Usage"),(0,a.yg)(y,{id:"hooks",mdxType:"DocThumbsUpDownFeedbackWidget"},(0,a.yg)(y,{id:"usage",mdxType:"DocThumbsUpDownFeedbackWidget"},(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx"},'import { createDataProvider } from "@refinedev/rest";\n\nconst MyDataProvider = createDataProvider(\n  "https://example.com",\n  {}, // Create Data Provider Options\n  {}, // KY Options\n);\n'))),(0,a.yg)("h2",{id:"create-data-provider-options-interface"},"Create Data Provider Options Interface"),(0,a.yg)(y,{id:"create-data-provider-options-interface",mdxType:"DocThumbsUpDownFeedbackWidget"},(0,a.yg)("p",null,"A data provider is simply an object that implements a set of methods.\nEach method corresponds to an operation that Refine can perform: fetching a list, creating a record, updating, deleting, etc."),(0,a.yg)("p",null,"ach operation such as ",(0,a.yg)("inlineCode",{parentName:"p"},"getList"),", ",(0,a.yg)("inlineCode",{parentName:"p"},"getOne"),", ",(0,a.yg)("inlineCode",{parentName:"p"},"create")," has atomic methods to build your request and format their responses, errors."),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"getEndpoint(params)")," \u2192 returns the API endpoint."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"buildHeaders(params)")," \u2192 adds additional headers."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"buildQueryParams(params)")," \u2192 accepts Refine params, such as resource, id, filters, sorters, pagination"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"buildBodyParams(params)")," \u2192 prepares the request body."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"mapResponse(response, params)")," \u2192 transforms API response into the format refine expects."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"transformError(response, params)")," \u2192 converts API errors into Refine compatible HttpError. See server side errors sections. Formatted errors can be handled by UI libraries to show form errors in specific fields.")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-ts"},"export type CreateDataProviderOptions = {\n  getList?: {\n    /* list records */\n  };\n  getOne?: {\n    /* get record by id */\n  };\n  getMany?: {\n    /* get many by ids */\n  };\n  create?: {\n    /* create record */\n  };\n  update?: {\n    /* update record */\n  };\n  deleteOne?: {\n    /* delete record */\n  };\n  custom?: {\n    /* anything special (search, export, etc.) */\n  };\n};\n")),(0,a.yg)("p",null,"E")),(0,a.yg)("h2",{id:"how-to-create-a-custom-rest-data-provider"},"How to create a custom REST data provider"),(0,a.yg)("p",null,"Refine comes with many built-in data providers (",(0,a.yg)("inlineCode",{parentName:"p"},"simple-rest"),", ",(0,a.yg)("inlineCode",{parentName:"p"},"strapi-v4"),", ",(0,a.yg)("inlineCode",{parentName:"p"},"supabase"),", etc.).\nHowever, sometimes you need to connect to a custom API or handle very specific request/response formats.\nIn such cases, you can easily create your own Data Provider with ",(0,a.yg)("inlineCode",{parentName:"p"},"@refinedev/rest"),"."),(0,a.yg)("admonition",{title:"Quick mental model (keep this while coding)",type:"simple"},(0,a.yg)("ul",{parentName:"admonition"},(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Refine")," \u2192 ",(0,a.yg)("strong",{parentName:"li"},"You"),": sends params (resource, id, filters, sorters, pagination, variables, meta)."),(0,a.yg)("li",{parentName:"ul"},"You \u2192 API: build endpoint, query, headers, body."),(0,a.yg)("li",{parentName:"ul"},"API \u2192 You: raw response/error."),(0,a.yg)("li",{parentName:"ul"},"You \u2192 Refine: mapResponse (data only) and transformError (message + statusCode).\n:::")),(0,a.yg)("h3",{parentName:"admonition",id:"getlist"},"getList"),(0,a.yg)("p",{parentName:"admonition"},"The ",(0,a.yg)("inlineCode",{parentName:"p"},"getList")," method is used whenever refine needs to ",(0,a.yg)("strong",{parentName:"p"},"fetch a list of records"),".\nThis usually powers your list pages, tables, and anything with pagination, sorting, and filtering."),(0,a.yg)("h3",null,"Understanding the Data Flow"),(0,a.yg)("p",{parentName:"admonition"},"To implement ",(0,a.yg)("inlineCode",{parentName:"p"},"getList")," effectively, you need to understand how data flows between Refine, your data provider, and your API:"),(0,a.yg)("p",{parentName:"admonition"},(0,a.yg)("strong",{parentName:"p"},"Refine Hooks \u2192 Your Data Provider \u2192 API \u2192 Your Data Provider \u2192 Refine")),(0,a.yg)("h3",null,"What Refine Provides"),(0,a.yg)("p",{parentName:"admonition"},"When Refine calls ",(0,a.yg)("inlineCode",{parentName:"p"},"getList"),", it provides these parameters:"),(0,a.yg)("ul",{parentName:"admonition"},(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"resource"),": the name of the collection (e.g. ",(0,a.yg)("inlineCode",{parentName:"li"},'"posts"'),")"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"pagination"),": ",(0,a.yg)("inlineCode",{parentName:"li"},"{ current, pageSize }")),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"sorters"),": ",(0,a.yg)("inlineCode",{parentName:"li"},"[ { field, order } ]")),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"filters"),": ",(0,a.yg)("inlineCode",{parentName:"li"},"[ { field, operator, value } ]"))),(0,a.yg)("h3",null,"What Your API Expects"),(0,a.yg)("p",{parentName:"admonition"},"Your API likely expects a different request format. For example:")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Example API Format:")),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Endpoint: ",(0,a.yg)("inlineCode",{parentName:"li"},"https://example.com/posts")),(0,a.yg)("li",{parentName:"ul"},"Pagination: ",(0,a.yg)("inlineCode",{parentName:"li"},"?page=<number>&size=<number>")),(0,a.yg)("li",{parentName:"ul"},"Sorting: ",(0,a.yg)("inlineCode",{parentName:"li"},"?sort=-createdAt,title")," (prefix ",(0,a.yg)("inlineCode",{parentName:"li"},"-")," for descending)"),(0,a.yg)("li",{parentName:"ul"},"Filters: ",(0,a.yg)("inlineCode",{parentName:"li"},"?status=PUBLISHED&title_like=react")),(0,a.yg)("li",{parentName:"ul"},"Response: ",(0,a.yg)("inlineCode",{parentName:"li"},'{ "data": [...], "total": 123 }'),"\n:::")),(0,a.yg)("h3",null,"What Refine Expects Back"),(0,a.yg)("p",null,"Refine only cares about two things from your response:"),(0,a.yg)("ol",null,(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"An array of records")," - the actual data items"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Total count")," - for pagination calculations")),(0,a.yg)("p",null,"Even if your API returns ",(0,a.yg)("inlineCode",{parentName:"p"},"{ data, total }"),", you must extract these separately using ",(0,a.yg)("inlineCode",{parentName:"p"},"mapResponse")," and ",(0,a.yg)("inlineCode",{parentName:"p"},"getTotalCount"),"."),(0,a.yg)("h3",null,"Available Methods"),(0,a.yg)("p",null,"The ",(0,a.yg)("inlineCode",{parentName:"p"},"getList")," configuration object provides these methods to transform requests and responses:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"getEndpoint")),": Returns the API endpoint path (defaults to resource name)"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"buildHeaders")),": Adds custom headers to the request"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"buildQueryParams")),": Transforms Refine params into your API's query format"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"mapResponse")),": Extracts the data array from your API response"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"getTotalCount")),": Extracts the total count from your API response")),(0,a.yg)("h3",null,"Implementation Example"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx"},'export const myDataProvider: CreateDataProviderOptions = {\n  getList: {\n    // 1. Define the endpoint (optional - defaults to resource name)\n    getEndpoint: ({ resource }) => resource, // "posts" \u2192 "/posts"\n\n    // 2. Transform Refine\'s parameters into your API\'s query format\n    buildQueryParams: async ({ pagination, filters, sorters }) => {\n      const query: Record<string, any> = {};\n\n      // Handle pagination\n      // Refine provides: { current: 1, pageSize: 10 }\n      // API expects: ?page=1&size=10\n      query.page = pagination?.current ?? 1;\n      query.size = pagination?.pageSize ?? 10;\n\n      // Handle sorting\n      // Refine provides: [{ field: "createdAt", order: "desc" }]\n      // API expects: ?sort[createdAt]=title\n      if (sorters?.length) {\n        query.sort = sorters.map({ field, order }) => ({ field: order })\n      }\n\n      // Handle filters\n      // Refine provides: [{ field: "status", operator: "eq", value: "PUBLISHED" }]\n      // API expects: ?status=PUBLISHED&title_like=react\n      for (const filter of filters ?? []) {\n        if (filter.operator === \'eq\') {\n          query[filter.field] = filter.value;\n        }\n        if (filter.operator === \'contains\') {\n          query[`${filter.field}_like`] = filter.value;\n        }\n        // Add more operators as needed (ne, gt, lt, etc.)\n      }\n\n      return query;\n    },\n\n    // 3. Extract the data array from API response\n    mapResponse: async (response) => {\n      const json = await response.json();\n      // Your API returns: { data: [...], total: 123 }\n      // Refine needs: [...]\n      return json.data;\n    },\n\n    // 4. Extract the total count for pagination\n    getTotalCount: async (response) => {\n      const json = await response.json();\n      // Your API returns: { data: [...], total: 123 }\n      // Refine needs: 123\n      return json.total;\n    },\n  },\n};\n')),(0,a.yg)("p",null,"With this implementation, you've created a complete bridge between Refine and your API. Here's what happens when a user interacts with your list component:"),(0,a.yg)("ol",null,(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"User action"),': User clicks "next page", sorts a column, or applies a filter (like searching for "Published" posts)'),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Refine processes"),": Refine calculates new parameters (",(0,a.yg)("inlineCode",{parentName:"li"},"current: 2"),", ",(0,a.yg)("inlineCode",{parentName:"li"},"pageSize: 10"),", ",(0,a.yg)("inlineCode",{parentName:"li"},'filters: [{ field: "status", operator: "eq", value: "PUBLISHED" }]'),")"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Your transformation"),": ",(0,a.yg)("inlineCode",{parentName:"li"},"buildQueryParams")," converts these to ",(0,a.yg)("inlineCode",{parentName:"li"},"?page=2&size=10&status=PUBLISHED")),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"API call"),": Request goes to ",(0,a.yg)("inlineCode",{parentName:"li"},"https://example.com/posts?page=2&size=10&status=PUBLISHED")),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Response processing"),": ",(0,a.yg)("inlineCode",{parentName:"li"},"mapResponse")," extracts the data array, ",(0,a.yg)("inlineCode",{parentName:"li"},"getTotalCount")," extracts the total"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"UI update"),": Refine renders the filtered data with updated pagination")),(0,a.yg)("p",null,"This pattern makes it easier for your API's specific conventions to adapt to Refine.")),(0,a.yg)("h3",{id:"getone"},"getOne"),(0,a.yg)("p",null,"The ",(0,a.yg)("inlineCode",{parentName:"p"},"getOne")," method fetches a ",(0,a.yg)("strong",{parentName:"p"},"single record by its ID"),". This powers your detail pages, edit forms, and any component that needs to display or modify a specific record."),(0,a.yg)("h3",null,"Understanding the Data Flow"),(0,a.yg)("p",null,"The data flow for ",(0,a.yg)("inlineCode",{parentName:"p"},"getOne")," is straightforward since you're fetching just one record:"),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Refine Hooks \u2192 Your Data Provider \u2192 API \u2192 Your Data Provider \u2192 Refine")),(0,a.yg)("p",null,"Refine provides an ID, you build the endpoint, make the request, and return the single record object."),(0,a.yg)("h3",null,"What Refine Provides"),(0,a.yg)("p",null,"Refine calls ",(0,a.yg)("inlineCode",{parentName:"p"},"getOne")," with these parameters:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"resource"),": the collection name (e.g. ",(0,a.yg)("inlineCode",{parentName:"li"},'"posts"'),")"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"id"),": the unique identifier of the record to fetch"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"meta"),": optional metadata for custom behavior")),(0,a.yg)("h3",null,"What Your API Expects"),(0,a.yg)("p",null,"Your API likely expects a simple ID-based request:"),(0,a.yg)("admonition",{type:"simple"},(0,a.yg)("p",{parentName:"admonition"},(0,a.yg)("strong",{parentName:"p"},"Example API Format:")),(0,a.yg)("ul",{parentName:"admonition"},(0,a.yg)("li",{parentName:"ul"},"Endpoint: ",(0,a.yg)("inlineCode",{parentName:"li"},"https://example.com/posts/123")),(0,a.yg)("li",{parentName:"ul"},"Method: ",(0,a.yg)("inlineCode",{parentName:"li"},"GET")),(0,a.yg)("li",{parentName:"ul"},"Response: ",(0,a.yg)("inlineCode",{parentName:"li"},'{ "data": { "id": 123, "title": "My Post", "content": "..." } }'),"\n:::")),(0,a.yg)("h3",null,"What Refine Expects Back"),(0,a.yg)("p",{parentName:"admonition"},"Refine expects just the record object - no wrapping, no arrays, just the data:"),(0,a.yg)("p",{parentName:"admonition"},"Your API returns:"),(0,a.yg)("pre",{parentName:"admonition"},(0,a.yg)("code",{parentName:"pre",className:"language-json"},'{ "data": { "id": 123, "title": "My Post", "content": "..." } }\n')),(0,a.yg)("p",{parentName:"admonition"},"Refine expects:"),(0,a.yg)("pre",{parentName:"admonition"},(0,a.yg)("code",{parentName:"pre",className:"language-json"},'{ "id": 123, "title": "My Post", "content": "..." }\n')),(0,a.yg)("p",{parentName:"admonition"},"If your API wraps the record in a ",(0,a.yg)("inlineCode",{parentName:"p"},"data")," property, you'll need to extract it."),(0,a.yg)("h3",null,"Available Methods"),(0,a.yg)("p",{parentName:"admonition"},"The ",(0,a.yg)("inlineCode",{parentName:"p"},"getOne")," configuration object provides these methods to transform requests and responses:"),(0,a.yg)("ul",{parentName:"admonition"},(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"getEndpoint")),": Builds the API endpoint path with the record ID"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"buildHeaders")),": Adds authentication tokens or other custom headers"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"buildQueryParams")),": Adds query parameters to the request (e.g., for API versioning or extra options)"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"mapResponse")),": Extracts the record object from your API response")),(0,a.yg)("h3",null,"Implementation Example"),(0,a.yg)("pre",{parentName:"admonition"},(0,a.yg)("code",{parentName:"pre",className:"language-tsx"},'export const myDataProvider: CreateDataProviderOptions = {\n  getOne: {\n    // Build the endpoint with the ID\n    getEndpoint: ({ resource, id }) => `${resource}/${id}`, // "posts/123"\n\n    // Add custom header\n    buildHeaders: async ({ resource, id }) => ({\n      "Accept-Language": "en-US",\n    }),\n\n    // Add query parameters if needed\n    buildQueryParams: async ({ resource, id }) => {\n      const params: Record<string, any> = {};\n\n      if (resource === "posts") {\n        // Load author details with the post\n        params.expand = "author";\n      }\n\n      return params;\n    },\n\n    // Extract the record from API response\n    mapResponse: async (response, params) => {\n      const json = await response.json();\n\n      // Your API returns different response only for categories.\n      if (params.resource === "categories") {\n        return json.result;\n      }\n\n      // Your API wraps the record in a "data" property\n      // API returns: { "data": { "id": 123, "title": "My Post" } }\n      // Refine needs: { "id": 123, "title": "My Post" }\n      return json.data;\n    },\n  },\n};\n')),(0,a.yg)("p",{parentName:"admonition"},"With this ",(0,a.yg)("inlineCode",{parentName:"p"},"getOne")," implementation, here's what happens when a user views a specific record:"),(0,a.yg)("ol",{parentName:"admonition"},(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"User action"),": User clicks on a record or navigates to a detail page"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Refine processes"),": Refine calls ",(0,a.yg)("inlineCode",{parentName:"li"},"getOne")," with the record ID (",(0,a.yg)("inlineCode",{parentName:"li"},"id: 123"),")"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Your transformation"),": ",(0,a.yg)("inlineCode",{parentName:"li"},"getEndpoint")," builds the URL (",(0,a.yg)("inlineCode",{parentName:"li"},"posts/123"),"), ",(0,a.yg)("inlineCode",{parentName:"li"},"buildQueryParams")," adds ",(0,a.yg)("inlineCode",{parentName:"li"},"?expand=author")),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"API call"),": Request goes to ",(0,a.yg)("inlineCode",{parentName:"li"},"https://example.com/posts/123?expand=author")),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Response processing"),": ",(0,a.yg)("inlineCode",{parentName:"li"},"mapResponse")," extracts the record object from the wrapped response"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"UI update"),": Refine displays the record with author details in forms, detail views, or other components")),(0,a.yg)("p",{parentName:"admonition"},"This pattern makes it easier for your API's inconsistenties to adapt to Refine."),(0,a.yg)("h3",{parentName:"admonition",id:"create"},"create"),(0,a.yg)("p",{parentName:"admonition"},"The ",(0,a.yg)("inlineCode",{parentName:"p"},"create")," method handles ",(0,a.yg)("strong",{parentName:"p"},"creating new records"),". This powers your create forms, quick-add modals, and any component that needs to save new data to your API."),(0,a.yg)("h3",null,"Understanding the Data Flow"),(0,a.yg)("p",{parentName:"admonition"},"The data flow for ",(0,a.yg)("inlineCode",{parentName:"p"},"create")," involves sending form data to your API:"),(0,a.yg)("p",{parentName:"admonition"},(0,a.yg)("strong",{parentName:"p"},"Refine Hooks \u2192 Your Data Provider \u2192 API \u2192 Your Data Provider \u2192 Refine")),(0,a.yg)("p",{parentName:"admonition"},"Refine provides form variables, you build the endpoint and request body, send the data, and return the created record."),(0,a.yg)("h3",null,"What Refine Provides"),(0,a.yg)("p",{parentName:"admonition"},"Refine calls ",(0,a.yg)("inlineCode",{parentName:"p"},"create")," with these parameters:"),(0,a.yg)("ul",{parentName:"admonition"},(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"resource"),": the collection name (e.g. ",(0,a.yg)("inlineCode",{parentName:"li"},'"posts"'),")"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"variables"),": the form data to be saved (e.g. ",(0,a.yg)("inlineCode",{parentName:"li"},'{ title: "My Post", content: "..." }'),")"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"meta"),": optional metadata for custom behavior")),(0,a.yg)("h3",null,"What Your API Expects"),(0,a.yg)("p",{parentName:"admonition"},"Your API likely expects a POST request with the data in the request body:")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Example API Format:")),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Endpoint: ",(0,a.yg)("inlineCode",{parentName:"li"},"https://example.com/posts")),(0,a.yg)("li",{parentName:"ul"},"Method: ",(0,a.yg)("inlineCode",{parentName:"li"},"POST")),(0,a.yg)("li",{parentName:"ul"},"Body: ",(0,a.yg)("inlineCode",{parentName:"li"},'{ dto: { "title": "My Post", "content": "Hello world" }}')),(0,a.yg)("li",{parentName:"ul"},"Response: ",(0,a.yg)("inlineCode",{parentName:"li"},'{ "data": { "id": 124, "title": "My Post", "content": "Hello world" } }'),"\n:::")),(0,a.yg)("h3",null,"What Refine Expects Back"),(0,a.yg)("p",null,"Refine expects the newly created record object with its assigned ID:"),(0,a.yg)("p",null,"API returns:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-json"},'{ "data": { "id": 124, "title": "My Post", "content": "Hello world" } }\n')),(0,a.yg)("p",null,"Refine expects:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-json"},'{ "id": 124, "title": "My Post", "content": "Hello world" }\n')),(0,a.yg)("h3",null,"Available Methods"),(0,a.yg)("p",null,"The ",(0,a.yg)("inlineCode",{parentName:"p"},"create")," configuration object provides these methods to transform requests and responses:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"getEndpoint")),": Builds the API endpoint path (defaults to resource name)"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"buildHeaders")),": Adds authentication tokens or content-type headers"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"buildQueryParams")),": Adds query parameters to the request"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"buildBodyParams")),": Transforms form data into your API's expected body format"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"mapResponse")),": Extracts the created record from your API response"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"transformError")),": Converts API errors into user-friendly form validation errors")),(0,a.yg)("h3",null,"Implementation Example"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx"},'export const myDataProvider: CreateDataProviderOptions = {\n  create: {\n    // Build the endpoint for creating records\n    getEndpoint: ({ resource }) => resource, // "posts" \u2192 "/posts"\n\n    // Add required headers for POST requests\n    buildHeaders: async ({ resource, variables }) => ({\n      "Accept-Language": "en-US",\n    }),\n\n    // Transform form data into API request body\n    buildBodyParams: async ({ resource, variables }) => {\n      // Refine provides: { title: "My Post", content: "Hello world" }\n      // API expects: { dto: { title: "My Post", content: "Hello world", status: "DRAFT" }}\n      return {\n        dto: {\n          ...variables,\n          status: "DRAFT", // Add default status\n        },\n      };\n    },\n\n    // Extract the created record from API response\n    mapResponse: async (response, params) => {\n      const json = await response.json();\n\n      // Your API wraps the created record in a "data" property\n      // API returns: { "data": { "id": 124, "title": "My Post" } }\n      // Refine needs: { "id": 124, "title": "My Post" }\n      return json.data;\n    },\n\n    // Handle API errors and convert to form validation errors\n    transformError: async (response) => {\n      const json = await response.json();\n\n      // API returns validation errors in different formats:\n      // {\n      //   "error": "Validation failed",\n      //   "field_errors": {\n      //     "title": ["Title is required"],\n      //     "email": ["Invalid format", "Already exists"],\n      //   }\n      // }\n      // Refine expects:\n      // {\n      //   message: \'Validation failed\',\n      //   statusCode: 422,\n      //   errors: [\n      //     { title: [\'Title is required\'] },\n      //     { email: [\'InvalidFormat\', \'Already exists] }\n      //   ]\n      // }\n\n      return {\n        message: json.error || "Something went wrong",\n        statusCode: response.status,\n        errors: json.field_errors,\n      };\n    },\n  },\n};\n')),(0,a.yg)("p",null,"With this ",(0,a.yg)("inlineCode",{parentName:"p"},"create")," implementation, here's what happens when a user submits a form:"),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Success scenario:")),(0,a.yg)("ol",null,(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"User action"),': User fills out a form and clicks "Save" or "Create"'),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Refine processes"),": Refine calls ",(0,a.yg)("inlineCode",{parentName:"li"},"create")," with form data (",(0,a.yg)("inlineCode",{parentName:"li"},'variables: { title: "My Post", content: "..." }'),")"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Your transformation"),": ",(0,a.yg)("inlineCode",{parentName:"li"},"buildBodyParams")," adds default fields (status, timestamp) and formats the request body"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"API call"),": POST request goes to ",(0,a.yg)("inlineCode",{parentName:"li"},"https://example.com/posts")," with the transformed data"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Response processing"),": ",(0,a.yg)("inlineCode",{parentName:"li"},"mapResponse")," extracts the created record with its new ID"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"UI update"),": Refine redirects to the new record or shows a success message")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Error scenario:")),(0,a.yg)("ol",null,(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"API returns error"),": Server responds with 400/422 status and validation errors"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Error transformation"),": ",(0,a.yg)("inlineCode",{parentName:"li"},"transformError")," converts API errors into consistent format"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Form validation"),": Refine displays field-specific errors under each input"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"User feedback"),": User sees exactly which fields need to be fixed")),(0,a.yg)("p",null,"This pattern ensures reliable record creation with proper data transformation and comprehensive error handling.")),(0,a.yg)("h3",{id:"update"},"update"),(0,a.yg)("p",null,"The ",(0,a.yg)("inlineCode",{parentName:"p"},"update")," method handles ",(0,a.yg)("strong",{parentName:"p"},"updating existing records"),". This powers your edit forms, inline editors, and any component that needs to modify existing data in your API."),(0,a.yg)("h3",null,"Understanding the Data Flow"),(0,a.yg)("p",null,"The data flow for ",(0,a.yg)("inlineCode",{parentName:"p"},"update")," involves sending modified form data to your API:"),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Refine Hooks \u2192 Your Data Provider \u2192 API \u2192 Your Data Provider \u2192 Refine")),(0,a.yg)("p",null,"Refine provides the record ID and form variables, you build the endpoint and request body, send the data, and return the updated record."),(0,a.yg)("h3",null,"What Refine Provides"),(0,a.yg)("p",null,"Refine calls ",(0,a.yg)("inlineCode",{parentName:"p"},"update")," with these parameters:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"resource"),": the collection name (e.g. ",(0,a.yg)("inlineCode",{parentName:"li"},'"posts"'),")"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"id"),": the unique identifier of the record to update"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"variables"),": the form data with changes (e.g. ",(0,a.yg)("inlineCode",{parentName:"li"},'{ title: "Updated Title", content: "..." }'),")"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"meta"),": optional metadata for custom behavior")),(0,a.yg)("h3",null,"What Your API Expects"),(0,a.yg)("p",null,"Your API likely expects a PUT or PATCH request with the updated data:"),(0,a.yg)("admonition",{type:"simple"},(0,a.yg)("p",{parentName:"admonition"},(0,a.yg)("strong",{parentName:"p"},"Example API Format:")),(0,a.yg)("ul",{parentName:"admonition"},(0,a.yg)("li",{parentName:"ul"},"Endpoint: ",(0,a.yg)("inlineCode",{parentName:"li"},"https://example.com/posts/123")),(0,a.yg)("li",{parentName:"ul"},"Method: ",(0,a.yg)("inlineCode",{parentName:"li"},"PUT")," or ",(0,a.yg)("inlineCode",{parentName:"li"},"PATCH")),(0,a.yg)("li",{parentName:"ul"},"Body: ",(0,a.yg)("inlineCode",{parentName:"li"},'{ dto: { "title": "Updated Title", "content": "Updated content" }}')),(0,a.yg)("li",{parentName:"ul"},"Response: ",(0,a.yg)("inlineCode",{parentName:"li"},'{ "data": { "id": 123, "title": "Updated Title", "content": "Updated content" } }'),"\n:::")),(0,a.yg)("h3",null,"What Refine Expects Back"),(0,a.yg)("p",{parentName:"admonition"},"Refine expects the updated record object reflecting all changes:"),(0,a.yg)("p",{parentName:"admonition"},"API returns:"),(0,a.yg)("pre",{parentName:"admonition"},(0,a.yg)("code",{parentName:"pre",className:"language-json"},'{\n  "data": { "id": 123, "title": "Updated Title", "content": "Updated content" }\n}\n')),(0,a.yg)("p",{parentName:"admonition"},"Refine expects:"),(0,a.yg)("pre",{parentName:"admonition"},(0,a.yg)("code",{parentName:"pre",className:"language-json"},'{ "id": 123, "title": "Updated Title", "content": "Updated content" }\n')),(0,a.yg)("h3",null,"Available Methods"),(0,a.yg)("p",{parentName:"admonition"},"The ",(0,a.yg)("inlineCode",{parentName:"p"},"update")," configuration object provides these methods to transform requests and responses:"),(0,a.yg)("ul",{parentName:"admonition"},(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"getEndpoint")),": Builds the API endpoint path with the record ID"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"getRequestMethod")),": Specifies request method, ",(0,a.yg)("inlineCode",{parentName:"li"},"patch")," by default."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"buildHeaders")),": Adds authentication tokens or content-type headers"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"buildQueryParams")),": Adds query parameters to the request"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"buildBodyParams")),": Transforms form data into your API's expected body format"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"mapResponse")),": Extracts the updated record from your API response"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"transformError")),": Converts API errors into user-friendly form validation errors")),(0,a.yg)("h3",null,"Implementation Example"),(0,a.yg)("pre",{parentName:"admonition"},(0,a.yg)("code",{parentName:"pre",className:"language-tsx"},'export const myDataProvider: CreateDataProviderOptions = {\n  update: {\n    // Build the endpoint with the record ID\n    getEndpoint: ({ resource, id }) => `${resource}/${id}`, // "posts/123"\n\n    // Add required headers for put/patch requests\n    getRequestMethod: (params: UpdateParams<any>) => \'put\'\n\n    buildHeaders: async ({ resource, id, variables }) => ({\n      \'Accept-Language\': \'en-US\',\n    }),\n\n    // Add query parameters if needed\n    buildQueryParams: async ({ resource, id, variables }) => {\n      const params: Record<string, any> = {};\n\n      if (resource === \'posts\') {\n        // Return updated record with author details\n        params.expand = \'author\';\n      }\n\n      return params;\n    },\n\n    // Transform form data into API request body\n    buildBodyParams: async ({ resource, id, variables }) => {\n      // Refine provides: { title: "Updated Title", content: "Updated content" }\n      // API expects: { dto: { title: "Updated Title", content: "Updated content", updatedAt: "2025-09-24T..." }}\n      return {\n        dto: {\n          ...variables,\n          updatedAt: new Date().toISOString(),\n        }\n      };\n    },\n\n    // Extract the updated record from API response\n    mapResponse: async (response, params) => {\n      const json = await response.json();\n\n      // Handle different response formats per resource\n      if (params.resource === \'categories\') {\n        return json.result;\n      }\n\n      // Your API wraps the updated record in a "data" property\n      // API returns: { "data": { "id": 123, "title": "Updated Title" } }\n      // Refine needs: { "id": 123, "title": "Updated Title" }\n      return json.data;\n    },\n\n    // Handle API errors and convert to form validation errors\n    transformError: async (response) => {\n      const json = await response.json();\n\n      // API returns validation errors:\n      // {\n      //   "error": "Validation failed",\n      //   "field_errors": {\n      //     "title": ["Title cannot be empty"],\n      //     "email": ["Invalid format"],\n      //   }\n      // }\n\n      return {\n        message: json.error || \'Update failed\',\n        statusCode: response.status,\n        errors: json.field_errors,\n      };\n    },\n  },\n};\n')),(0,a.yg)("p",{parentName:"admonition"},"With this ",(0,a.yg)("inlineCode",{parentName:"p"},"update")," implementation, here's what happens when a user modifies a record:"),(0,a.yg)("p",{parentName:"admonition"},(0,a.yg)("strong",{parentName:"p"},"Success scenario:")),(0,a.yg)("ol",{parentName:"admonition"},(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"User action"),': User edits a form and clicks "Save" or "Update"'),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Refine processes"),": Refine calls ",(0,a.yg)("inlineCode",{parentName:"li"},"update")," with the record ID and modified data (",(0,a.yg)("inlineCode",{parentName:"li"},"id: 123"),", ",(0,a.yg)("inlineCode",{parentName:"li"},'variables: { title: "Updated Title", content: "..." }'),")"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Your transformation"),": ",(0,a.yg)("inlineCode",{parentName:"li"},"buildBodyParams")," adds metadata (updatedAt timestamp) and formats the request body"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"API call"),": PUT request goes to ",(0,a.yg)("inlineCode",{parentName:"li"},"https://example.com/posts/123?expand=author")," with the transformed data"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Response processing"),": ",(0,a.yg)("inlineCode",{parentName:"li"},"mapResponse")," extracts the updated record with expanded author details"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"UI update"),": Refine refreshes the form or redirects with the updated data")),(0,a.yg)("p",{parentName:"admonition"},(0,a.yg)("strong",{parentName:"p"},"Error scenario:")),(0,a.yg)("ol",{parentName:"admonition"},(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"API returns error"),": Server responds with 400/422 status and validation errors"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Error transformation"),": ",(0,a.yg)("inlineCode",{parentName:"li"},"transformError")," converts API errors into consistent format"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Form validation"),": Refine displays field-specific errors under each input"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"User feedback"),": User sees exactly which fields have validation issues")),(0,a.yg)("p",{parentName:"admonition"},"This pattern ensures reliable record updates with proper data transformation and comprehensive error handling."),(0,a.yg)("h3",{parentName:"admonition",id:"deleteone"},"deleteOne"),(0,a.yg)("p",{parentName:"admonition"},"The ",(0,a.yg)("inlineCode",{parentName:"p"},"deleteOne")," method handles ",(0,a.yg)("strong",{parentName:"p"},"deleting existing records"),". This powers your delete buttons, bulk delete actions, and any component that needs to remove data from your API."),(0,a.yg)("h3",null,"Understanding the Data Flow"),(0,a.yg)("p",{parentName:"admonition"},"The data flow for ",(0,a.yg)("inlineCode",{parentName:"p"},"deleteOne")," involves sending a delete request to your API:"),(0,a.yg)("p",{parentName:"admonition"},(0,a.yg)("strong",{parentName:"p"},"Refine Hooks \u2192 Your Data Provider \u2192 API \u2192 Your Data Provider \u2192 Refine")),(0,a.yg)("p",{parentName:"admonition"},"Refine provides the record ID, you build the endpoint, send the delete request, and return the deleted record for confirmation."),(0,a.yg)("h3",null,"What Refine Provides"),(0,a.yg)("p",{parentName:"admonition"},"Refine calls ",(0,a.yg)("inlineCode",{parentName:"p"},"deleteOne")," with these parameters:"),(0,a.yg)("ul",{parentName:"admonition"},(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"resource"),": the collection name (e.g. ",(0,a.yg)("inlineCode",{parentName:"li"},'"posts"'),")"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"id"),": the unique identifier of the record to delete"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"variables"),": optional data for soft deletes or additional context"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"meta"),": optional metadata for custom behavior")),(0,a.yg)("h3",null,"What Your API Expects"),(0,a.yg)("p",{parentName:"admonition"},"Your API likely expects a DELETE request with the record ID:")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Example API Format:")),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Endpoint: ",(0,a.yg)("inlineCode",{parentName:"li"},"https://example.com/posts/123")),(0,a.yg)("li",{parentName:"ul"},"Method: ",(0,a.yg)("inlineCode",{parentName:"li"},"DELETE")),(0,a.yg)("li",{parentName:"ul"},"Body: Optional (for soft deletes or additional data)"),(0,a.yg)("li",{parentName:"ul"},"Response: ",(0,a.yg)("inlineCode",{parentName:"li"},'{ "data": { "id": 123, "title": "Deleted Post" } }')," or ",(0,a.yg)("inlineCode",{parentName:"li"},'{ "success": true }'),"\n:::")),(0,a.yg)("h3",null,"What Refine Expects Back"),(0,a.yg)("p",null,"Refine expects the deleted record object for confirmation and optimistic updates:"),(0,a.yg)("p",null,"API returns:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-json"},'{ "data": { "id": 123, "title": "Deleted Post" } }\n')),(0,a.yg)("p",null,"Refine expects:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-json"},'{ "id": 123, "title": "Deleted Post" }\n')),(0,a.yg)("h3",null,"Available Methods"),(0,a.yg)("p",null,"The ",(0,a.yg)("inlineCode",{parentName:"p"},"deleteOne")," configuration object provides these methods to transform requests and responses:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"getEndpoint")),": Builds the API endpoint path with the record ID"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"buildHeaders")),": Adds authentication tokens or custom headers"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"buildQueryParams")),": Adds query parameters to the request"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"buildBodyParams")),": Transforms variables into request body (for soft deletes)"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"mapResponse")),": Extracts the deleted record from your API response"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"transformError")),": Converts API errors into user-friendly error messages")),(0,a.yg)("h3",null,"Implementation Example"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx"},'export const myDataProvider: CreateDataProviderOptions = {\n  deleteOne: {\n    // Build the endpoint with the record ID\n    getEndpoint: ({ resource, id }) => `${resource}/${id}`, // "posts/123"\n\n    // Add required headers for DELETE requests\n    buildHeaders: async ({ resource, id, variables }) => ({\n      "Accept-Language": "en-US",\n    }),\n\n    // Add query parameters if needed\n    buildQueryParams: async ({ resource, id, variables }) => {\n      const params: Record<string, any> = {};\n\n      if (resource === "posts") {\n        // Force hard delete instead of soft delete\n        params.force = true;\n      }\n\n      return params;\n    },\n\n    // Transform variables into request body (for soft deletes)\n    buildBodyParams: async ({ resource, id, variables }) => {\n      // For soft deletes, send deletion reason or metadata\n      if (variables?.softDelete) {\n        return {\n          deletedAt: new Date().toISOString(),\n          deletionReason: variables.reason || "User deleted",\n          softDelete: true,\n        };\n      }\n\n      // Hard delete - no body needed\n      return undefined;\n    },\n\n    // Extract the deleted record from API response\n    mapResponse: async (response, params) => {\n      const json = await response.json();\n\n      // Handle different response formats\n      if (params.resource === "categories") {\n        return json.result;\n      }\n\n      // Some APIs return just success confirmation\n      if (json.success && !json.data) {\n        // Return minimal record with just the ID for confirmation\n        return { id: params.id };\n      }\n\n      // Your API wraps the deleted record in a "data" property\n      // API returns: { "data": { "id": 123, "title": "Deleted Post" } }\n      // Refine needs: { "id": 123, "title": "Deleted Post" }\n      return json.data;\n    },\n\n    // Handle API errors and convert to user-friendly errors\n    transformError: async (response) => {\n      const json = await response.json();\n\n      // Handle specific delete errors\n      if (response.status === 409) {\n        return {\n          message: "Cannot delete: Record has dependencies",\n          statusCode: 409,\n        };\n      }\n\n      if (response.status === 403) {\n        return {\n          message: "Not authorized to delete this record",\n          statusCode: 403,\n        };\n      }\n\n      return {\n        message: json.error || "Delete failed",\n        statusCode: response.status,\n      };\n    },\n  },\n};\n')),(0,a.yg)("p",null,"With this ",(0,a.yg)("inlineCode",{parentName:"p"},"deleteOne")," implementation, here's what happens when a user deletes a record:"),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Success scenario:")),(0,a.yg)("ol",null,(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"User action"),": User clicks delete button or confirms deletion in a modal"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Refine processes"),": Refine calls ",(0,a.yg)("inlineCode",{parentName:"li"},"deleteOne")," with the record ID (",(0,a.yg)("inlineCode",{parentName:"li"},"id: 123"),", optionally ",(0,a.yg)("inlineCode",{parentName:"li"},'variables: { softDelete: true, reason: "Outdated content" }'),")"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Your transformation"),": ",(0,a.yg)("inlineCode",{parentName:"li"},"buildBodyParams")," formats the request body for soft delete, ",(0,a.yg)("inlineCode",{parentName:"li"},"buildQueryParams")," adds force parameter if needed"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"API call"),": DELETE request goes to ",(0,a.yg)("inlineCode",{parentName:"li"},"https://example.com/posts/123?force=true")," with deletion metadata"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Response processing"),": ",(0,a.yg)("inlineCode",{parentName:"li"},"mapResponse")," extracts the deleted record for confirmation"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"UI update"),": Refine removes the record from lists and shows success confirmation")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Error scenario:")),(0,a.yg)("ol",null,(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"API returns error"),": Server responds with 409 (conflict) or 403 (forbidden) status"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Error transformation"),": ",(0,a.yg)("inlineCode",{parentName:"li"},"transformError")," converts specific HTTP codes into user-friendly messages"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"User feedback"),': Refine displays contextual error messages like "Cannot delete: Record has dependencies"'),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"UI state"),": Record remains in the list, delete operation is cancelled")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Soft delete scenario:")),(0,a.yg)("ol",null,(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"User triggers soft delete"),": Form includes deletion reason and soft delete flag"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Request body"),": Contains ",(0,a.yg)("inlineCode",{parentName:"li"},"deletedAt")," timestamp, reason, and soft delete flag"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"API processing"),": Server marks record as deleted without removing from database"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Response"),": API returns the soft-deleted record with updated status"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"UI update"),': Record is filtered out of active lists but may appear in "deleted items" view')),(0,a.yg)("p",null,"This pattern ensures reliable record deletion with proper error handling and support for both hard and soft deletion strategies.")),(0,a.yg)("h3",{id:"getmany"},"getMany"),(0,a.yg)(y,{id:"getmany",mdxType:"DocThumbsUpDownFeedbackWidget"},(0,a.yg)("p",null,"The ",(0,a.yg)("inlineCode",{parentName:"p"},"getMany")," method handles ",(0,a.yg)("strong",{parentName:"p"},"fetching multiple records by their IDs"),". This powers relationship fields, reference selectors, and any component that needs to load specific records by their identifiers."),(0,a.yg)("admonition",{title:"Optional Method",type:"info"},(0,a.yg)("p",{parentName:"admonition"},"The ",(0,a.yg)("inlineCode",{parentName:"p"},"getMany")," method is optional. If you don't implement it, Refine will automatically fall back to making individual ",(0,a.yg)("inlineCode",{parentName:"p"},"getOne")," requests for each ID. While this works, implementing ",(0,a.yg)("inlineCode",{parentName:"p"},"getMany")," with batch requests is more efficient for performance.")),(0,a.yg)("h3",null,"Understanding the Data Flow"),(0,a.yg)("p",null,"The data flow for ",(0,a.yg)("inlineCode",{parentName:"p"},"getMany")," involves sending a request with multiple IDs to your API:"),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Refine Hooks \u2192 Your Data Provider \u2192 API \u2192 Your Data Provider \u2192 Refine")),(0,a.yg)("p",null,"Refine provides an array of IDs, you build the endpoint and query parameters, make the request, and return the matching records."),(0,a.yg)("h3",null,"What Refine Provides"),(0,a.yg)("p",null,"Refine calls ",(0,a.yg)("inlineCode",{parentName:"p"},"getMany")," with these parameters:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"resource"),": the collection name (e.g. ",(0,a.yg)("inlineCode",{parentName:"li"},'"posts"'),")"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"ids"),": array of unique identifiers to fetch (e.g. ",(0,a.yg)("inlineCode",{parentName:"li"},"[123, 456, 789]"),")"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"meta"),": optional metadata for custom behavior")),(0,a.yg)("h3",null,"What Your API Expects"),(0,a.yg)("p",null,"Your API might handle multiple IDs in different ways:"),(0,a.yg)("admonition",{type:"simple"},(0,a.yg)("p",{parentName:"admonition"},(0,a.yg)("strong",{parentName:"p"},"Example API Formats:")),(0,a.yg)("p",{parentName:"admonition"},(0,a.yg)("strong",{parentName:"p"},"Option 1 - Query parameter with comma-separated IDs:")),(0,a.yg)("ul",{parentName:"admonition"},(0,a.yg)("li",{parentName:"ul"},"Endpoint: ",(0,a.yg)("inlineCode",{parentName:"li"},"https://example.com/posts?ids=123,456,789")),(0,a.yg)("li",{parentName:"ul"},"Method: ",(0,a.yg)("inlineCode",{parentName:"li"},"GET"))),(0,a.yg)("p",{parentName:"admonition"},(0,a.yg)("strong",{parentName:"p"},"Option 2 - Query parameter with array format:")),(0,a.yg)("ul",{parentName:"admonition"},(0,a.yg)("li",{parentName:"ul"},"Endpoint: ",(0,a.yg)("inlineCode",{parentName:"li"},"https://example.com/posts?id[]=123&id[]=456&id[]=789")),(0,a.yg)("li",{parentName:"ul"},"Method: ",(0,a.yg)("inlineCode",{parentName:"li"},"GET"))),(0,a.yg)("p",{parentName:"admonition"},(0,a.yg)("strong",{parentName:"p"},"Option 3 - Multiple separate requests (fallback):")),(0,a.yg)("ul",{parentName:"admonition"},(0,a.yg)("li",{parentName:"ul"},"Endpoint: ",(0,a.yg)("inlineCode",{parentName:"li"},"https://example.com/posts/123"),", ",(0,a.yg)("inlineCode",{parentName:"li"},"https://example.com/posts/456"),", etc."),(0,a.yg)("li",{parentName:"ul"},"Method: ",(0,a.yg)("inlineCode",{parentName:"li"},"GET")," (multiple requests)"),(0,a.yg)("li",{parentName:"ul"},"Note: Less efficient but works when batch endpoints aren't available")),(0,a.yg)("p",{parentName:"admonition"},(0,a.yg)("strong",{parentName:"p"},"Response:")," ",(0,a.yg)("inlineCode",{parentName:"p"},'{ "data": [{ "id": 123, "title": "Post 1" }, { "id": 456, "title": "Post 2" }] }'))),(0,a.yg)("h3",null,"What Refine Expects Back"),(0,a.yg)("p",null,"Refine expects an array of record objects matching the requested IDs:"),(0,a.yg)("p",null,"API returns:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-json"},'{\n  "data": [\n    { "id": 123, "title": "Post 1" },\n    { "id": 456, "title": "Post 2" },\n    { "id": 789, "title": "Post 3" }\n  ]\n}\n')),(0,a.yg)("p",null,"Refine expects:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-json"},'[\n  { "id": 123, "title": "Post 1" },\n  { "id": 456, "title": "Post 2" },\n  { "id": 789, "title": "Post 3" }\n]\n')),(0,a.yg)("h3",null,"Available Methods"),(0,a.yg)("p",null,"The ",(0,a.yg)("inlineCode",{parentName:"p"},"getMany")," configuration object provides these methods to transform requests and responses:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"getEndpoint")),": Builds the API endpoint path (defaults to resource name)"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"buildHeaders")),": Adds authentication tokens or custom headers"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"buildQueryParams")),": Transforms ID array into your API's query format"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"mapResponse")),": Extracts the record array from your API response")),(0,a.yg)("h3",null,"Implementation Example"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx"},'export const myDataProvider: CreateDataProviderOptions = {\n  getMany: {\n    // Build the endpoint for batch requests\n    getEndpoint: ({ resource, ids }) => {\n      // Use different endpoints based on resource type\n      if (resource === "users") {\n        return `${resource}/batch`;\n      }\n      return resource; // "posts"\n    },\n\n    // Add required headers\n    buildHeaders: async ({ resource, ids }) => ({\n      "Accept-Language": "en-US",\n    }),\n\n    // Transform ID array into query parameters\n    buildQueryParams: async ({ resource, ids }) => {\n      const params: Record<string, any> = {};\n\n      // Different query formats based on resource\n      if (resource === "posts") {\n        // Format: ?ids=123,456,789\n        params.ids = ids.join(",");\n      } else if (resource === "categories") {\n        // Format: ?id[]=123&id[]=456&id[]=789\n        params.id = ids;\n      }\n\n      // Add expansion for related data\n      if (resource === "posts") {\n        params.expand = "author,category";\n      }\n\n      return params;\n    },\n\n    // Extract the record array from API response\n    mapResponse: async (response, params) => {\n      const json = await response.json();\n\n      // Handle different response formats per resource\n      if (params.resource === "categories") {\n        return json.results;\n      }\n\n      // Your API wraps records in a "data" property\n      // API returns: { "data": [{ "id": 123 }, { "id": 456 }] }\n      // Refine needs: [{ "id": 123 }, { "id": 456 }]\n      return json.data;\n    },\n  },\n};\n')),(0,a.yg)("p",null,"With this ",(0,a.yg)("inlineCode",{parentName:"p"},"getMany")," implementation, here's what happens when Refine needs multiple records:"),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Success scenario:")),(0,a.yg)("ol",null,(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Refine needs records"),": Reference field or relationship component requests multiple records (",(0,a.yg)("inlineCode",{parentName:"li"},"ids: [123, 456, 789]"),")"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Your transformation"),": ",(0,a.yg)("inlineCode",{parentName:"li"},"buildQueryParams")," formats IDs as comma-separated string (",(0,a.yg)("inlineCode",{parentName:"li"},"?ids=123,456,789&expand=author,category"),")"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"API call"),": GET request goes to ",(0,a.yg)("inlineCode",{parentName:"li"},"https://example.com/posts?ids=123,456,789&expand=author,category")),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Response processing"),": ",(0,a.yg)("inlineCode",{parentName:"li"},"mapResponse")," extracts the record array from wrapped response"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"UI update"),": Refine displays the records in select options, relationship fields, or reference components")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Fallback behavior scenario:")),(0,a.yg)("ol",null,(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"No getMany implemented"),": You only implement ",(0,a.yg)("inlineCode",{parentName:"li"},"getOne")," in your data provider"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Refine needs multiple records"),": Component requests records with ",(0,a.yg)("inlineCode",{parentName:"li"},"ids: [123, 456, 789]")),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Automatic fallback"),": Refine makes three separate ",(0,a.yg)("inlineCode",{parentName:"li"},"getOne")," calls: ",(0,a.yg)("inlineCode",{parentName:"li"},'getOne({ resource: "posts", id: 123 })'),", ",(0,a.yg)("inlineCode",{parentName:"li"},'getOne({ resource: "posts", id: 456 })'),", ",(0,a.yg)("inlineCode",{parentName:"li"},'getOne({ resource: "posts", id: 789 })')),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Performance impact"),": Three HTTP requests instead of one batch request"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"UI behavior"),": Same end result, but slower loading times")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Large ID array scenario:")),(0,a.yg)("ol",null,(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Many IDs requested"),": Component requests 100+ records at once"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Query parameter handling"),": Your API must handle long query strings with many IDs"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"API call"),": GET request with all IDs in query parameters (URL length limits may apply)"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Response processing"),": Same ",(0,a.yg)("inlineCode",{parentName:"li"},"mapResponse")," logic handles the response"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Consideration"),": If URL length becomes an issue, consider implementing a custom method using the ",(0,a.yg)("inlineCode",{parentName:"li"},"custom")," data provider method with POST requests")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Partial results scenario:")),(0,a.yg)("ol",null,(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Some IDs missing"),": API returns records for IDs 123 and 456 but not 789"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Response processing"),": ",(0,a.yg)("inlineCode",{parentName:"li"},"mapResponse")," returns available records ",(0,a.yg)("inlineCode",{parentName:"li"},"[{ id: 123 }, { id: 456 }]")),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"UI handling"),": Refine components gracefully handle missing records (show placeholder or skip)"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"No error thrown"),": Missing records are handled as normal behavior, not errors")),(0,a.yg)("p",null,"This pattern ensures reliable batch record fetching with support for different API designs, large datasets, and graceful error handling.")),(0,a.yg)("h3",{id:"createmany"},"createMany"),(0,a.yg)("p",null,"The ",(0,a.yg)("inlineCode",{parentName:"p"},"createMany")," method handles ",(0,a.yg)("strong",{parentName:"p"},"creating multiple records in a single request"),". This powers bulk creation features, import functionality, and any component that needs to efficiently create multiple records at once."),(0,a.yg)("admonition",{title:"Optional Method",type:"info"},(0,a.yg)("p",{parentName:"admonition"},"The ",(0,a.yg)("inlineCode",{parentName:"p"},"createMany")," method is optional. If you don't implement it, Refine will automatically fall back to making individual ",(0,a.yg)("inlineCode",{parentName:"p"},"create")," requests for each record. While this works, implementing ",(0,a.yg)("inlineCode",{parentName:"p"},"createMany")," with batch requests is more efficient for performance and provides better transaction handling.")),(0,a.yg)("h3",null,"Understanding the Data Flow"),(0,a.yg)("p",null,"The data flow for ",(0,a.yg)("inlineCode",{parentName:"p"},"createMany")," involves sending multiple record data to your API in a single request:"),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Refine Hooks \u2192 Your Data Provider \u2192 API \u2192 Your Data Provider \u2192 Refine")),(0,a.yg)("p",null,"Refine provides an array of record data, you build the endpoint and request body, send the batch data, and return the array of created records."),(0,a.yg)("h3",null,"What Refine Provides"),(0,a.yg)("p",null,"Refine calls ",(0,a.yg)("inlineCode",{parentName:"p"},"createMany")," with these parameters:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"resource"),": the collection name (e.g. ",(0,a.yg)("inlineCode",{parentName:"li"},'"posts"'),")"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"variables"),": array of form data to be saved (e.g. ",(0,a.yg)("inlineCode",{parentName:"li"},'[{ title: "Post 1", content: "..." }, { title: "Post 2", content: "..." }]'),")"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"meta"),": optional metadata for custom behavior")),(0,a.yg)("h3",null,"What Your API Expects"),(0,a.yg)("p",null,"Your API likely expects a POST request with multiple records in the request body:"),(0,a.yg)("admonition",{type:"simple"},(0,a.yg)("p",{parentName:"admonition"},(0,a.yg)("strong",{parentName:"p"},"Example API Format:")),(0,a.yg)("ul",{parentName:"admonition"},(0,a.yg)("li",{parentName:"ul"},"Endpoint: ",(0,a.yg)("inlineCode",{parentName:"li"},"https://example.com/posts/batch")),(0,a.yg)("li",{parentName:"ul"},"Method: ",(0,a.yg)("inlineCode",{parentName:"li"},"POST")),(0,a.yg)("li",{parentName:"ul"},"Body: ",(0,a.yg)("inlineCode",{parentName:"li"},'{ "items": [{ "title": "Post 1", "content": "Hello" }, { "title": "Post 2", "content": "World" }] }')),(0,a.yg)("li",{parentName:"ul"},"Response: ",(0,a.yg)("inlineCode",{parentName:"li"},'{ "data": [{ "id": 124, "title": "Post 1" }, { "id": 125, "title": "Post 2" }] }'),"\n:::")),(0,a.yg)("h3",null,"What Refine Expects Back"),(0,a.yg)("p",{parentName:"admonition"},"Refine expects an array of newly created record objects with their assigned IDs:"),(0,a.yg)("p",{parentName:"admonition"},"API returns:"),(0,a.yg)("pre",{parentName:"admonition"},(0,a.yg)("code",{parentName:"pre",className:"language-json"},'{\n  "data": [\n    { "id": 124, "title": "Post 1", "content": "Hello" },\n    { "id": 125, "title": "Post 2", "content": "World" }\n  ]\n}\n')),(0,a.yg)("p",{parentName:"admonition"},"Refine expects:"),(0,a.yg)("pre",{parentName:"admonition"},(0,a.yg)("code",{parentName:"pre",className:"language-json"},'[\n  { "id": 124, "title": "Post 1", "content": "Hello" },\n  { "id": 125, "title": "Post 2", "content": "World" }\n]\n')),(0,a.yg)("h3",null,"Available Methods"),(0,a.yg)("p",{parentName:"admonition"},"The ",(0,a.yg)("inlineCode",{parentName:"p"},"createMany")," configuration object provides these methods to transform requests and responses:"),(0,a.yg)("ul",{parentName:"admonition"},(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"getEndpoint")),": Builds the API endpoint path (defaults to resource name)"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"buildHeaders")),": Adds authentication tokens or content-type headers"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"buildQueryParams")),": Adds query parameters to the request"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"buildBodyParams")),": Transforms the array of form data into your API's expected body format"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"mapResponse")),": Extracts the created records array from your API response"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"transformError")),": Converts API errors into user-friendly form validation errors")),(0,a.yg)("h3",null,"Implementation Example"),(0,a.yg)("pre",{parentName:"admonition"},(0,a.yg)("code",{parentName:"pre",className:"language-tsx"},'export const myDataProvider: CreateDataProviderOptions = {\n  createMany: {\n    // Build the endpoint for batch creation\n    getEndpoint: ({ resource }) => `${resource}/batch`, // "posts/batch"\n\n    // Add required headers for POST requests\n    buildHeaders: async ({ resource, variables }) => ({\n      "Accept-Language": "en-US",\n    }),\n\n    // Add query parameters if needed\n    buildQueryParams: async ({ resource, variables }) => {\n      const params: Record<string, any> = {};\n\n      if (resource === "posts") {\n        // Return created records with author details\n        params.expand = "author";\n      }\n\n      return params;\n    },\n\n    // Transform array of form data into API request body\n    buildBodyParams: async ({ resource, variables }) => {\n      // Refine provides: [{ title: "Post 1" }, { title: "Post 2" }]\n      // API expects: { items: [{ title: "Post 1", status: "DRAFT" }, { title: "Post 2", status: "DRAFT" }] }\n      const itemsWithDefaults = variables.map((item) => ({\n        ...item,\n        status: "DRAFT",\n        createdAt: new Date().toISOString(),\n      }));\n\n      return {\n        items: itemsWithDefaults,\n      };\n    },\n\n    // Extract the created records array from API response\n    mapResponse: async (response, params) => {\n      const json = await response.json();\n\n      // Handle different response formats per resource\n      if (params.resource === "categories") {\n        return json.results;\n      }\n\n      // Your API wraps the created records in a "data" property\n      // API returns: { "data": [{ "id": 124 }, { "id": 125 }] }\n      // Refine needs: [{ "id": 124 }, { "id": 125 }]\n      return json.data;\n    },\n\n    // Handle API errors and convert to form validation errors\n    transformError: async (response) => {\n      const json = await response.json();\n\n      // Handle batch creation errors\n      // API might return errors for individual items:\n      // {\n      //   "error": "Some items failed validation",\n      //   "item_errors": [\n      //     { "index": 0, "field_errors": { "title": ["Required"] } },\n      //     { "index": 2, "field_errors": { "email": ["Invalid"] } }\n      //   ]\n      // }\n\n      return {\n        message: json.error || "Batch creation failed",\n        statusCode: response.status,\n        errors: json.item_errors,\n      };\n    },\n  },\n};\n')),(0,a.yg)("p",{parentName:"admonition"},"With this ",(0,a.yg)("inlineCode",{parentName:"p"},"createMany")," implementation, here's what happens when multiple records need to be created:"),(0,a.yg)("p",{parentName:"admonition"},(0,a.yg)("strong",{parentName:"p"},"Success scenario:")),(0,a.yg)("ol",{parentName:"admonition"},(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Bulk creation triggered"),": User imports CSV data or uses bulk creation form with multiple records"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Refine processes"),": Refine calls ",(0,a.yg)("inlineCode",{parentName:"li"},"createMany")," with array of form data (",(0,a.yg)("inlineCode",{parentName:"li"},'variables: [{ title: "Post 1" }, { title: "Post 2" }]'),")"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Your transformation"),": ",(0,a.yg)("inlineCode",{parentName:"li"},"buildBodyParams")," adds default fields to each item and formats the request body"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"API call"),": POST request goes to ",(0,a.yg)("inlineCode",{parentName:"li"},"https://example.com/posts/batch?expand=author")," with the batch data"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Response processing"),": ",(0,a.yg)("inlineCode",{parentName:"li"},"mapResponse")," extracts the array of created records with their new IDs"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"UI update"),": Refine updates lists with all newly created records and shows success confirmation")),(0,a.yg)("p",{parentName:"admonition"},(0,a.yg)("strong",{parentName:"p"},"Fallback behavior scenario:")),(0,a.yg)("ol",{parentName:"admonition"},(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"No createMany implemented"),": You only implement ",(0,a.yg)("inlineCode",{parentName:"li"},"create")," in your data provider"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Refine needs to create multiple records"),": Component requests batch creation with ",(0,a.yg)("inlineCode",{parentName:"li"},'variables: [{ title: "Post 1" }, { title: "Post 2" }, { title: "Post 3" }]')),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Automatic fallback"),": Refine makes three separate ",(0,a.yg)("inlineCode",{parentName:"li"},"create")," calls: ",(0,a.yg)("inlineCode",{parentName:"li"},'create({ resource: "posts", variables: { title: "Post 1" } })'),", etc."),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Performance impact"),": Three HTTP requests instead of one batch request"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Transaction handling"),": No atomicity - some records might succeed while others fail"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"UI behavior"),": Same end result, but slower and less reliable for large batches")),(0,a.yg)("p",{parentName:"admonition"},(0,a.yg)("strong",{parentName:"p"},"Error scenario:")),(0,a.yg)("ol",{parentName:"admonition"},(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"API returns batch error"),": Server responds with validation errors for specific items in the batch"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Error transformation"),": ",(0,a.yg)("inlineCode",{parentName:"li"},"transformError")," converts item-specific errors into structured format"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Partial success handling"),": Some records might be created successfully while others fail"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"User feedback"),": Refine can display which specific items had validation issues")),(0,a.yg)("p",{parentName:"admonition"},(0,a.yg)("strong",{parentName:"p"},"Large batch scenario:")),(0,a.yg)("ol",{parentName:"admonition"},(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Many records requested"),": User tries to import 1000+ records at once"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"API limitations"),": Server might have limits on batch size or request timeout"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Consideration"),": You might want to implement chunking logic to split large batches into smaller requests"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Error handling"),": Handle timeout and size limit errors gracefully")),(0,a.yg)("p",{parentName:"admonition"},"This pattern ensures efficient batch record creation with proper transaction handling, performance benefits, and comprehensive error management for individual items within the batch."),(0,a.yg)("h3",{parentName:"admonition",id:"updatemany"},"updateMany"),(0,a.yg)("p",{parentName:"admonition"},"The ",(0,a.yg)("inlineCode",{parentName:"p"},"updateMany")," method handles ",(0,a.yg)("strong",{parentName:"p"},"updating multiple records in a single request"),". This powers bulk edit features, batch status changes, and any component that needs to efficiently modify multiple records at once.")),(0,a.yg)("p",null,"The ",(0,a.yg)("inlineCode",{parentName:"p"},"updateMany")," method is optional. If you don't implement it, Refine will automatically fall back to making individual ",(0,a.yg)("inlineCode",{parentName:"p"},"update")," requests for each record. While this works, implementing ",(0,a.yg)("inlineCode",{parentName:"p"},"updateMany")," with batch requests is more efficient for performance and provides better transaction handling.\n:::"),(0,a.yg)("h3",null,"Understanding the Data Flow"),(0,a.yg)("p",null,"The data flow for ",(0,a.yg)("inlineCode",{parentName:"p"},"updateMany")," involves sending multiple record updates to your API in a single request:"),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Refine Hooks \u2192 Your Data Provider \u2192 API \u2192 Your Data Provider \u2192 Refine")),(0,a.yg)("p",null,"Refine provides an array of IDs and update data, you build the endpoint and request body, send the batch updates, and return the array of updated records."),(0,a.yg)("h3",null,"What Refine Provides"),(0,a.yg)("p",null,"Refine calls ",(0,a.yg)("inlineCode",{parentName:"p"},"updateMany")," with these parameters:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"resource"),": the collection name (e.g. ",(0,a.yg)("inlineCode",{parentName:"li"},'"posts"'),")"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"ids"),": array of unique identifiers to update (e.g. ",(0,a.yg)("inlineCode",{parentName:"li"},"[123, 456, 789]"),")"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"variables"),": the form data with changes to apply to all records (e.g. ",(0,a.yg)("inlineCode",{parentName:"li"},'{ status: "published", updatedAt: "..." }'),")"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"meta"),": optional metadata for custom behavior")),(0,a.yg)("h3",null,"What Your API Expects"),(0,a.yg)("p",null,"Your API likely expects a PUT or PATCH request with multiple record updates:"),(0,a.yg)("admonition",{type:"simple"},(0,a.yg)("p",{parentName:"admonition"},(0,a.yg)("strong",{parentName:"p"},"Example API Format:")),(0,a.yg)("ul",{parentName:"admonition"},(0,a.yg)("li",{parentName:"ul"},"Endpoint: ",(0,a.yg)("inlineCode",{parentName:"li"},"https://example.com/posts/batch")),(0,a.yg)("li",{parentName:"ul"},"Method: ",(0,a.yg)("inlineCode",{parentName:"li"},"PUT")," or ",(0,a.yg)("inlineCode",{parentName:"li"},"PATCH")),(0,a.yg)("li",{parentName:"ul"},"Body: ",(0,a.yg)("inlineCode",{parentName:"li"},'{ "ids": [123, 456, 789], "updates": { "status": "published", "updatedAt": "2025-09-24T..." } }')),(0,a.yg)("li",{parentName:"ul"},"Response: ",(0,a.yg)("inlineCode",{parentName:"li"},'{ "data": [{ "id": 123, "status": "published" }, { "id": 456, "status": "published" }] }'),"\n:::")),(0,a.yg)("h3",null,"What Refine Expects Back"),(0,a.yg)("p",{parentName:"admonition"},"Refine expects an array of updated record objects reflecting the changes:"),(0,a.yg)("p",{parentName:"admonition"},"API returns:"),(0,a.yg)("pre",{parentName:"admonition"},(0,a.yg)("code",{parentName:"pre",className:"language-json"},'{\n  "data": [\n    { "id": 123, "title": "Post 1", "status": "published" },\n    { "id": 456, "title": "Post 2", "status": "published" },\n    { "id": 789, "title": "Post 3", "status": "published" }\n  ]\n}\n')),(0,a.yg)("p",{parentName:"admonition"},"Refine expects:"),(0,a.yg)("pre",{parentName:"admonition"},(0,a.yg)("code",{parentName:"pre",className:"language-json"},'[\n  { "id": 123, "title": "Post 1", "status": "published" },\n  { "id": 456, "title": "Post 2", "status": "published" },\n  { "id": 789, "title": "Post 3", "status": "published" }\n]\n')),(0,a.yg)("h3",null,"Available Methods"),(0,a.yg)("p",{parentName:"admonition"},"The ",(0,a.yg)("inlineCode",{parentName:"p"},"updateMany")," configuration object provides these methods to transform requests and responses:"),(0,a.yg)("ul",{parentName:"admonition"},(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"getEndpoint")),": Builds the API endpoint path (defaults to resource name)"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"getRequestMethod")),": Specifies request method, ",(0,a.yg)("inlineCode",{parentName:"li"},"patch")," by default"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"buildHeaders")),": Adds authentication tokens or content-type headers"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"buildQueryParams")),": Adds query parameters to the request"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"buildBodyParams")),": Transforms IDs and variables into your API's expected body format"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"mapResponse")),": Extracts the updated records array from your API response"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"transformError")),": Converts API errors into user-friendly error messages")),(0,a.yg)("h3",null,"Implementation Example"),(0,a.yg)("pre",{parentName:"admonition"},(0,a.yg)("code",{parentName:"pre",className:"language-tsx"},'export const myDataProvider: CreateDataProviderOptions = {\n  updateMany: {\n    // Build the endpoint for batch updates\n    getEndpoint: ({ resource }) => `${resource}/batch`, // "posts/batch"\n\n    // Specify request method\n    getRequestMethod: ({ resource, ids, variables }) => "put",\n\n    // Add required headers for PUT/PATCH requests\n    buildHeaders: async ({ resource, ids, variables }) => ({\n      "Accept-Language": "en-US",\n    }),\n\n    // Add query parameters if needed\n    buildQueryParams: async ({ resource, ids, variables }) => {\n      const params: Record<string, any> = {};\n\n      if (resource === "posts") {\n        // Return updated records with author details\n        params.expand = "author";\n      }\n\n      return params;\n    },\n\n    // Transform IDs and variables into API request body\n    buildBodyParams: async ({ resource, ids, variables }) => {\n      // Refine provides: ids: [123, 456], variables: { status: "published" }\n      // API expects: { ids: [123, 456], updates: { status: "published", updatedAt: "..." } }\n      return {\n        ids: ids,\n        updates: {\n          ...variables,\n          updatedAt: new Date().toISOString(),\n        },\n      };\n    },\n\n    // Extract the updated records array from API response\n    mapResponse: async (response, params) => {\n      const json = await response.json();\n\n      // Handle different response formats per resource\n      if (params.resource === "categories") {\n        return json.results;\n      }\n\n      // Your API wraps the updated records in a "data" property\n      // API returns: { "data": [{ "id": 123 }, { "id": 456 }] }\n      // Refine needs: [{ "id": 123 }, { "id": 456 }]\n      return json.data;\n    },\n\n    // Handle API errors and convert to user-friendly errors\n    transformError: async (response) => {\n      const json = await response.json();\n\n      // Handle batch update errors\n      if (response.status === 409) {\n        return {\n          message: "Some records could not be updated due to conflicts",\n          statusCode: 409,\n        };\n      }\n\n      if (response.status === 403) {\n        return {\n          message: "Not authorized to update some records",\n          statusCode: 403,\n        };\n      }\n\n      return {\n        message: json.error || "Batch update failed",\n        statusCode: response.status,\n      };\n    },\n  },\n};\n')),(0,a.yg)("p",{parentName:"admonition"},"With this ",(0,a.yg)("inlineCode",{parentName:"p"},"updateMany")," implementation, here's what happens when multiple records need to be updated:"),(0,a.yg)("p",{parentName:"admonition"},(0,a.yg)("strong",{parentName:"p"},"Success scenario:")),(0,a.yg)("ol",{parentName:"admonition"},(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Bulk update triggered"),': User selects multiple records and changes their status to "published"'),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Refine processes"),": Refine calls ",(0,a.yg)("inlineCode",{parentName:"li"},"updateMany")," with IDs and update data (",(0,a.yg)("inlineCode",{parentName:"li"},"ids: [123, 456, 789]"),", ",(0,a.yg)("inlineCode",{parentName:"li"},'variables: { status: "published" }'),")"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Your transformation"),": ",(0,a.yg)("inlineCode",{parentName:"li"},"buildBodyParams")," adds metadata (updatedAt) and formats the request body with IDs and updates"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"API call"),": PUT request goes to ",(0,a.yg)("inlineCode",{parentName:"li"},"https://example.com/posts/batch?expand=author")," with the batch data"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Response processing"),": ",(0,a.yg)("inlineCode",{parentName:"li"},"mapResponse")," extracts the array of updated records"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"UI update"),": Refine refreshes the list view with all updated records showing the new status")),(0,a.yg)("p",{parentName:"admonition"},(0,a.yg)("strong",{parentName:"p"},"Fallback behavior scenario:")),(0,a.yg)("ol",{parentName:"admonition"},(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"No updateMany implemented"),": You only implement ",(0,a.yg)("inlineCode",{parentName:"li"},"update")," in your data provider"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Refine needs to update multiple records"),": Component requests batch update with ",(0,a.yg)("inlineCode",{parentName:"li"},"ids: [123, 456, 789]"),", ",(0,a.yg)("inlineCode",{parentName:"li"},'variables: { status: "published" }')),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Automatic fallback"),": Refine makes three separate ",(0,a.yg)("inlineCode",{parentName:"li"},"update")," calls: ",(0,a.yg)("inlineCode",{parentName:"li"},'update({ resource: "posts", id: 123, variables: { status: "published" } })'),", etc."),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Performance impact"),": Three HTTP requests instead of one batch request"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Transaction handling"),": No atomicity - some records might update while others fail"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"UI behavior"),": Same end result, but slower and less reliable for large batches")),(0,a.yg)("p",{parentName:"admonition"},(0,a.yg)("strong",{parentName:"p"},"Partial success scenario:")),(0,a.yg)("ol",{parentName:"admonition"},(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Some records cannot be updated"),": API successfully updates records 123 and 456, but record 789 has validation errors"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Response handling"),": API returns partial success with updated records and error details"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Error transformation"),": ",(0,a.yg)("inlineCode",{parentName:"li"},"transformError")," processes mixed success/failure responses"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"User feedback"),": Refine shows which records were updated successfully and which failed")),(0,a.yg)("p",{parentName:"admonition"},(0,a.yg)("strong",{parentName:"p"},"Large batch scenario:")),(0,a.yg)("ol",{parentName:"admonition"},(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Many records selected"),": User tries to update 500+ records at once"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"API limitations"),": Server might have limits on batch size or processing time"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Performance consideration"),": Large batches might need chunking or background processing"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Error handling"),": Handle timeout errors and suggest smaller batch sizes")),(0,a.yg)("p",{parentName:"admonition"},"This pattern ensures efficient batch record updates with proper transaction handling, performance benefits, and comprehensive error management for bulk operations."),(0,a.yg)("h3",{parentName:"admonition",id:"custom"},"custom"),(0,a.yg)("p",{parentName:"admonition"},"The ",(0,a.yg)("inlineCode",{parentName:"p"},"custom")," method handles ",(0,a.yg)("strong",{parentName:"p"},"any special operations")," that don't fit into the standard CRUD pattern. This powers search endpoints, export functionality, analytics queries, file uploads, and any unique API operations your application needs.")),(0,a.yg)("p",null,"Unlike other data provider methods, the ",(0,a.yg)("inlineCode",{parentName:"p"},"custom")," method is ",(0,a.yg)("strong",{parentName:"p"},"required")," when you need to perform operations beyond standard CRUD. There's no fallback behavior - if you need custom functionality, you must implement this method.\n:::"),(0,a.yg)("h3",null,"Understanding the Data Flow"),(0,a.yg)("p",null,"The data flow for ",(0,a.yg)("inlineCode",{parentName:"p"},"custom")," is flexible since it handles any type of operation:"),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Refine Hooks \u2192 Your Data Provider \u2192 API \u2192 Your Data Provider \u2192 Refine")),(0,a.yg)("p",null,"Refine provides the operation parameters, you build the appropriate request, send it to your custom endpoint, and return the response data."),(0,a.yg)("h3",null,"What Refine Provides"),(0,a.yg)("p",null,"Refine calls ",(0,a.yg)("inlineCode",{parentName:"p"},"custom")," with these parameters:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"url"),": the custom endpoint URL (e.g. ",(0,a.yg)("inlineCode",{parentName:"li"},'"/posts/search"')," or ",(0,a.yg)("inlineCode",{parentName:"li"},'"/analytics/dashboard"'),")"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"method"),": HTTP method (e.g. ",(0,a.yg)("inlineCode",{parentName:"li"},'"get"'),", ",(0,a.yg)("inlineCode",{parentName:"li"},'"post"'),", ",(0,a.yg)("inlineCode",{parentName:"li"},'"put"'),", ",(0,a.yg)("inlineCode",{parentName:"li"},'"delete"'),")"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"payload"),": optional request data for POST/PUT operations"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"query"),": optional query parameters"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"headers"),": optional custom headers"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"meta"),": optional metadata for additional context")),(0,a.yg)("h3",null,"What Your API Expects"),(0,a.yg)("p",null,"Your API endpoints can have any format since ",(0,a.yg)("inlineCode",{parentName:"p"},"custom")," handles specialized operations:"),(0,a.yg)("admonition",{type:"simple"},(0,a.yg)("p",{parentName:"admonition"},(0,a.yg)("strong",{parentName:"p"},"Example API Formats:")),(0,a.yg)("p",{parentName:"admonition"},(0,a.yg)("strong",{parentName:"p"},"Search endpoint:")),(0,a.yg)("ul",{parentName:"admonition"},(0,a.yg)("li",{parentName:"ul"},"Endpoint: ",(0,a.yg)("inlineCode",{parentName:"li"},"https://example.com/posts/search")),(0,a.yg)("li",{parentName:"ul"},"Method: ",(0,a.yg)("inlineCode",{parentName:"li"},"POST")),(0,a.yg)("li",{parentName:"ul"},"Body: ",(0,a.yg)("inlineCode",{parentName:"li"},'{ "query": "react hooks", "filters": { "category": "tutorial" } }'))),(0,a.yg)("p",{parentName:"admonition"},(0,a.yg)("strong",{parentName:"p"},"Export endpoint:")),(0,a.yg)("ul",{parentName:"admonition"},(0,a.yg)("li",{parentName:"ul"},"Endpoint: ",(0,a.yg)("inlineCode",{parentName:"li"},"https://example.com/posts/export?format=csv")),(0,a.yg)("li",{parentName:"ul"},"Method: ",(0,a.yg)("inlineCode",{parentName:"li"},"GET"))),(0,a.yg)("p",{parentName:"admonition"},(0,a.yg)("strong",{parentName:"p"},"Analytics endpoint:")),(0,a.yg)("ul",{parentName:"admonition"},(0,a.yg)("li",{parentName:"ul"},"Endpoint: ",(0,a.yg)("inlineCode",{parentName:"li"},"https://example.com/analytics/dashboard")),(0,a.yg)("li",{parentName:"ul"},"Method: ",(0,a.yg)("inlineCode",{parentName:"li"},"GET")),(0,a.yg)("li",{parentName:"ul"},"Response: ",(0,a.yg)("inlineCode",{parentName:"li"},'{ "metrics": { "totalPosts": 150, "publishedToday": 5 } }'),"\n:::")),(0,a.yg)("h3",null,"What Refine Expects Back"),(0,a.yg)("p",{parentName:"admonition"},"Refine expects the raw response data from your custom endpoint:"),(0,a.yg)("p",{parentName:"admonition"},"API returns:"),(0,a.yg)("pre",{parentName:"admonition"},(0,a.yg)("code",{parentName:"pre",className:"language-json"},'{ "results": [...], "facets": {...}, "total": 42 }\n')),(0,a.yg)("p",{parentName:"admonition"},"Refine expects:"),(0,a.yg)("pre",{parentName:"admonition"},(0,a.yg)("code",{parentName:"pre",className:"language-json"},'{ "results": [...], "facets": {...}, "total": 42 }\n')),(0,a.yg)("p",{parentName:"admonition"},"The ",(0,a.yg)("inlineCode",{parentName:"p"},"custom")," method passes through the exact response, allowing complete flexibility."),(0,a.yg)("h3",null,"Available Methods"),(0,a.yg)("p",{parentName:"admonition"},"The ",(0,a.yg)("inlineCode",{parentName:"p"},"custom")," configuration object provides these methods to transform requests and responses:"),(0,a.yg)("ul",{parentName:"admonition"},(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"buildHeaders")),": Adds authentication tokens or custom headers"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"buildQueryParams")),": Transforms query parameters for the request"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"buildBodyParams")),": Transforms payload data into your API's expected body format"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"mapResponse")),": Transforms your API response into the format your components expect")),(0,a.yg)("h3",null,"Implementation Example"),(0,a.yg)("pre",{parentName:"admonition"},(0,a.yg)("code",{parentName:"pre",className:"language-tsx"},'export const myDataProvider: CreateDataProviderOptions = {\n  custom: {\n    // Add required headers for custom requests\n    buildHeaders: async ({ url, method, payload, query, headers, meta }) => {\n      const customHeaders: Record<string, string> = {\n        "Accept-Language": "en-US",\n      };\n\n      // Add specific headers based on the custom operation\n      if (url.includes("/search")) {\n        customHeaders["X-Search-Engine"] = "elasticsearch";\n      }\n\n      if (url.includes("/export")) {\n        customHeaders["Accept"] = "text/csv";\n      }\n\n      return customHeaders;\n    },\n\n    // Transform query parameters for custom endpoints\n    buildQueryParams: async ({\n      url,\n      method,\n      payload,\n      query,\n      headers,\n      meta,\n    }) => {\n      const params: Record<string, any> = { ...query };\n\n      // Add default parameters for search endpoints\n      if (url.includes("/search")) {\n        params.highlight = true;\n        params.spell_check = true;\n      }\n\n      // Add format parameter for export endpoints\n      if (url.includes("/export")) {\n        params.format = params.format || "csv";\n        params.timestamp = new Date().toISOString();\n      }\n\n      return params;\n    },\n\n    // Transform payload data for custom endpoints\n    buildBodyParams: async ({ url, method, payload, query, headers, meta }) => {\n      // Search endpoint expects specific body format\n      if (url.includes("/search")) {\n        return {\n          searchQuery: payload?.query || "",\n          filters: payload?.filters || {},\n          pagination: {\n            page: payload?.page || 1,\n            size: payload?.size || 20,\n          },\n          sort: payload?.sort || "relevance",\n        };\n      }\n\n      // Analytics endpoint might need date ranges\n      if (url.includes("/analytics")) {\n        return {\n          ...payload,\n          dateRange: payload?.dateRange || {\n            from: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString(),\n            to: new Date().toISOString(),\n          },\n        };\n      }\n\n      // Default: pass payload as-is\n      return payload;\n    },\n\n    // Transform response data from custom endpoints\n    mapResponse: async (\n      response,\n      { url, method, payload, query, headers, meta },\n    ) => {\n      const json = await response.json();\n\n      // Search endpoint returns results in specific format\n      if (url.includes("/search")) {\n        return {\n          data: json.hits || [],\n          total: json.total_count || 0,\n          facets: json.aggregations || {},\n          suggestions: json.suggestions || [],\n        };\n      }\n\n      // Export endpoint might return file metadata\n      if (url.includes("/export")) {\n        return {\n          downloadUrl: json.file_url,\n          filename: json.filename,\n          size: json.file_size,\n          expiresAt: json.expires_at,\n        };\n      }\n\n      // Analytics endpoint returns metrics\n      if (url.includes("/analytics")) {\n        return {\n          metrics: json.data || {},\n          period: json.period,\n          updatedAt: json.last_updated,\n        };\n      }\n\n      // Default: return response as-is\n      return json;\n    },\n  },\n};\n')),(0,a.yg)("p",{parentName:"admonition"},"With this ",(0,a.yg)("inlineCode",{parentName:"p"},"custom")," implementation, here's what happens for different custom operations:"),(0,a.yg)("p",{parentName:"admonition"},(0,a.yg)("strong",{parentName:"p"},"Search scenario:")),(0,a.yg)("ol",{parentName:"admonition"},(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"User performs search"),": Search component calls ",(0,a.yg)("inlineCode",{parentName:"li"},"custom")," with ",(0,a.yg)("inlineCode",{parentName:"li"},'url: "/posts/search"'),", ",(0,a.yg)("inlineCode",{parentName:"li"},'method: "post"'),", ",(0,a.yg)("inlineCode",{parentName:"li"},'payload: { query: "react hooks", filters: { category: "tutorial" } }')),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Your transformation"),": ",(0,a.yg)("inlineCode",{parentName:"li"},"buildBodyParams")," formats search parameters, ",(0,a.yg)("inlineCode",{parentName:"li"},"buildHeaders")," adds search engine header"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"API call"),": POST request goes to ",(0,a.yg)("inlineCode",{parentName:"li"},"https://example.com/posts/search?highlight=true&spell_check=true")),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Response processing"),": ",(0,a.yg)("inlineCode",{parentName:"li"},"mapResponse")," transforms search results into consistent format with data, total, facets, and suggestions"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"UI update"),": Search components display results with highlighting, faceted navigation, and spelling suggestions")),(0,a.yg)("p",{parentName:"admonition"},(0,a.yg)("strong",{parentName:"p"},"Export scenario:")),(0,a.yg)("ol",{parentName:"admonition"},(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"User requests export"),": Export component calls ",(0,a.yg)("inlineCode",{parentName:"li"},"custom")," with ",(0,a.yg)("inlineCode",{parentName:"li"},'url: "/posts/export"'),", ",(0,a.yg)("inlineCode",{parentName:"li"},'method: "get"'),", ",(0,a.yg)("inlineCode",{parentName:"li"},'query: { format: "xlsx" }')),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Your transformation"),": ",(0,a.yg)("inlineCode",{parentName:"li"},"buildQueryParams")," adds format and timestamp, ",(0,a.yg)("inlineCode",{parentName:"li"},"buildHeaders")," sets appropriate Accept header"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"API call"),": GET request goes to ",(0,a.yg)("inlineCode",{parentName:"li"},"https://example.com/posts/export?format=xlsx&timestamp=2025-09-24T...")),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Response processing"),": ",(0,a.yg)("inlineCode",{parentName:"li"},"mapResponse")," extracts download URL and file metadata"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"UI update"),": Component provides download link or triggers automatic download")),(0,a.yg)("p",{parentName:"admonition"},(0,a.yg)("strong",{parentName:"p"},"Analytics scenario:")),(0,a.yg)("ol",{parentName:"admonition"},(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Dashboard loads"),": Analytics component calls ",(0,a.yg)("inlineCode",{parentName:"li"},"custom")," with ",(0,a.yg)("inlineCode",{parentName:"li"},'url: "/analytics/dashboard"'),", ",(0,a.yg)("inlineCode",{parentName:"li"},'method: "get"')),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Your transformation"),": ",(0,a.yg)("inlineCode",{parentName:"li"},"buildBodyParams")," adds default date range for last 30 days"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"API call"),": GET request goes to ",(0,a.yg)("inlineCode",{parentName:"li"},"https://example.com/analytics/dashboard")),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Response processing"),": ",(0,a.yg)("inlineCode",{parentName:"li"},"mapResponse")," structures metrics data with period information"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"UI update"),": Dashboard displays charts and metrics with last updated timestamp")),(0,a.yg)("p",{parentName:"admonition"},(0,a.yg)("strong",{parentName:"p"},"File upload scenario:")),(0,a.yg)("ol",{parentName:"admonition"},(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"User uploads file"),": Upload component calls ",(0,a.yg)("inlineCode",{parentName:"li"},"custom")," with ",(0,a.yg)("inlineCode",{parentName:"li"},'url: "/files/upload"'),", ",(0,a.yg)("inlineCode",{parentName:"li"},'method: "post"'),", ",(0,a.yg)("inlineCode",{parentName:"li"},"payload: formData")),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Your transformation"),": ",(0,a.yg)("inlineCode",{parentName:"li"},"buildHeaders")," adds multipart content type, ",(0,a.yg)("inlineCode",{parentName:"li"},"buildBodyParams")," passes FormData through"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"API call"),": POST request goes to ",(0,a.yg)("inlineCode",{parentName:"li"},"https://example.com/files/upload")," with file data"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Response processing"),": ",(0,a.yg)("inlineCode",{parentName:"li"},"mapResponse")," extracts file ID and metadata"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"UI update"),": Component shows upload success with file details")),(0,a.yg)("p",{parentName:"admonition"},"The ",(0,a.yg)("inlineCode",{parentName:"p"},"custom")," method provides complete flexibility for any specialized API operations while maintaining the consistent transformation pattern used throughout the data provider."),(0,a.yg)("h2",{parentName:"admonition",id:"hooks"},"Hooks"),(0,a.yg)("p",{parentName:"admonition"},"The ",(0,a.yg)("inlineCode",{parentName:"p"},"@refinedev/rest")," data provider uses KY as its HTTP client, which provides powerful hooks for intercepting and modifying requests and responses. We provide several pre-built hooks for common use cases, and you can also create custom hooks or swizzle existing ones to match your specific needs.")),(0,a.yg)("p",null,"These are KY hooks, not Refine hooks. They operate at the HTTP request/response level and run for every API call made by the data provider. For more information about KY hooks, see the ",(0,a.yg)("a",{parentName:"p",href:"https://github.com/sindresorhus/ky#hooks"},"KY documentation"),".\n:::"),(0,a.yg)("h3",null,"Using Hooks"),(0,a.yg)("p",null,"Hooks are passed as the third parameter to ",(0,a.yg)("inlineCode",{parentName:"p"},"createDataProvider")," in the KY options:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx"},'import {\n  createDataProvider,\n  authHeaderBeforeRequestHook,\n} from "@refinedev/rest";\n\nconst dataProvider = createDataProvider(\n  "https://api.example.com",\n  {}, // Data provider options\n  {\n    // KY options\n    hooks: {\n      beforeRequest: [\n        authHeaderBeforeRequestHook({ ACCESS_TOKEN_KEY: "accessToken" }),\n        // Add more beforeRequest hooks here\n      ],\n      afterResponse: [\n        // Add afterResponse hooks here\n      ],\n      beforeError: [\n        // Add beforeError hooks here\n      ],\n    },\n  },\n);\n'))),(0,a.yg)("h3",{id:"available-hooks"},"Available Hooks"),(0,a.yg)(y,{id:"available-hooks",mdxType:"DocThumbsUpDownFeedbackWidget"},(0,a.yg)("p",null,"KY provides several hook types for different stages of the request lifecycle:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"beforeRequest")),": Modify the request before it's sent"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"beforeRetry")),": Handle retry logic for failed requests"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"afterResponse")),": Process the response after it's received"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"beforeError")),": Transform errors before they're thrown"))),(0,a.yg)("h4",{id:"auth-header-hook"},"Auth Header Hook"),(0,a.yg)(y,{id:"auth-header-hook",mdxType:"DocThumbsUpDownFeedbackWidget"},(0,a.yg)("admonition",{title:"Swizzle",type:"simple"},(0,a.yg)("p",{parentName:"admonition"},"You can swizzle this hook to customize it with the ",(0,a.yg)("a",{parentName:"p",href:"/docs/3.xx.xx/packages/documentation/cli"},(0,a.yg)("strong",{parentName:"a"},"refine CLI")))),(0,a.yg)("p",null,"Automatically adds Bearer token authentication to all requests:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx"},'import { authHeaderBeforeRequestHook } from "@refinedev/rest";\n\nconst dataProvider = createDataProvider(\n  "https://api.example.com",\n  {},\n  {\n    hooks: {\n      beforeRequest: [\n        authHeaderBeforeRequestHook({ ACCESS_TOKEN_KEY: "accessToken" }),\n      ],\n    },\n  },\n);\n')),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Parameters:")),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"ACCESS_TOKEN_KEY"),": The localStorage key where your access token is stored")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Behavior:")),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Retrieves the token from ",(0,a.yg)("inlineCode",{parentName:"li"},"localStorage.getItem(ACCESS_TOKEN_KEY)")),(0,a.yg)("li",{parentName:"ul"},"Adds ",(0,a.yg)("inlineCode",{parentName:"li"},"Authorization: Bearer <token>")," header to all requests"),(0,a.yg)("li",{parentName:"ul"},"Silently skips if no token is found"))),(0,a.yg)("h4",{id:"refresh-token-hook"},"Refresh Token Hook"),(0,a.yg)(y,{id:"refresh-token-hook",mdxType:"DocThumbsUpDownFeedbackWidget"},(0,a.yg)("admonition",{title:"Swizzle",type:"simple"},(0,a.yg)("p",{parentName:"admonition"},"You can swizzle this hook to customize it with the ",(0,a.yg)("a",{parentName:"p",href:"/docs/3.xx.xx/packages/documentation/cli"},(0,a.yg)("strong",{parentName:"a"},"refine CLI")))),(0,a.yg)("p",null,"Automatically handles token refresh when receiving 401 responses:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx"},'import { refreshTokenAfterResponseHook } from "@refinedev/rest";\n\nconst dataProvider = createDataProvider(\n  "https://api.example.com",\n  {},\n  {\n    hooks: {\n      afterResponse: [\n        refreshTokenAfterResponseHook({\n          ACCESS_TOKEN_KEY: "accessToken",\n          REFRESH_TOKEN_KEY: "refreshToken",\n          REFRESH_TOKEN_URL: "https://api.example.com/refresh-token",\n        }),\n      ],\n    },\n  },\n);\n')),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Parameters:")),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"ACCESS_TOKEN_KEY"),": The localStorage key where your access token is stored"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"REFRESH_TOKEN_KEY"),": The localStorage key where your refresh token is stored"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"REFRESH_TOKEN_URL"),": The endpoint URL for refreshing tokens")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Behavior:")),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Intercepts 401 responses and attempts to refresh the access token"),(0,a.yg)("li",{parentName:"ul"},"Sends POST request to refresh endpoint with current refresh token in body"),(0,a.yg)("li",{parentName:"ul"},"Updates localStorage with new access and refresh tokens"),(0,a.yg)("li",{parentName:"ul"},"Retries the original request with the new access token"),(0,a.yg)("li",{parentName:"ul"},"Returns original 401 response if token refresh fails"))),(0,a.yg)("h3",{id:"creating-custom-hooks"},"Creating Custom Hooks"),(0,a.yg)(y,{id:"creating-custom-hooks",mdxType:"DocThumbsUpDownFeedbackWidget"},(0,a.yg)("p",null,"You can create custom hooks to handle your specific authentication, logging, or request modification needs:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx"},'import type { Hooks } from "ky";\n\n// Custom beforeRequest hook for API versioning\nconst apiVersionHook: NonNullable<Hooks["beforeRequest"]>[number] = async (\n  request,\n) => {\n  request.headers.set("API-Version", "2.0");\n  request.headers.set("X-Client", "refine-app");\n};\n\n// Custom afterResponse hook for response logging\nconst responseLoggerHook: NonNullable<Hooks["afterResponse"]>[number] = async (\n  request,\n  options,\n  response,\n) => {\n  console.log(`${request.method} ${request.url} - ${response.status}`);\n  return response;\n};\n\n// Custom beforeError hook for error transformation\nconst errorTransformHook: NonNullable<Hooks["beforeError"]>[number] = async (\n  error,\n) => {\n  if (error.response?.status === 401) {\n    // Redirect to login or refresh token\n    window.location.href = "/login";\n  }\n  return error;\n};\n\nconst dataProvider = createDataProvider(\n  "https://api.example.com",\n  {},\n  {\n    hooks: {\n      beforeRequest: [apiVersionHook],\n      afterResponse: [responseLoggerHook],\n      beforeError: [errorTransformHook],\n    },\n  },\n);\n'))),(0,a.yg)("h3",{id:"swizzling-existing-hooks"},"Swizzling Existing Hooks"),(0,a.yg)(y,{id:"swizzling-existing-hooks",mdxType:"DocThumbsUpDownFeedbackWidget"},(0,a.yg)("p",null,"You can swizzle (copy and modify) our pre-built hooks to customize their behavior. Use the Refine CLI to swizzle hooks:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-bash"},"npm run refine swizzle\n")),(0,a.yg)("p",null,"Then select the hook you want to customize. This will copy the hook to your project where you can modify it:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx"},'import type { Hooks } from "ky";\n\n// Swizzled version of authHeaderBeforeRequestHook with custom logic\nconst customAuthHeaderHook =\n  (options: {\n    ACCESS_TOKEN_KEY: string;\n  }): NonNullable<Hooks["beforeRequest"]>[number] =>\n  async (request) => {\n    const token = localStorage.getItem(options.ACCESS_TOKEN_KEY);\n\n    if (token) {\n      // Custom: Add both Bearer token and API key\n      request.headers.set("Authorization", `Bearer ${token}`);\n      request.headers.set("X-API-Key", "your-api-key");\n    } else {\n      // Custom: Redirect to login if no token\n      window.location.href = "/login";\n      throw new Error("No authentication token found");\n    }\n  };\n\nconst dataProvider = createDataProvider(\n  "https://api.example.com",\n  {},\n  {\n    hooks: {\n      beforeRequest: [\n        customAuthHeaderHook({ ACCESS_TOKEN_KEY: "accessToken" }),\n      ],\n    },\n  },\n);\n'))),(0,a.yg)("h3",{id:"common-hook-patterns"},"Common Hook Patterns"),(0,a.yg)(y,{id:"common-hook-patterns",mdxType:"DocThumbsUpDownFeedbackWidget"},(0,a.yg)("h4",null,"Request/Response Logging"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx"},'const requestLoggerHook: NonNullable<Hooks["beforeRequest"]>[number] = async (\n  request,\n) => {\n  console.log(`Making ${request.method} request to ${request.url}`);\n};\n\nconst responseLoggerHook: NonNullable<Hooks["afterResponse"]>[number] = async (\n  request,\n  options,\n  response,\n) => {\n  console.log(`Response ${response.status} from ${request.url}`);\n  return response;\n};\n')),(0,a.yg)("h4",null,"Request Timeout"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx"},'const timeoutHook: NonNullable<Hooks["beforeRequest"]>[number] = async (\n  request,\n  options,\n) => {\n  // Set 30-second timeout for all requests\n  options.timeout = 30000;\n};\n')),(0,a.yg)("h4",null,"Retry Logic with Custom Conditions"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx"},'const customRetryHook: NonNullable<Hooks["beforeRetry"]>[number] = async ({\n  request,\n  options,\n  error,\n  retryCount,\n}) => {\n  // Only retry for specific error codes\n  if (error.response?.status === 503 && retryCount < 3) {\n    console.log(\n      `Retrying request to ${request.url} (attempt ${retryCount + 1})`,\n    );\n    // Add exponential backoff\n    await new Promise((resolve) =>\n      setTimeout(resolve, Math.pow(2, retryCount) * 1000),\n    );\n  }\n};\n')),(0,a.yg)("h4",null,"Global Error Handling"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx"},'const globalErrorHook: NonNullable<Hooks["beforeError"]>[number] = async (\n  error,\n) => {\n  if (error.response?.status === 401) {\n    // Clear auth and redirect\n    localStorage.removeItem("accessToken");\n    window.location.href = "/login";\n  } else if (error.response?.status >= 500) {\n    // Show global error notification\n    console.error("Server error:", error.message);\n  }\n  return error;\n};\n')),(0,a.yg)("h4",null,"Hook Execution Order"),(0,a.yg)("p",null,"Hooks execute in the order they're defined in the array:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx"},'const dataProvider = createDataProvider(\n  "https://api.example.com",\n  {},\n  {\n    hooks: {\n      beforeRequest: [\n        firstHook, // Runs first\n        secondHook, // Runs second\n        thirdHook, // Runs third\n      ],\n    },\n  },\n);\n')),(0,a.yg)("p",null,"This allows you to compose multiple hooks and control their execution sequence for complex request/response processing.")))}N.isMDXComponent=!0}}]);