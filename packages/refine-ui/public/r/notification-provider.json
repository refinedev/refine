{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "notification-provider",
  "type": "registry:component",
  "title": "Notification Provider",
  "author": "Refine <info@refine.dev>",
  "description": "A comprehensive notification system for Refine with toast notifications, undoable notifications, and provider hooks using sonner",
  "dependencies": ["@refinedev/core", "sonner"],
  "registryDependencies": [
    "button",
    "dropdown-menu",
    "https://ui.refine.dev/r/theme-provider.json"
  ],
  "files": [
    {
      "path": "registry/new-york/refine-ui/notification/use-notification-provider.tsx",
      "content": "import type { NotificationProvider } from \"@refinedev/core\";\r\nimport { toast } from \"sonner\";\r\nimport { UndoableNotification } from \"@/registry/new-york/refine-ui/notification/undoable-notification\";\r\n\r\nexport function useNotificationProvider(): NotificationProvider {\r\n  return {\r\n    open: ({\r\n      key,\r\n      type,\r\n      message,\r\n      description,\r\n      undoableTimeout,\r\n      cancelMutation,\r\n    }) => {\r\n      switch (type) {\r\n        case \"success\":\r\n          toast.success(message, {\r\n            id: key,\r\n            description,\r\n            richColors: true,\r\n          });\r\n          return;\r\n\r\n        case \"error\":\r\n          toast.error(message, {\r\n            id: key,\r\n            description,\r\n            richColors: true,\r\n          });\r\n          return;\r\n\r\n        case \"progress\": {\r\n          const toastId = key || Date.now();\r\n\r\n          toast(\r\n            () => (\r\n              <UndoableNotification\r\n                message={message}\r\n                description={description}\r\n                undoableTimeout={undoableTimeout}\r\n                cancelMutation={cancelMutation}\r\n                onClose={() => toast.dismiss(toastId)}\r\n              />\r\n            ),\r\n            {\r\n              id: toastId,\r\n              duration: (undoableTimeout || 5) * 1000,\r\n              unstyled: true,\r\n            },\r\n          );\r\n          return;\r\n        }\r\n\r\n        default:\r\n          return;\r\n      }\r\n    },\r\n    close: (id) => {\r\n      toast.dismiss(id);\r\n    },\r\n  };\r\n}\r\n",
      "type": "registry:hook",
      "target": "src/components/refine-ui/notification/use-notification-provider.tsx"
    },
    {
      "path": "registry/new-york/refine-ui/notification/toaster.tsx",
      "content": "\"use client\";\r\n\r\nimport { Toaster as Sonner, type ToasterProps } from \"sonner\";\r\nimport { useTheme } from \"@/registry/new-york/refine-ui/theme/theme-provider\";\r\n\r\nexport function Toaster({ ...props }: ToasterProps) {\r\n  const { theme = \"system\" } = useTheme();\r\n\r\n  return (\r\n    <Sonner\r\n      theme={theme as ToasterProps[\"theme\"]}\r\n      className=\"toaster group\"\r\n      style={\r\n        {\r\n          \"--normal-bg\": \"var(--popover)\",\r\n          \"--normal-text\": \"var(--popover-foreground)\",\r\n          \"--normal-border\": \"var(--border)\",\r\n        } as React.CSSProperties\r\n      }\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n",
      "type": "registry:component",
      "target": "src/components/refine-ui/notification/toaster.tsx"
    },
    {
      "path": "registry/new-york/refine-ui/notification/undoable-notification.tsx",
      "content": "import React from \"react\";\r\nimport { useTranslate } from \"@refinedev/core\";\r\nimport { Button } from \"@/registry/new-york/ui/button\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ntype UndoableNotificationProps = {\r\n  message: string;\r\n  description?: string;\r\n  undoableTimeout?: number;\r\n  cancelMutation?: () => void;\r\n  onClose?: () => void;\r\n};\r\n\r\nexport function UndoableNotification({\r\n  message,\r\n  description,\r\n  undoableTimeout = 5,\r\n  cancelMutation,\r\n  onClose,\r\n}: UndoableNotificationProps) {\r\n  const t = useTranslate();\r\n\r\n  React.useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      onClose?.();\r\n    }, undoableTimeout * 1000);\r\n\r\n    return () => clearTimeout(timer);\r\n  }, [onClose, undoableTimeout]);\r\n\r\n  const handleUndo = () => {\r\n    cancelMutation?.();\r\n    onClose?.();\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={cn(\r\n        \"bg-card\",\r\n        \"text-card-foreground\",\r\n        \"rounded-lg\",\r\n        \"p-4\",\r\n        \"shadow-xl\",\r\n        \"border\",\r\n        \"border-border\",\r\n        \"min-w-[320px]\",\r\n        \"max-w-md\",\r\n      )}\r\n    >\r\n      <div className={cn(\"flex\", \"items-center\", \"justify-between\")}>\r\n        <div className={cn(\"flex-1\", \"mr-4\")}>\r\n          <div className={cn(\"font-medium\", \"text-foreground\", \"text-sm\")}>\r\n            {message}\r\n          </div>\r\n          {description && (\r\n            <div className={cn(\"text-muted-foreground\", \"text-sm\", \"mt-1\")}>\r\n              {description}\r\n            </div>\r\n          )}\r\n        </div>\r\n        <Button\r\n          variant=\"secondary\"\r\n          size=\"sm\"\r\n          onClick={handleUndo}\r\n          className={cn(\r\n            \"bg-secondary\",\r\n            \"hover:bg-secondary/80\",\r\n            \"text-secondary-foreground\",\r\n            \"border-0\",\r\n            \"px-4\",\r\n            \"py-2\",\r\n            \"text-sm\",\r\n            \"font-medium\",\r\n            \"rounded-md\",\r\n          )}\r\n        >\r\n          {t(\"buttons.undo\", \"Undo\")}\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nUndoableNotification.displayName = \"UndoableNotification\";\r\n",
      "type": "registry:component",
      "target": "src/components/refine-ui/notification/undoable-notification.tsx"
    }
  ],
  "docs": "https://github.com/refinedev/refine",
  "categories": ["providers", "notifications", "toast", "hooks", "undoable"]
}
