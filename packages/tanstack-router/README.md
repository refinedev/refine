# @refinedev/tanstack-router

TanStack Router support for **Refine**, with built-in routing capabilities and full type safety.

<div align="center" style="margin: 30px;">
    <a href="https://refine.dev">
    <img alt="refine logo" src="https://refine.ams3.cdn.digitaloceanspaces.com/readme/refine-readme-banner.png">
    </a>
</div>

<br/>

This package provides **TanStack Router** bindings for Refine applications, enabling you to use TanStack Router's modern routing patterns with type safety and data fetching capabilities alongside Refine's data management features.

## Installation

```bash
npm install @refinedev/tanstack-router @tanstack/react-router
```

## Usage

To use the TanStack Router integration, you need to import and use the router bindings in your `<Refine/>` component:

```tsx
import React from "react";
import { Refine } from "@refinedev/core";
import routerBindings from "@refinedev/tanstack-router";
import dataProvider from "@refinedev/simple-rest";

import { PostList, PostCreate, PostEdit, PostShow } from "./posts";

function App() {
  return (
    <Refine
      dataProvider={dataProvider("https://api.fake-rest.refine.dev")}
      routerProvider={routerBindings}
      resources={[
        {
          name: "posts",
          list: "/posts",
          create: "/posts/create",
          edit: "/posts/edit/:id",
          show: "/posts/show/:id",
        },
      ]}
    />
  );
}

export default App;
```

## Router Configuration

First, you need to set up your TanStack Router configuration. Create your route tree according to TanStack Router's file-based routing or code-based routing patterns:

### File-Based Routing

```typescript
// src/routeTree.gen.ts (generated by TanStack Router CLI)
import { createFileRoute } from "@tanstack/react-router";
import { PostList } from "../components/posts/list";

export const Route = createFileRoute("/posts")({
  component: PostList,
});
```

### Code-Based Routing

```typescript
// src/router.tsx
import { Router, Route, RootRoute } from "@tanstack/react-router";
import { PostList, PostCreate, PostEdit, PostShow } from "./components/posts";

const rootRoute = new RootRoute();

const postsRoute = new Route({
  getParentRoute: () => rootRoute,
  path: "/posts",
  component: PostList,
});

const postCreateRoute = new Route({
  getParentRoute: () => rootRoute,
  path: "/posts/create",
  component: PostCreate,
});

const routeTree = rootRoute.addChildren([postsRoute, postCreateRoute]);

export const router = new Router({ routeTree });
```

## Benefits

By using TanStack Router with Refine, you get:

- **Type Safety**: Full TypeScript support with route-level type safety
- **Data Fetching**: Built-in data loading with automatic caching and preloading
- **Search Params**: Advanced search parameter handling with schemas and validation
- **Performance**: Optimized routing with code splitting and preloading capabilities
- **Developer Experience**: Modern routing patterns with excellent tooling support

## API Reference

The TanStack Router binding for Refine implements the `RouterProvider` interface with the following methods:

### `go()`

Navigate to a specific route programmatically.

```tsx
import { useGo } from "@refinedev/core";

const go = useGo();

go({
  to: "/posts",
  query: { page: 1 },
  type: "push", // or "replace"
});
```

### `back()`

Navigate back to the previous route.

```tsx
import { useBack } from "@refinedev/core";

const back = useBack();
back();
```

### `parse()`

Parse the current route and extract resource, action, and parameters.

```tsx
import { useParsed } from "@refinedev/core";

const { resource, action, id, params } = useParsed();
```

### `Link`

Render links with TanStack Router's Link component.

```tsx
import { useLink } from "@refinedev/core";

const Link = useLink();

<Link to="/posts/1">View Post</Link>;
```

## Documentation

For more detailed information and examples, please check out the [Refine documentation](https://refine.dev/docs).

## Example

```tsx
import React from "react";
import { createRoot } from "react-dom/client";
import { Refine } from "@refinedev/core";
import routerBindings from "@refinedev/tanstack-router";
import { createRouter, RouterProvider } from "@tanstack/react-router";
import { routeTree } from "./routeTree.gen";
import dataProvider from "@refinedev/simple-rest";

// Create router instance
const router = createRouter({ routeTree });

function App() {
  return (
    <RouterProvider router={router}>
      <Refine
        dataProvider={dataProvider("https://api.fake-rest.refine.dev")}
        routerProvider={routerBindings}
        resources={[
          {
            name: "posts",
            list: "/posts",
            create: "/posts/create",
            edit: "/posts/edit/$id",
            show: "/posts/show/$id",
          },
        ]}
      />
    </RouterProvider>
  );
}

const rootElement = document.getElementById("root")!;
createRoot(rootElement).render(<App />);
```
